{"timestamp": "2025-10-19T17:16:31.592670", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36884, "thread_name": "AnyIO worker thread", "process": 33228, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:16:31.644266", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36884, "thread_name": "AnyIO worker thread", "process": 33228, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:16:31.713041", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36884, "thread_name": "AnyIO worker thread", "process": 33228, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:16:31.728718", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36884, "thread_name": "AnyIO worker thread", "process": 33228, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:16:31.857033", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36884, "thread_name": "AnyIO worker thread", "process": 33228, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:16:31.868941", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36884, "thread_name": "AnyIO worker thread", "process": 33228, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:17:26.485210", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36884, "thread_name": "AnyIO worker thread", "process": 33228, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:17:26.488210", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36884, "thread_name": "AnyIO worker thread", "process": 33228, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:17:26.500389", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36884, "thread_name": "AnyIO worker thread", "process": 33228, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:17:26.513392", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36884, "thread_name": "AnyIO worker thread", "process": 33228, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:17:26.591242", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36884, "thread_name": "AnyIO worker thread", "process": 33228, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:17:26.594247", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36884, "thread_name": "AnyIO worker thread", "process": 33228, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:17:31.818790", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36884, "thread_name": "AnyIO worker thread", "process": 33228, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:17:31.821315", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36884, "thread_name": "AnyIO worker thread", "process": 33228, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:17:31.831316", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36884, "thread_name": "AnyIO worker thread", "process": 33228, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:17:31.842334", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36884, "thread_name": "AnyIO worker thread", "process": 33228, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:17:31.926223", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36884, "thread_name": "AnyIO worker thread", "process": 33228, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:17:31.929346", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36884, "thread_name": "AnyIO worker thread", "process": 33228, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:17:54.593298", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36884, "thread_name": "AnyIO worker thread", "process": 33228, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:17:54.596314", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36884, "thread_name": "AnyIO worker thread", "process": 33228, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:17:54.608817", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36884, "thread_name": "AnyIO worker thread", "process": 33228, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:17:54.623892", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36884, "thread_name": "AnyIO worker thread", "process": 33228, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:17:54.693352", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36884, "thread_name": "AnyIO worker thread", "process": 33228, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:17:54.696346", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36884, "thread_name": "AnyIO worker thread", "process": 33228, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:28:28.351689", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 11640, "thread_name": "MainThread", "process": 39440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:28:28.805868", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 11640, "thread_name": "MainThread", "process": 39440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:28:28.807880", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 11640, "thread_name": "MainThread", "process": 39440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-19T17:28:28.889929", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 11640, "thread_name": "MainThread", "process": 39440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-19T17:28:28.890928", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 11640, "thread_name": "MainThread", "process": 39440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:28:28.891929", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 11640, "thread_name": "MainThread", "process": 39440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:28:32.811977", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 11640, "thread_name": "MainThread", "process": 39440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:28:38.734708", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5780, "thread_name": "MainThread", "process": 11468, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:28:39.009022", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5780, "thread_name": "MainThread", "process": 11468, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:28:39.009022", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5780, "thread_name": "MainThread", "process": 11468, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-19T17:28:39.029036", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5780, "thread_name": "MainThread", "process": 11468, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-19T17:28:39.031209", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5780, "thread_name": "MainThread", "process": 11468, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:28:39.032229", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5780, "thread_name": "MainThread", "process": 11468, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:28:43.298464", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5780, "thread_name": "MainThread", "process": 11468, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:28:43.707746", "level": "INFO", "logger": "whysper.app.main", "message": "Starting Whysper Web2 Backend v2.0.0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5780, "thread_name": "MainThread", "process": 11468, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T17:28:43.710199", "level": "INFO", "logger": "whysper.app.main", "message": "Server running on 0.0.0.0:8003", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5780, "thread_name": "MainThread", "process": 11468, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T17:28:43.711195", "level": "INFO", "logger": "whysper.app.main", "message": "Debug mode: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5780, "thread_name": "MainThread", "process": 11468, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T17:28:43.712194", "level": "INFO", "logger": "whysper.app.main", "message": "CORS origins: ['http://localhost:3000', 'http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:5176', 'http://localhost:5177', 'http://localhost:5178', 'http://127.0.0.1:3000', 'http://127.0.0.1:5173', 'http://127.0.0.1:5174', 'http://127.0.0.1:5175', 'http://127.0.0.1:5176', 'http://127.0.0.1:5177']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5780, "thread_name": "MainThread", "process": 11468, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T17:28:43.714194", "level": "INFO", "logger": "whysper.app.main", "message": "Real-time log broadcasting enabled - connect to GET /api/v1/logs/stream", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5780, "thread_name": "MainThread", "process": 11468, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T17:28:43.715196", "level": "INFO", "logger": "whysper.app.main", "message": "FastMCP server integration initialized", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5780, "thread_name": "MainThread", "process": 11468, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T17:28:43.716197", "level": "INFO", "logger": "whysper.app.main", "message": "MCP endpoints available at /mcp/*", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5780, "thread_name": "MainThread", "process": 11468, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T17:28:43.717194", "level": "INFO", "logger": "whysper.app.main", "message": "MCP tools: generate_diagram, render_diagram, generate_and_render", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5780, "thread_name": "MainThread", "process": 11468, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T17:28:43.718195", "level": "INFO", "logger": "whysper.app.main", "message": "MCP WebSocket endpoint: /mcp/ws", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5780, "thread_name": "MainThread", "process": 11468, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T17:58:48.784451", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 780, "thread_name": "AnyIO worker thread", "process": 11468, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:58:48.856732", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38028, "thread_name": "AnyIO worker thread", "process": 11468, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:58:48.998932", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 780, "thread_name": "AnyIO worker thread", "process": 11468, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:58:49.001935", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38028, "thread_name": "AnyIO worker thread", "process": 11468, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:58:49.273921", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 780, "thread_name": "AnyIO worker thread", "process": 11468, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:58:49.400861", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 780, "thread_name": "AnyIO worker thread", "process": 11468, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:58:49.450436", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 780, "thread_name": "AnyIO worker thread", "process": 11468, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:58:49.457307", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38028, "thread_name": "AnyIO worker thread", "process": 11468, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:58:49.463117", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38028, "thread_name": "AnyIO worker thread", "process": 11468, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:58:49.498670", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 780, "thread_name": "AnyIO worker thread", "process": 11468, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:58:49.560802", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 780, "thread_name": "AnyIO worker thread", "process": 11468, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T17:58:49.563799", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 780, "thread_name": "AnyIO worker thread", "process": 11468, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:00:00.868589", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5780, "thread_name": "MainThread", "process": 11468, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-19"}}
{"timestamp": "2025-10-19T18:00:17.989907", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 780, "thread_name": "AnyIO worker thread", "process": 11468, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:00:17.993070", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'Create a d2 diagram of a iphone app', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 780, "thread_name": "AnyIO worker thread", "process": 11468, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:00:17.995087", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: Create a d2 diagram of a iphone app", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 780, "thread_name": "AnyIO worker thread", "process": 11468, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:00:17.997088", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 780, "thread_name": "AnyIO worker thread", "process": 11468, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:00:17.999085", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 780, "thread_name": "AnyIO worker thread", "process": 11468, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:00:18.000083", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 780, "thread_name": "AnyIO worker thread", "process": 11468, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:00:18.005278", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Creating new conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 780, "thread_name": "AnyIO worker thread", "process": 11468, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:02:11.480711", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 20000, "thread_name": "MainThread", "process": 31232, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:02:11.844015", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 20000, "thread_name": "MainThread", "process": 31232, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:02:11.845052", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 20000, "thread_name": "MainThread", "process": 31232, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-19T18:02:11.869482", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 20000, "thread_name": "MainThread", "process": 31232, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-19T18:02:11.871501", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 20000, "thread_name": "MainThread", "process": 31232, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:02:11.872514", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 20000, "thread_name": "MainThread", "process": 31232, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:02:19.757829", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 20000, "thread_name": "MainThread", "process": 31232, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:02:29.643311", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37868, "thread_name": "MainThread", "process": 30440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:02:30.035115", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37868, "thread_name": "MainThread", "process": 30440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:02:30.036180", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37868, "thread_name": "MainThread", "process": 30440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-19T18:02:30.044052", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37868, "thread_name": "MainThread", "process": 30440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-19T18:02:30.045052", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37868, "thread_name": "MainThread", "process": 30440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:02:30.045052", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37868, "thread_name": "MainThread", "process": 30440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:02:35.830587", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37868, "thread_name": "MainThread", "process": 30440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:02:36.335081", "level": "INFO", "logger": "whysper.app.main", "message": "Starting Whysper Web2 Backend v2.0.0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37868, "thread_name": "MainThread", "process": 30440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T18:02:36.337062", "level": "INFO", "logger": "whysper.app.main", "message": "Server running on 0.0.0.0:8003", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37868, "thread_name": "MainThread", "process": 30440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T18:02:36.338055", "level": "INFO", "logger": "whysper.app.main", "message": "Debug mode: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37868, "thread_name": "MainThread", "process": 30440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T18:02:36.338055", "level": "INFO", "logger": "whysper.app.main", "message": "CORS origins: ['http://localhost:3000', 'http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:5176', 'http://localhost:5177', 'http://localhost:5178', 'http://127.0.0.1:3000', 'http://127.0.0.1:5173', 'http://127.0.0.1:5174', 'http://127.0.0.1:5175', 'http://127.0.0.1:5176', 'http://127.0.0.1:5177']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37868, "thread_name": "MainThread", "process": 30440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T18:02:36.340054", "level": "INFO", "logger": "whysper.app.main", "message": "Real-time log broadcasting enabled - connect to GET /api/v1/logs/stream", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37868, "thread_name": "MainThread", "process": 30440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T18:02:36.341049", "level": "INFO", "logger": "whysper.app.main", "message": "FastMCP server integration initialized", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37868, "thread_name": "MainThread", "process": 30440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T18:02:36.342806", "level": "INFO", "logger": "whysper.app.main", "message": "MCP endpoints available at /mcp/*", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37868, "thread_name": "MainThread", "process": 30440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T18:02:36.344157", "level": "INFO", "logger": "whysper.app.main", "message": "MCP tools: generate_diagram, render_diagram, generate_and_render", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37868, "thread_name": "MainThread", "process": 30440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T18:02:36.345179", "level": "INFO", "logger": "whysper.app.main", "message": "MCP WebSocket endpoint: /mcp/ws", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37868, "thread_name": "MainThread", "process": 30440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T18:02:42.751425", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33812, "thread_name": "AnyIO worker thread", "process": 30440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:02:42.757437", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33812, "thread_name": "AnyIO worker thread", "process": 30440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:02:42.771899", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33812, "thread_name": "AnyIO worker thread", "process": 30440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:02:42.775897", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33812, "thread_name": "AnyIO worker thread", "process": 30440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:02:42.955884", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33812, "thread_name": "AnyIO worker thread", "process": 30440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:02:42.986558", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33812, "thread_name": "AnyIO worker thread", "process": 30440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:02:43.013589", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33812, "thread_name": "AnyIO worker thread", "process": 30440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:02:43.043617", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33812, "thread_name": "AnyIO worker thread", "process": 30440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:02:43.138411", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33812, "thread_name": "AnyIO worker thread", "process": 30440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:02:43.141418", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33812, "thread_name": "AnyIO worker thread", "process": 30440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:02:43.157420", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33812, "thread_name": "AnyIO worker thread", "process": 30440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:02:43.166127", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33812, "thread_name": "AnyIO worker thread", "process": 30440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:03:09.864463", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37868, "thread_name": "MainThread", "process": 30440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-18"}}
{"timestamp": "2025-10-19T18:03:20.827110", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33812, "thread_name": "AnyIO worker thread", "process": 30440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:03:20.840404", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'hello', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33812, "thread_name": "AnyIO worker thread", "process": 30440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:03:20.847306", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: hello", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33812, "thread_name": "AnyIO worker thread", "process": 30440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:03:20.848745", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33812, "thread_name": "AnyIO worker thread", "process": 30440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:03:20.851108", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33812, "thread_name": "AnyIO worker thread", "process": 30440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:03:20.853637", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33812, "thread_name": "AnyIO worker thread", "process": 30440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:03:20.861065", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Creating new conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33812, "thread_name": "AnyIO worker thread", "process": 30440, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:07:27.390563", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 7392, "thread_name": "MainThread", "process": 33900, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:07:27.688179", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 7392, "thread_name": "MainThread", "process": 33900, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:07:27.689180", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 7392, "thread_name": "MainThread", "process": 33900, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-19T18:07:27.702281", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 7392, "thread_name": "MainThread", "process": 33900, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-19T18:07:27.702281", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 7392, "thread_name": "MainThread", "process": 33900, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:07:27.703179", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 7392, "thread_name": "MainThread", "process": 33900, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:07:32.624979", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 7392, "thread_name": "MainThread", "process": 33900, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:07:38.653419", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:07:38.898428", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:07:38.899430", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-19T18:07:38.910430", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-19T18:07:38.911431", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:07:38.912449", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:07:42.752164", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:07:43.097398", "level": "INFO", "logger": "whysper.app.main", "message": "Starting Whysper Web2 Backend v2.0.0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T18:07:43.098307", "level": "INFO", "logger": "whysper.app.main", "message": "Server running on 0.0.0.0:8003", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T18:07:43.099305", "level": "INFO", "logger": "whysper.app.main", "message": "Debug mode: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T18:07:43.100309", "level": "INFO", "logger": "whysper.app.main", "message": "CORS origins: ['http://localhost:3000', 'http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:5176', 'http://localhost:5177', 'http://localhost:5178', 'http://127.0.0.1:3000', 'http://127.0.0.1:5173', 'http://127.0.0.1:5174', 'http://127.0.0.1:5175', 'http://127.0.0.1:5176', 'http://127.0.0.1:5177']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T18:07:43.102316", "level": "INFO", "logger": "whysper.app.main", "message": "Real-time log broadcasting enabled - connect to GET /api/v1/logs/stream", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T18:07:43.103307", "level": "INFO", "logger": "whysper.app.main", "message": "FastMCP server integration initialized", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T18:07:43.104308", "level": "INFO", "logger": "whysper.app.main", "message": "MCP endpoints available at /mcp/*", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T18:07:43.105307", "level": "INFO", "logger": "whysper.app.main", "message": "MCP tools: generate_diagram, render_diagram, generate_and_render", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T18:07:43.107310", "level": "INFO", "logger": "whysper.app.main", "message": "MCP WebSocket endpoint: /mcp/ws", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T18:27:01.779598", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:01.782910", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:01.795102", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-14"}}
{"timestamp": "2025-10-19T18:27:01.801123", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:01.805273", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:01.989236", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:02.041476", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 34768, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:02.046485", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:02.081089", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 34768, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:03.308596", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:03.309589", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 34768, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:03.313901", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:03.315454", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 34768, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:22.925111", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:22.926125", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'hello', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:22.927460", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: hello", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:22.928492", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:22.932621", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:22.934966", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:22.943347", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Creating new conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:22.945343", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Creating conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:22.949350", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-19T18:27:22.985493", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-19T18:27:22.987491", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:22.988491", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initializing conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:22.990489", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Set default model: qwen/qwen3-coder-30b-a3b-instruct", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:22.991490", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initialized session logger for: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:22.992488", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Created new conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:22.994490", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Conversation session conv-1 initialized successfully", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:22.995491", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Setting API key for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:22.996490", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "API key updated for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:23.002982", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Session created", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:23.003983", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:23.005986", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:23.006983", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:23.010154", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:23.012172", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:23.014615", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:23.020187", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:23.022192", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is first message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:23.025301", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "First question has no file context in session conv-1 - proceeding without code context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:23.026302", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:23.027309", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:23.027309", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:23.028695", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:23.031361", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=True)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:23.033379", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:23.034379", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:23.035390", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: True, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:23.037289", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:23.039292", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:23.040289", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "⚠️ First message but NO SELECTED FILES", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:23.041292", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:23.042675", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:24.297704", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1760916446-1HDZ9lyAOXVdkTnfFqd0\",\n  \"provider\": \"DeepInfra\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1760916446,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"Hello! I'm ready to help you with your code analysis. I notice you've shared a codebase, but I don't see any code in your message. Could you please share the code you'd like me to analyze? Once you provide the code, I'll be happy to help with:\\n\\n- Code review and suggestions\\n- Bug identification\\n- Performance improvements\\n- Best practices recommendations\\n- Explanation of specific parts\\n- Testing strategies\\n\\nPlease paste the code you'd like me to examine, and I'll give you detailed feedback!\",\n        \"refusal\": null,\n        \"reasoning\": null\n      }\n    }\n  ],\n  \"usage\": {\n    \"prompt_tokens\": 35,\n    \"c", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:24.298703", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 494 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:24.299706", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: Hello! I'm ready to help you with your code analysis. I notice you've shared a codebase, but I don't see any code in your message. Could you please share the code you'd like me to analyze? Once you pr", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:24.300704", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 494 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:24.303412", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No D2 diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:24.303412", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 494 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:24.304826", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] No agent prompt provided for question: hello...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:24.305845", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 1.277s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:24.305845", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:24.306846", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:24.407886", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 1.28s using 143 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:24.409353", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:24.411019", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "Created new GUID 493f30f3-d173-400d-b800-32ae4b89f4a9 for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:24.413774", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "No history file found for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:24.422333", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251019-182724_493f30f3-d173-400d-b800-32ae4b89f4a9.json (2 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:24.423332", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (2 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:24.425331", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:24.452049", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:46.307901", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:46.308901", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'make a d2 diagram of iphone app', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:46.309904", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: make a d2 diagram of iphone app", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:46.311931", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:46.312944", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:46.314769", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:46.318800", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Retrieved existing session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:46.319799", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:46.320800", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:46.321800", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:46.322811", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:46.323802", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:46.325182", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:46.327513", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:46.328535", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is follow-up message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:46.330533", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:46.330533", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:46.333060", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:46.334059", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:46.337060", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=False)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:46.339523", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Detected D2 diagram request, loading d2-architecture.md prompt", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:46.341538", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Auto-detected diagram request, using agent prompt: ---\ntitle: \"D2 Diagram Generation Expert (Reinforc...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:46.345294", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:46.348309", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:46.349307", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: False, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:46.352305", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:46.354307", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:46.355641", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:46.357756", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:53.485138", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1760916469-IBZYK9hyJJeJRJJjbfA2\",\n  \"provider\": \"Novita\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1760916469,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"Here's a D2 diagram representing an iPhone app architecture using the D2 language syntax:\\n\\n```d2\\n// iPhone App Architecture Diagram\\n\\n// Main app container\\n\\\"iPhone App\\\" {\\n  // App components\\n  \\\"UI Layer\\\" {\\n    \\\"Main View Controller\\\"\\n    \\\"Navigation Controller\\\"\\n    \\\"Tab Bar Controller\\\"\\n    \\\"Table View Controller\\\"\\n    \\\"Collection View Controller\\\"\\n  }\\n  \\n  \\\"Business Logic\\\" {\\n    \\\"Data Manager\\\"\\n    \\\"Service Layer\\\"\\n    \\\"Business Rules\\\"\\n  }\\n  \\n  \\\"Data Layer\\\" {\\n    \\\"Core Data\\\"\\n    \\\"Realm\\\"\\n    \\\"UserDefaults\\\"\\n  }\\n  \\n  // Connections\\n  \\\"Main View Controller\\\" -> \\\"Nav", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:53.487149", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 2665 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:53.487149", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: Here's a D2 diagram representing an iPhone app architecture using the D2 language syntax:\n\n```d2\n// iPhone App Architecture Diagram\n\n// Main app container\n\"iPhone App\" {\n  // App components\n  \"UI Laye", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:53.488153", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 2665 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:53.488153", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 [D2 PROGRESS] Found 1 D2 diagram(s) - validating syntax...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:53.613018", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Validation attempt 1/8", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:53.890604", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "D2 diagram #1 validation failed: debug: using theme Neutral Default (ID: 0)\nerr: failed to compile ..\\..\\..\\Users\\Hack\\AppData\\Local\\Temp\\tmpc7cymrlc.d2: C:\\Users\\Hack\\AppData\\Local\\Temp\\tmpc7cymrlc.d2:65:3: \"style\" expected to be se", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:53.895012", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔧 [D2 PROGRESS] Validation errors found - requesting AI auto-fix (attempt 1/8)...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:55.975518", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1760916477-cmWE1B3rdCoXAvujxI1i\",\n  \"provider\": \"Novita\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1760916477,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```d2\\n// Your D2 diagram code with syntax fixes applied\\n// Make sure all style properties are properly formatted as key-value pairs\\n\\n// Example structure with corrected syntax:\\n// Database nodes\\ndb1: {\\n  shape: cylinder\\n  style: {\\n    fill: \\\"#f0f0f0\\\"\\n    stroke: \\\"#333\\\"\\n  }\\n}\\n\\n// Web/App nodes\\nweb1: {\\n  shape: rectangle\\n  style: {\\n    fill: \\\"#e0e0e0\\\"\\n    stroke: \\\"#333\\\"\\n  }\\n}\\n\\n// User nodes\\nuser1: {\\n  shape: person\\n  style: {\\n    fill: \\\"#d0d0d0\\\"\\n    stroke: \\\"#333\\\"\\n  }\\n}\\n\\n// Cloud nodes\\ncloud1: {\\n  shape: cloud\\n  style: {\\n    fill: \\\"#f8f8f8\\\"\\n    stroke: \\\"#333\\\"\\n  }\\n", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:55.976541", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 727 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:55.977563", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```d2\n// Your D2 diagram code with syntax fixes applied\n// Make sure all style properties are properly formatted as key-value pairs\n\n// Example structure with corrected syntax:\n// Database nodes\ndb1: ", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:55.978559", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [D2 PROGRESS] Received corrected D2 code (727 chars) - re-validating...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:55.979559", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Validation attempt 2/8", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:56.157491", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "D2 diagram #1 validation failed: debug: using theme Neutral Default (ID: 0)\nerr: failed to compile ..\\..\\..\\Users\\Hack\\AppData\\Local\\Temp\\tmplhyc2klu.d2: C:\\Users\\Hack\\AppData\\Local\\Temp\\tmplhyc2klu.d2:4:43: missing value after colon", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:56.158484", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔧 [D2 PROGRESS] Validation errors found - requesting AI auto-fix (attempt 2/8)...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:58.271778", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1760916479-iuLSTP2QmvTPLV6VYGZB\",\n  \"provider\": \"Novita\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1760916479,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```d2\\n// Database\\ndb: {\\n  shape: cylinder\\n  \\\"Database Name\\\"\\n}\\n\\n// Web/App\\nweb: {\\n  shape: rectangle\\n  \\\"Web Application\\\"\\n}\\n\\n// User\\nuser: {\\n  shape: person\\n  \\\"User Name\\\"\\n}\\n\\n// Cloud\\ncloud: {\\n  shape: cloud\\n  \\\"Cloud Service\\\"\\n}\\n```\",\n        \"refusal\": null,\n        \"reasoning\": null\n      }\n    }\n  ],\n  \"system_fingerprint\": \"\",\n  \"usage\": {\n    \"prompt_tokens\": 269,\n    \"completion_tokens\": 75,\n    \"total_tokens\": 344,\n    \"prompt_tokens_details\": null,\n    \"completion_tokens_details\": null\n  }\n}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:58.276158", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 228 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:58.277695", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```d2\n// Database\ndb: {\n  shape: cylinder\n  \"Database Name\"\n}\n\n// Web/App\nweb: {\n  shape: rectangle\n  \"Web Application\"\n}\n\n// User\nuser: {\n  shape: person\n  \"User Name\"\n}\n\n// Cloud\ncloud: {\n  shape: c", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:58.282065", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [D2 PROGRESS] Received corrected D2 code (228 chars) - re-validating...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:58.283087", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Validation attempt 3/8", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:58.823389", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [D2 PROGRESS] All D2 diagrams validated successfully!", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:58.824399", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [D2 PROGRESS] Rendering diagrams to SVG...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:58.825392", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Pre-rendering D2 diagram #1 (219 chars)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:59.285944", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Saved D2 diagram to: backend\\static\\d2_diagrams\\d2_diagram_20251019_182759_852dee4e.svg", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:59.287946", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "D2 diagrams pre-rendered successfully", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:59.288947", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [D2 PROGRESS] D2 diagrams rendered and ready for display!", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:59.289956", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 21867 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:59.290947", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Using agent prompt for question: make a d2 diagram of iphone app...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:59.290947", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt length: 5602 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:59.293575", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt preview: ---\ntitle: \"D2 Diagram Generation Expert (Reinforced)\"\ndescription: \"Generate D2 Diagrams\"\ncategory: [\"Code Review\", \"Software Development\", \"Quality Assurance\"]\nauthor: \"Eric M\"\ncreated: \"2025-09-27\"...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:59.294586", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Question contains diagram keywords", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:59.295605", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response preview: <div class=\"d2-diagram-container\" style=\"margin: 16px 0;\">\n<div style=\"display: inline-flex; align-items: center; gap: 6px; padding: 6px 12px; background: linear-gradient(135deg, #10b981 0%, #059669 100%); border-radius: 6px; margin-bottom: 12px; font-size: 12px; font-weight: 500; color: white;\">\n  <span style=\"font-size: 14px;\">✅</span>\n  <span>D2 Diagram Rendered Successfully</span>\n</div>\n  <div class=\"d2-rendered-diagram\">\n    <?xml version=\"1.0\" encoding=\"utf-8\"?><svg xmlns=\"http://www.w3.o...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:59.297606", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response does NOT contain Mermaid code block", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:59.300794", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 12.967s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:59.301793", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:59.302794", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:59.316180", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 12.97s using 344 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:59.317175", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:59.345403", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Loaded conversation history: C:\\Code2025\\Whysper\\history\\20251019-182724_493f30f3-d173-400d-b800-32ae4b89f4a9.json", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:59.350631", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251019-182724_493f30f3-d173-400d-b800-32ae4b89f4a9.json (4 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:59.353051", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (4 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:59.353051", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:27:59.377386", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 38704, "thread_name": "AnyIO worker thread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T18:29:45.501935", "level": "INFO", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Generating all documentation for 10 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41"}}
{"timestamp": "2025-10-19T18:29:45.512051", "level": "INFO", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "AI processor initialized for documentation generation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41"}}
{"timestamp": "2025-10-19T18:29:45.536392", "level": "INFO", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Analyzing code structure for 10 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41"}}
{"timestamp": "2025-10-19T18:29:45.537656", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Getting file content", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "file": "__init__.py", "force_reload": false}}
{"timestamp": "2025-10-19T18:29:45.538677", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Cache miss, reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "file": "backend/common/__init__.py"}}
{"timestamp": "2025-10-19T18:29:45.541213", "level": "ERROR", "logger": "whysper.common.lazy_file_scanner", "message": "Error reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "file": "backend/common/__init__.py", "error": "[Errno 2] No such file or directory: 'backend/common/__init__.py'"}}
{"timestamp": "2025-10-19T18:29:45.544214", "level": "INFO", "logger": "whysper", "message": "Performance: common.lazy_file_scanner.get_file_content_lazy completed in 0.007s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "performance": true, "duration_ms": 6.56, "operation": "common.lazy_file_scanner.get_file_content_lazy"}}
{"timestamp": "2025-10-19T18:29:45.547491", "level": "ERROR", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Syntax error in Python file backend/common/__init__.py: invalid syntax (<unknown>, line 1)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41"}}
{"timestamp": "2025-10-19T18:29:45.556329", "level": "DEBUG", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Analyzed backend/common/__init__.py (python)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41"}}
{"timestamp": "2025-10-19T18:29:45.558346", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Getting file content", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "file": "ai.py", "force_reload": false}}
{"timestamp": "2025-10-19T18:29:45.561346", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Cache miss, reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "file": "backend/common/ai.py"}}
{"timestamp": "2025-10-19T18:29:45.562727", "level": "ERROR", "logger": "whysper.common.lazy_file_scanner", "message": "Error reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "file": "backend/common/ai.py", "error": "[Errno 2] No such file or directory: 'backend/common/ai.py'"}}
{"timestamp": "2025-10-19T18:29:45.568748", "level": "INFO", "logger": "whysper", "message": "Performance: common.lazy_file_scanner.get_file_content_lazy completed in 0.010s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "performance": true, "duration_ms": 10.4, "operation": "common.lazy_file_scanner.get_file_content_lazy"}}
{"timestamp": "2025-10-19T18:29:45.573804", "level": "ERROR", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Syntax error in Python file backend/common/ai.py: invalid syntax (<unknown>, line 1)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41"}}
{"timestamp": "2025-10-19T18:29:45.575802", "level": "DEBUG", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Analyzed backend/common/ai.py (python)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41"}}
{"timestamp": "2025-10-19T18:29:45.576801", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Getting file content", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "file": "base_ai.py", "force_reload": false}}
{"timestamp": "2025-10-19T18:29:45.577803", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Cache miss, reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "file": "backend/common/base_ai.py"}}
{"timestamp": "2025-10-19T18:29:45.578801", "level": "ERROR", "logger": "whysper.common.lazy_file_scanner", "message": "Error reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "file": "backend/common/base_ai.py", "error": "[Errno 2] No such file or directory: 'backend/common/base_ai.py'"}}
{"timestamp": "2025-10-19T18:29:45.582627", "level": "INFO", "logger": "whysper", "message": "Performance: common.lazy_file_scanner.get_file_content_lazy completed in 0.004s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "performance": true, "duration_ms": 4.48, "operation": "common.lazy_file_scanner.get_file_content_lazy"}}
{"timestamp": "2025-10-19T18:29:45.585249", "level": "ERROR", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Syntax error in Python file backend/common/base_ai.py: invalid syntax (<unknown>, line 1)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41"}}
{"timestamp": "2025-10-19T18:29:45.588838", "level": "DEBUG", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Analyzed backend/common/base_ai.py (python)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41"}}
{"timestamp": "2025-10-19T18:29:45.590373", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Getting file content", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "file": "env_manager.py", "force_reload": false}}
{"timestamp": "2025-10-19T18:29:45.592602", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Cache miss, reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "file": "backend/common/env_manager.py"}}
{"timestamp": "2025-10-19T18:29:45.593618", "level": "ERROR", "logger": "whysper.common.lazy_file_scanner", "message": "Error reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "file": "backend/common/env_manager.py", "error": "[Errno 2] No such file or directory: 'backend/common/env_manager.py'"}}
{"timestamp": "2025-10-19T18:29:45.595615", "level": "INFO", "logger": "whysper", "message": "Performance: common.lazy_file_scanner.get_file_content_lazy completed in 0.005s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "performance": true, "duration_ms": 5.24, "operation": "common.lazy_file_scanner.get_file_content_lazy"}}
{"timestamp": "2025-10-19T18:29:45.601757", "level": "ERROR", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Syntax error in Python file backend/common/env_manager.py: invalid syntax (<unknown>, line 1)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41"}}
{"timestamp": "2025-10-19T18:29:45.602781", "level": "DEBUG", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Analyzed backend/common/env_manager.py (python)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41"}}
{"timestamp": "2025-10-19T18:29:45.603777", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Getting file content", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "file": "file_filters.py", "force_reload": false}}
{"timestamp": "2025-10-19T18:29:45.605042", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Cache miss, reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "file": "backend/common/file_filters.py"}}
{"timestamp": "2025-10-19T18:29:45.607056", "level": "ERROR", "logger": "whysper.common.lazy_file_scanner", "message": "Error reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "file": "backend/common/file_filters.py", "error": "[Errno 2] No such file or directory: 'backend/common/file_filters.py'"}}
{"timestamp": "2025-10-19T18:29:45.608055", "level": "INFO", "logger": "whysper", "message": "Performance: common.lazy_file_scanner.get_file_content_lazy completed in 0.004s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "performance": true, "duration_ms": 4.28, "operation": "common.lazy_file_scanner.get_file_content_lazy"}}
{"timestamp": "2025-10-19T18:29:45.610057", "level": "ERROR", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Syntax error in Python file backend/common/file_filters.py: invalid syntax (<unknown>, line 1)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41"}}
{"timestamp": "2025-10-19T18:29:45.611058", "level": "DEBUG", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Analyzed backend/common/file_filters.py (python)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41"}}
{"timestamp": "2025-10-19T18:29:45.612054", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Getting file content", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "file": "lazy_file_scanner.py", "force_reload": false}}
{"timestamp": "2025-10-19T18:29:45.613246", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Cache miss, reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "file": "backend/common/lazy_file_scanner.py"}}
{"timestamp": "2025-10-19T18:29:45.614645", "level": "ERROR", "logger": "whysper.common.lazy_file_scanner", "message": "Error reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "file": "backend/common/lazy_file_scanner.py", "error": "[Errno 2] No such file or directory: 'backend/common/lazy_file_scanner.py'"}}
{"timestamp": "2025-10-19T18:29:45.618663", "level": "INFO", "logger": "whysper", "message": "Performance: common.lazy_file_scanner.get_file_content_lazy completed in 0.007s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "performance": true, "duration_ms": 6.61, "operation": "common.lazy_file_scanner.get_file_content_lazy"}}
{"timestamp": "2025-10-19T18:29:45.621666", "level": "ERROR", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Syntax error in Python file backend/common/lazy_file_scanner.py: invalid syntax (<unknown>, line 1)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41"}}
{"timestamp": "2025-10-19T18:29:45.622717", "level": "DEBUG", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Analyzed backend/common/lazy_file_scanner.py (python)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41"}}
{"timestamp": "2025-10-19T18:29:45.624734", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Getting file content", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "file": "log_broadcaster.py", "force_reload": false}}
{"timestamp": "2025-10-19T18:29:45.624734", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Cache miss, reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "file": "backend/common/log_broadcaster.py"}}
{"timestamp": "2025-10-19T18:29:45.626744", "level": "ERROR", "logger": "whysper.common.lazy_file_scanner", "message": "Error reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "file": "backend/common/log_broadcaster.py", "error": "[Errno 2] No such file or directory: 'backend/common/log_broadcaster.py'"}}
{"timestamp": "2025-10-19T18:29:45.627782", "level": "INFO", "logger": "whysper", "message": "Performance: common.lazy_file_scanner.get_file_content_lazy completed in 0.003s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "performance": true, "duration_ms": 3.05, "operation": "common.lazy_file_scanner.get_file_content_lazy"}}
{"timestamp": "2025-10-19T18:29:45.629801", "level": "ERROR", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Syntax error in Python file backend/common/log_broadcaster.py: invalid syntax (<unknown>, line 1)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41"}}
{"timestamp": "2025-10-19T18:29:45.632795", "level": "DEBUG", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Analyzed backend/common/log_broadcaster.py (python)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41"}}
{"timestamp": "2025-10-19T18:29:45.637014", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Getting file content", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "file": "logger.py", "force_reload": false}}
{"timestamp": "2025-10-19T18:29:45.638033", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Cache miss, reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "file": "backend/common/logger.py"}}
{"timestamp": "2025-10-19T18:29:45.639037", "level": "ERROR", "logger": "whysper.common.lazy_file_scanner", "message": "Error reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "file": "backend/common/logger.py", "error": "[Errno 2] No such file or directory: 'backend/common/logger.py'"}}
{"timestamp": "2025-10-19T18:29:45.641565", "level": "INFO", "logger": "whysper", "message": "Performance: common.lazy_file_scanner.get_file_content_lazy completed in 0.005s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "performance": true, "duration_ms": 4.55, "operation": "common.lazy_file_scanner.get_file_content_lazy"}}
{"timestamp": "2025-10-19T18:29:45.643567", "level": "ERROR", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Syntax error in Python file backend/common/logger.py: invalid syntax (<unknown>, line 1)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41"}}
{"timestamp": "2025-10-19T18:29:45.644567", "level": "DEBUG", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Analyzed backend/common/logger.py (python)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41"}}
{"timestamp": "2025-10-19T18:29:45.645564", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Getting file content", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "file": "models.py", "force_reload": false}}
{"timestamp": "2025-10-19T18:29:45.647564", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Cache miss, reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "file": "backend/common/models.py"}}
{"timestamp": "2025-10-19T18:29:45.649568", "level": "ERROR", "logger": "whysper.common.lazy_file_scanner", "message": "Error reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "file": "backend/common/models.py", "error": "[Errno 2] No such file or directory: 'backend/common/models.py'"}}
{"timestamp": "2025-10-19T18:29:45.651788", "level": "INFO", "logger": "whysper", "message": "Performance: common.lazy_file_scanner.get_file_content_lazy completed in 0.006s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "performance": true, "duration_ms": 6.22, "operation": "common.lazy_file_scanner.get_file_content_lazy"}}
{"timestamp": "2025-10-19T18:29:45.654786", "level": "ERROR", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Syntax error in Python file backend/common/models.py: invalid syntax (<unknown>, line 1)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41"}}
{"timestamp": "2025-10-19T18:29:45.656787", "level": "DEBUG", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Analyzed backend/common/models.py (python)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41"}}
{"timestamp": "2025-10-19T18:29:45.657787", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Getting file content", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "file": "system_message_manager.py", "force_reload": false}}
{"timestamp": "2025-10-19T18:29:45.658787", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Cache miss, reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "file": "backend/common/system_message_manager.py"}}
{"timestamp": "2025-10-19T18:29:45.659787", "level": "ERROR", "logger": "whysper.common.lazy_file_scanner", "message": "Error reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "file": "backend/common/system_message_manager.py", "error": "[Errno 2] No such file or directory: 'backend/common/system_message_manager.py'"}}
{"timestamp": "2025-10-19T18:29:45.660791", "level": "INFO", "logger": "whysper", "message": "Performance: common.lazy_file_scanner.get_file_content_lazy completed in 0.003s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41", "performance": true, "duration_ms": 3.0, "operation": "common.lazy_file_scanner.get_file_content_lazy"}}
{"timestamp": "2025-10-19T18:29:45.662787", "level": "ERROR", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Syntax error in Python file backend/common/system_message_manager.py: invalid syntax (<unknown>, line 1)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41"}}
{"timestamp": "2025-10-19T18:29:45.663788", "level": "DEBUG", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Analyzed backend/common/system_message_manager.py (python)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41"}}
{"timestamp": "2025-10-19T18:29:45.665946", "level": "INFO", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Successfully analyzed 10 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41"}}
{"timestamp": "2025-10-19T18:29:45.668948", "level": "ERROR", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Error generating documentation with AI: AIProcessor.process_question() missing 2 required positional arguments: 'max_tokens' and 'temperature'", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41"}}
{"timestamp": "2025-10-19T18:29:45.671200", "level": "INFO", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Documentation generation completed in 0.17s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8796, "thread_name": "MainThread", "process": 38620, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41"}}
{"timestamp": "2025-10-19T20:31:47.415036", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 28912, "thread_name": "MainThread", "process": 28584, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:31:48.360425", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 28912, "thread_name": "MainThread", "process": 28584, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:31:48.361426", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 28912, "thread_name": "MainThread", "process": 28584, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-19T20:31:48.413020", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 28912, "thread_name": "MainThread", "process": 28584, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-19T20:31:48.419019", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 28912, "thread_name": "MainThread", "process": 28584, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:31:48.420019", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 28912, "thread_name": "MainThread", "process": 28584, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:31:56.774216", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 28912, "thread_name": "MainThread", "process": 28584, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:32:05.571473", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:32:05.950634", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:32:05.950634", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-19T20:32:05.965531", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-19T20:32:05.966597", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:32:05.967137", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:32:16.257573", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:32:17.253647", "level": "INFO", "logger": "whysper.app.main", "message": "Starting Whysper Web2 Backend v2.0.0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T20:32:17.255649", "level": "INFO", "logger": "whysper.app.main", "message": "Server running on 0.0.0.0:8003", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T20:32:17.257649", "level": "INFO", "logger": "whysper.app.main", "message": "Debug mode: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T20:32:17.257649", "level": "INFO", "logger": "whysper.app.main", "message": "CORS origins: ['http://localhost:3000', 'http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:5176', 'http://localhost:5177', 'http://localhost:5178', 'http://127.0.0.1:3000', 'http://127.0.0.1:5173', 'http://127.0.0.1:5174', 'http://127.0.0.1:5175', 'http://127.0.0.1:5176', 'http://127.0.0.1:5177']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T20:32:17.259649", "level": "INFO", "logger": "whysper.app.main", "message": "Real-time log broadcasting enabled - connect to GET /api/v1/logs/stream", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T20:32:17.263183", "level": "INFO", "logger": "whysper.app.main", "message": "FastMCP server integration initialized", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T20:32:17.264175", "level": "INFO", "logger": "whysper.app.main", "message": "MCP endpoints available at /mcp/*", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T20:32:17.265175", "level": "INFO", "logger": "whysper.app.main", "message": "MCP tools: generate_diagram, render_diagram, generate_and_render", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T20:32:17.266174", "level": "INFO", "logger": "whysper.app.main", "message": "MCP WebSocket endpoint: /mcp/ws", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T20:33:27.603065", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5148, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:33:27.607382", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5148, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:33:27.695943", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5148, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:33:27.707634", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5148, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:33:27.711875", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:33:28.295288", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:33:28.302288", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:33:28.315792", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:33:28.768188", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:33:28.835718", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:33:28.850005", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:33:28.853027", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:33:37.121431", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-20"}}
{"timestamp": "2025-10-19T20:33:46.913326", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_agent_prompt endpoint called for file: d2-architecture.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:33:46.917277", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Successfully retrieved agent prompt 'd2-architecture.md' with 5602 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.585037", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.587038", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'make a d2 diagram of a iphone app', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.670605", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: make a d2 diagram of a iphone app", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.676605", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.689302", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.707335", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.742439", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Creating new conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.750459", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Creating conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.752457", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-19T20:34:05.787488", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-19T20:34:05.791431", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.792456", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initializing conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.794663", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Set default model: qwen/qwen3-coder-30b-a3b-instruct", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.799680", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initialized session logger for: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.802731", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Created new conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.803724", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Conversation session conv-1 initialized successfully", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.805963", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Setting API key for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.807981", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "API key updated for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.809979", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Session created", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.812979", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.814147", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Provider update skipped - same or empty provider: 'openrouter'", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.815168", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating model to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.816168", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Model updated", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.817471", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Model changed to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.818888", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.820021", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Using agent prompt: You are a helpful AI assistant specialized in code analysis and development....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.821084", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.822083", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.823498", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.825515", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.826521", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.828514", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is first message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.830538", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "First question has no file context in session conv-1 - proceeding without code context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.832658", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.833677", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.834677", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.835678", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.836692", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=True)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.837694", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.838689", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.839689", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: True, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.839689", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.840690", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.841700", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "⚠️ First message but NO SELECTED FILES", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.842687", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:05.843689", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:14.401661", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1760924046-GuVRHwLuec77Ixwmd8Vu\",\n  \"provider\": \"Novita\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1760924046,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"Here's a D2 diagram representing an iPhone app architecture with key components and their relationships:\\n\\n```d2\\n// iPhone App Architecture Diagram\\n\\n// App Structure\\n\\\"iPhone App\\\" -> \\\"UI Layer\\\" {\\n  \\\"Main Screen\\\" -> \\\"Navigation Controller\\\"\\n  \\\"Main Screen\\\" -> \\\"Tab Bar Controller\\\"\\n  \\\"Main Screen\\\" -> \\\"View Controllers\\\"\\n  \\\"View Controllers\\\" -> \\\"Table View Controller\\\"\\n  \\\"View Controllers\\\" -> \\\"Collection View Controller\\\"\\n  \\\"View Controllers\\\" -> \\\"Custom View Controller\\\"\\n}\\n\\n\\\"UI Layer\\\" -> \\\"Business Logic Layer\\\" {\\n  \\\"View Controllers\\\" -> \\\"Data Manager\\\"\\n  \\\"View Controllers\\\" -", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:14.404663", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 3195 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:14.408662", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: Here's a D2 diagram representing an iPhone app architecture with key components and their relationships:\n\n```d2\n// iPhone App Architecture Diagram\n\n// App Structure\n\"iPhone App\" -> \"UI Layer\" {\n  \"Mai", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:14.410780", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 3195 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:14.419675", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 [D2 PROGRESS] Found 1 D2 diagram(s) - validating syntax...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:15.111058", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Validation attempt 1/8", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:15.306730", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "D2 diagram #1 validation failed: debug: using theme Neutral Default (ID: 0)\nerr: failed to compile ..\\..\\..\\Users\\Hack\\AppData\\Local\\Temp\\tmpjllk9c9e.d2: C:\\Users\\Hack\\AppData\\Local\\Temp\\tmpjllk9c9e.d2:5:3: cannot create edge inside ", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:15.307730", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔧 [D2 PROGRESS] Validation errors found - requesting AI auto-fix (attempt 1/8)...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:17.334404", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1760924055-Py5TQrc14RcENWps4eTQ\",\n  \"provider\": \"SiliconFlow\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1760924055,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```d2\\n// Define shapes according to rules\\nDatabase1: {\\n  shape: cylinder\\n}\\n\\nDatabase2: {\\n  shape: cylinder\\n}\\n\\nWebApp1: {\\n  shape: rectangle\\n}\\n\\nWebApp2: {\\n  shape: rectangle\\n}\\n\\nUser1: {\\n  shape: person\\n}\\n\\nUser2: {\\n  shape: person\\n}\\n\\nCloud1: {\\n  shape: cloud\\n}\\n\\n// Define connections between elements\\nUser1 -> WebApp1\\nWebApp1 -> Database1\\nDatabase1 -> WebApp1\\nWebApp1 -> Database2\\nDatabase2 -> WebApp1\\nUser2 -> WebApp2\\nWebApp2 -> Database1\\nDatabase1 -> WebApp2\\nWebApp2 -> Cloud1\\nCloud1 -> WebApp2\\n```\",\n        \"refusal\": null,\n        \"reasoning\": null\n      }\n    }\n  ],\n  \"sys", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:17.335404", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 498 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:17.336406", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```d2\n// Define shapes according to rules\nDatabase1: {\n  shape: cylinder\n}\n\nDatabase2: {\n  shape: cylinder\n}\n\nWebApp1: {\n  shape: rectangle\n}\n\nWebApp2: {\n  shape: rectangle\n}\n\nUser1: {\n  shape: person", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:17.337405", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [D2 PROGRESS] Received corrected D2 code (498 chars) - re-validating...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:17.337405", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Validation attempt 2/8", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:17.689095", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [D2 PROGRESS] All D2 diagrams validated successfully!", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:17.690103", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [D2 PROGRESS] Rendering diagrams to SVG...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:17.692107", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Pre-rendering D2 diagram #1 (489 chars)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:18.109993", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Saved D2 diagram to: backend\\static\\d2_diagrams\\d2_diagram_20251019_203418_5fbaf17f.svg", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:18.110990", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "D2 diagrams pre-rendered successfully", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:18.110990", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [D2 PROGRESS] D2 diagrams rendered and ready for display!", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:18.112407", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 20591 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:18.113709", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Using agent prompt for question: make a d2 diagram of a iphone app...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:18.115116", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt length: 76 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:18.116137", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt preview: You are a helpful AI assistant specialized in code analysis and development....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:18.117135", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Question contains diagram keywords", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:18.118138", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response preview: <div class=\"d2-diagram-container\" style=\"margin: 16px 0;\">\n<div style=\"display: inline-flex; align-items: center; gap: 6px; padding: 6px 12px; background: linear-gradient(135deg, #10b981 0%, #059669 100%); border-radius: 6px; margin-bottom: 12px; font-size: 12px; font-weight: 500; color: white;\">\n  <span style=\"font-size: 14px;\">✅</span>\n  <span>D2 Diagram Rendered Successfully</span>\n</div>\n  <div class=\"d2-rendered-diagram\">\n    <?xml version=\"1.0\" encoding=\"utf-8\"?><svg xmlns=\"http://www.w3.o...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:18.119140", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response does NOT contain Mermaid code block", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:18.120133", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 12.284s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:18.121136", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:18.123133", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:18.190028", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 12.28s using 966 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:18.191042", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:18.192043", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "Created new GUID 7a5ab300-c10d-408d-889b-9d3e7bf516f9 for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:18.194041", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "No history file found for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:18.201740", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251019-203418_7a5ab300-c10d-408d-889b-9d3e7bf516f9.json (2 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:18.204149", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (2 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:18.205180", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:18.250050", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39896, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:34:41.235066", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-36"}}
{"timestamp": "2025-10-19T20:34:41.240801", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-37"}}
{"timestamp": "2025-10-19T20:35:00.163740", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-43"}}
{"timestamp": "2025-10-19T20:35:00.171905", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-45"}}
{"timestamp": "2025-10-19T20:36:04.850635", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-50"}}
{"timestamp": "2025-10-19T20:36:04.855369", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-51"}}
{"timestamp": "2025-10-19T20:36:17.649740", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-59"}}
{"timestamp": "2025-10-19T20:36:17.653931", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-60"}}
{"timestamp": "2025-10-19T20:36:21.780285", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-65"}}
{"timestamp": "2025-10-19T20:36:21.786588", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-66"}}
{"timestamp": "2025-10-19T20:36:32.134658", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-68"}}
{"timestamp": "2025-10-19T20:36:32.138657", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-69"}}
{"timestamp": "2025-10-19T20:36:32.183323", "level": "INFO", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Generating all documentation for 10 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70"}}
{"timestamp": "2025-10-19T20:36:32.189643", "level": "INFO", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "AI processor initialized for documentation generation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70"}}
{"timestamp": "2025-10-19T20:36:32.190656", "level": "INFO", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Analyzing code structure for 10 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70"}}
{"timestamp": "2025-10-19T20:36:32.194657", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Getting file content", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "file": "__init__.py", "force_reload": false}}
{"timestamp": "2025-10-19T20:36:32.200942", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Cache miss, reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "file": "backend/common/__init__.py"}}
{"timestamp": "2025-10-19T20:36:32.203246", "level": "ERROR", "logger": "whysper.common.lazy_file_scanner", "message": "Error reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "file": "backend/common/__init__.py", "error": "[Errno 2] No such file or directory: 'backend/common/__init__.py'"}}
{"timestamp": "2025-10-19T20:36:32.218701", "level": "INFO", "logger": "whysper", "message": "Performance: common.lazy_file_scanner.get_file_content_lazy (failed) completed in 0.024s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "error": "Error reading file __init__.py: [Errno 2] No such file or directory: 'backend/common/__init__.py'", "performance": true, "duration_ms": 24.05, "operation": "common.lazy_file_scanner.get_file_content_lazy (failed)"}}
{"timestamp": "2025-10-19T20:36:32.228163", "level": "ERROR", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Error analyzing file backend/common/__init__.py: Error reading file __init__.py: [Errno 2] No such file or directory: 'backend/common/__init__.py'", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70"}}
{"timestamp": "2025-10-19T20:36:32.231129", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Getting file content", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "file": "ai.py", "force_reload": false}}
{"timestamp": "2025-10-19T20:36:32.243624", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Cache miss, reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "file": "backend/common/ai.py"}}
{"timestamp": "2025-10-19T20:36:32.271047", "level": "ERROR", "logger": "whysper.common.lazy_file_scanner", "message": "Error reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "file": "backend/common/ai.py", "error": "[Errno 2] No such file or directory: 'backend/common/ai.py'"}}
{"timestamp": "2025-10-19T20:36:32.274069", "level": "INFO", "logger": "whysper", "message": "Performance: common.lazy_file_scanner.get_file_content_lazy (failed) completed in 0.043s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "error": "Error reading file ai.py: [Errno 2] No such file or directory: 'backend/common/ai.py'", "performance": true, "duration_ms": 42.94, "operation": "common.lazy_file_scanner.get_file_content_lazy (failed)"}}
{"timestamp": "2025-10-19T20:36:32.276069", "level": "ERROR", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Error analyzing file backend/common/ai.py: Error reading file ai.py: [Errno 2] No such file or directory: 'backend/common/ai.py'", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70"}}
{"timestamp": "2025-10-19T20:36:32.280840", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Getting file content", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "file": "base_ai.py", "force_reload": false}}
{"timestamp": "2025-10-19T20:36:32.301860", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Cache miss, reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "file": "backend/common/base_ai.py"}}
{"timestamp": "2025-10-19T20:36:32.308599", "level": "ERROR", "logger": "whysper.common.lazy_file_scanner", "message": "Error reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "file": "backend/common/base_ai.py", "error": "[Errno 2] No such file or directory: 'backend/common/base_ai.py'"}}
{"timestamp": "2025-10-19T20:36:32.312598", "level": "INFO", "logger": "whysper", "message": "Performance: common.lazy_file_scanner.get_file_content_lazy (failed) completed in 0.032s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "error": "Error reading file base_ai.py: [Errno 2] No such file or directory: 'backend/common/base_ai.py'", "performance": true, "duration_ms": 31.76, "operation": "common.lazy_file_scanner.get_file_content_lazy (failed)"}}
{"timestamp": "2025-10-19T20:36:32.316129", "level": "ERROR", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Error analyzing file backend/common/base_ai.py: Error reading file base_ai.py: [Errno 2] No such file or directory: 'backend/common/base_ai.py'", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70"}}
{"timestamp": "2025-10-19T20:36:32.320958", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Getting file content", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "file": "env_manager.py", "force_reload": false}}
{"timestamp": "2025-10-19T20:36:32.322676", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Cache miss, reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "file": "backend/common/env_manager.py"}}
{"timestamp": "2025-10-19T20:36:32.324703", "level": "ERROR", "logger": "whysper.common.lazy_file_scanner", "message": "Error reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "file": "backend/common/env_manager.py", "error": "[Errno 2] No such file or directory: 'backend/common/env_manager.py'"}}
{"timestamp": "2025-10-19T20:36:32.328466", "level": "INFO", "logger": "whysper", "message": "Performance: common.lazy_file_scanner.get_file_content_lazy (failed) completed in 0.008s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "error": "Error reading file env_manager.py: [Errno 2] No such file or directory: 'backend/common/env_manager.py'", "performance": true, "duration_ms": 8.03, "operation": "common.lazy_file_scanner.get_file_content_lazy (failed)"}}
{"timestamp": "2025-10-19T20:36:32.331468", "level": "ERROR", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Error analyzing file backend/common/env_manager.py: Error reading file env_manager.py: [Errno 2] No such file or directory: 'backend/common/env_manager.py'", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70"}}
{"timestamp": "2025-10-19T20:36:32.334828", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Getting file content", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "file": "file_filters.py", "force_reload": false}}
{"timestamp": "2025-10-19T20:36:32.337170", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Cache miss, reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "file": "backend/common/file_filters.py"}}
{"timestamp": "2025-10-19T20:36:32.339270", "level": "ERROR", "logger": "whysper.common.lazy_file_scanner", "message": "Error reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "file": "backend/common/file_filters.py", "error": "[Errno 2] No such file or directory: 'backend/common/file_filters.py'"}}
{"timestamp": "2025-10-19T20:36:32.341389", "level": "INFO", "logger": "whysper", "message": "Performance: common.lazy_file_scanner.get_file_content_lazy (failed) completed in 0.007s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "error": "Error reading file file_filters.py: [Errno 2] No such file or directory: 'backend/common/file_filters.py'", "performance": true, "duration_ms": 6.56, "operation": "common.lazy_file_scanner.get_file_content_lazy (failed)"}}
{"timestamp": "2025-10-19T20:36:32.343398", "level": "ERROR", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Error analyzing file backend/common/file_filters.py: Error reading file file_filters.py: [Errno 2] No such file or directory: 'backend/common/file_filters.py'", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70"}}
{"timestamp": "2025-10-19T20:36:32.346392", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Getting file content", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "file": "lazy_file_scanner.py", "force_reload": false}}
{"timestamp": "2025-10-19T20:36:32.348389", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Cache miss, reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "file": "backend/common/lazy_file_scanner.py"}}
{"timestamp": "2025-10-19T20:36:32.350391", "level": "ERROR", "logger": "whysper.common.lazy_file_scanner", "message": "Error reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "file": "backend/common/lazy_file_scanner.py", "error": "[Errno 2] No such file or directory: 'backend/common/lazy_file_scanner.py'"}}
{"timestamp": "2025-10-19T20:36:32.353622", "level": "INFO", "logger": "whysper", "message": "Performance: common.lazy_file_scanner.get_file_content_lazy (failed) completed in 0.007s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "error": "Error reading file lazy_file_scanner.py: [Errno 2] No such file or directory: 'backend/common/lazy_file_scanner.py'", "performance": true, "duration_ms": 7.23, "operation": "common.lazy_file_scanner.get_file_content_lazy (failed)"}}
{"timestamp": "2025-10-19T20:36:32.355652", "level": "ERROR", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Error analyzing file backend/common/lazy_file_scanner.py: Error reading file lazy_file_scanner.py: [Errno 2] No such file or directory: 'backend/common/lazy_file_scanner.py'", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70"}}
{"timestamp": "2025-10-19T20:36:32.356645", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Getting file content", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "file": "log_broadcaster.py", "force_reload": false}}
{"timestamp": "2025-10-19T20:36:32.359312", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Cache miss, reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "file": "backend/common/log_broadcaster.py"}}
{"timestamp": "2025-10-19T20:36:32.360328", "level": "ERROR", "logger": "whysper.common.lazy_file_scanner", "message": "Error reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "file": "backend/common/log_broadcaster.py", "error": "[Errno 2] No such file or directory: 'backend/common/log_broadcaster.py'"}}
{"timestamp": "2025-10-19T20:36:32.364640", "level": "INFO", "logger": "whysper", "message": "Performance: common.lazy_file_scanner.get_file_content_lazy (failed) completed in 0.008s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "error": "Error reading file log_broadcaster.py: [Errno 2] No such file or directory: 'backend/common/log_broadcaster.py'", "performance": true, "duration_ms": 8.0, "operation": "common.lazy_file_scanner.get_file_content_lazy (failed)"}}
{"timestamp": "2025-10-19T20:36:32.367639", "level": "ERROR", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Error analyzing file backend/common/log_broadcaster.py: Error reading file log_broadcaster.py: [Errno 2] No such file or directory: 'backend/common/log_broadcaster.py'", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70"}}
{"timestamp": "2025-10-19T20:36:32.369522", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Getting file content", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "file": "logger.py", "force_reload": false}}
{"timestamp": "2025-10-19T20:36:32.370544", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Cache miss, reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "file": "backend/common/logger.py"}}
{"timestamp": "2025-10-19T20:36:32.373056", "level": "ERROR", "logger": "whysper.common.lazy_file_scanner", "message": "Error reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "file": "backend/common/logger.py", "error": "[Errno 2] No such file or directory: 'backend/common/logger.py'"}}
{"timestamp": "2025-10-19T20:36:32.375158", "level": "INFO", "logger": "whysper", "message": "Performance: common.lazy_file_scanner.get_file_content_lazy (failed) completed in 0.006s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "error": "Error reading file logger.py: [Errno 2] No such file or directory: 'backend/common/logger.py'", "performance": true, "duration_ms": 5.64, "operation": "common.lazy_file_scanner.get_file_content_lazy (failed)"}}
{"timestamp": "2025-10-19T20:36:32.377163", "level": "ERROR", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Error analyzing file backend/common/logger.py: Error reading file logger.py: [Errno 2] No such file or directory: 'backend/common/logger.py'", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70"}}
{"timestamp": "2025-10-19T20:36:32.379702", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Getting file content", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "file": "models.py", "force_reload": false}}
{"timestamp": "2025-10-19T20:36:32.385008", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Cache miss, reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "file": "backend/common/models.py"}}
{"timestamp": "2025-10-19T20:36:32.390719", "level": "ERROR", "logger": "whysper.common.lazy_file_scanner", "message": "Error reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "file": "backend/common/models.py", "error": "[Errno 2] No such file or directory: 'backend/common/models.py'"}}
{"timestamp": "2025-10-19T20:36:32.394243", "level": "INFO", "logger": "whysper", "message": "Performance: common.lazy_file_scanner.get_file_content_lazy (failed) completed in 0.015s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "error": "Error reading file models.py: [Errno 2] No such file or directory: 'backend/common/models.py'", "performance": true, "duration_ms": 14.54, "operation": "common.lazy_file_scanner.get_file_content_lazy (failed)"}}
{"timestamp": "2025-10-19T20:36:32.397854", "level": "ERROR", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Error analyzing file backend/common/models.py: Error reading file models.py: [Errno 2] No such file or directory: 'backend/common/models.py'", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70"}}
{"timestamp": "2025-10-19T20:36:32.400878", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Getting file content", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "file": "system_message_manager.py", "force_reload": false}}
{"timestamp": "2025-10-19T20:36:32.403873", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Cache miss, reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "file": "backend/common/system_message_manager.py"}}
{"timestamp": "2025-10-19T20:36:32.405306", "level": "ERROR", "logger": "whysper.common.lazy_file_scanner", "message": "Error reading file", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "file": "backend/common/system_message_manager.py", "error": "[Errno 2] No such file or directory: 'backend/common/system_message_manager.py'"}}
{"timestamp": "2025-10-19T20:36:32.408653", "level": "INFO", "logger": "whysper", "message": "Performance: common.lazy_file_scanner.get_file_content_lazy (failed) completed in 0.008s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70", "error": "Error reading file system_message_manager.py: [Errno 2] No such file or directory: 'backend/common/system_message_manager.py'", "performance": true, "duration_ms": 7.78, "operation": "common.lazy_file_scanner.get_file_content_lazy (failed)"}}
{"timestamp": "2025-10-19T20:36:32.413671", "level": "ERROR", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Error analyzing file backend/common/system_message_manager.py: Error reading file system_message_manager.py: [Errno 2] No such file or directory: 'backend/common/system_message_manager.py'", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70"}}
{"timestamp": "2025-10-19T20:36:32.419887", "level": "INFO", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Successfully analyzed 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70"}}
{"timestamp": "2025-10-19T20:36:32.431952", "level": "ERROR", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Error generating documentation with AI: AIProcessor.process_question() missing 2 required positional arguments: 'max_tokens' and 'temperature'", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70"}}
{"timestamp": "2025-10-19T20:36:32.445325", "level": "INFO", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Documentation generation completed in 0.26s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70"}}
{"timestamp": "2025-10-19T20:37:21.245753", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-73"}}
{"timestamp": "2025-10-19T20:37:21.277601", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-74"}}
{"timestamp": "2025-10-19T20:37:42.751299", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-80"}}
{"timestamp": "2025-10-19T20:37:42.758895", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33384, "thread_name": "MainThread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-81"}}
{"timestamp": "2025-10-19T20:37:42.787075", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.789078", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'make a d2 diagram of an android app', 'conversationId': 'conv-1', 'contextFiles': ['backend/common/__init__.py', 'backend/common/ai.py', 'backend/common/base_ai.py', 'backend/common/env_manager.py', 'backend/common/file_filters.py', 'backend/common/lazy_file_scanner.py', 'backend/common/log_broadcaster.py', 'backend/common/logger.py', 'backend/common/models.py', 'backend/common/system_message_manager.py'], 'settings': {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': '---\\ntitle: \"D2 Diagram Generation Expert (Reinforced)\"\\ndescription: \"Generate D2 Diagrams\"\\ncategory: [\"Code Review\", \"Software Development\", \"Quality Assurance\"]\\nauthor: \"Eric M\"\\ncreated: \"2025-09-27\"\\ntags: [\"code quality\", \"review\", \"best practices\", \"performance\", \"security\", \"testing\"]\\nversion: \"1.0\"\\nstatus: \"draft\"\\n---\\n\\n# D2 Diagram Generation Expert\\n\\n## Role & Goal\\nYou are an expert consultant for the D2 diagramming language. Your sole focus is converting the user’s conceptual, structural, or business descriptions into clean, valid, and efficient D2 code that accurately represents the requested architecture, flow, or structure.\\n\\n## Primary Output Rule\\nSingle-Block Code Only: When generating D2, respond with one single code block containing only D2—no prose, no headers, no commentary.\\n\\nThe code block MUST start with  ```d2 and end with ```.\\n\\n**CRITICAL: Use pure D2 syntax only! Do NOT use Mermaid syntax, PlantUML, or any other diagram language.**\\n\\n**WRONG (Mermaid):**\\n```mermaid\\ngraph TD\\n    A[Start] --> B[End]\\n```\\n\\n**CORRECT (D2):**\\n```d2\\ndirection: right\\n\\nstart: \"Start\" {\\n  shape: rectangle\\n}\\nend: \"End\" {\\n  shape: rectangle\\n}\\nstart -> end\\n```\\n\\nExceptions:\\n\\nIf details are ambiguous or missing, ask one concise clarifying question (no code yet).\\n\\nIf the user asks for an explanation, provide it, then on the next turn output code in a single block.\\n\\n## Ambiguity Veto\\nIf the request is unclear or missing crucial structure (e.g., scope, key components, relationships, connector direction/type), ask one targeted question. If the reply still leaves blockers, ask at most one follow-up. Do not guess or assume.\\n\\n## Input Expectations (Guide, don’t block)\\nIf not provided, infer conservatively. Prefer clarity over guessing. Helpful inputs include:\\n\\nScope & Layer: (e.g., logical vs physical; high-level vs detailed)\\n\\nKey Entities/Components and any must-include items\\n\\nRelationships/Flows: direction, multiplicity, protocols (if relevant)\\n\\nContainers/Boundaries: systems, sub-systems, tiers, teams\\n\\nDetail Level: low | medium | high\\n\\nStyle (optional): theme light|dark, direction right|down|left|up\\n\\n## Code Quality & Validity\\nProduce syntactically correct D2; prefer readability and maintainability.\\n\\nSYNTAX CHECK: All D2 code must adhere to the following fundamental rules:\\n\\n**CRITICAL SYNTAX RULES:**\\n\\nObject Definition: Define objects with name: \"Label\" { properties }\\n- CORRECT: `server: \"Web Server\" { shape: rectangle }`\\n- WRONG: `server: { shape: rectangle, label: \"Web Server\" }`\\n\\nLabels: Assign visible text in quotes immediately after the object name (e.g., Server: \"Web Server\").\\n\\nProperties: Use dot notation for styles inside braces\\n- CORRECT: `style.fill: \"#color\"`\\n- WRONG: `style: { fill: \"#color\" }`\\n\\nRelationships: Use arrows (->, <-, <->) between defined object names with optional labels\\n- CORRECT: `frontend -> backend: \"HTTP/JSON\"`\\n\\nContainment: Use curly braces ({}) for object properties only. Use separate objects for containers.\\n\\nUse standard D2 shapes (e.g., rectangle, square, circle, cylinder, person) and proper syntax.\\n\\n## Default Layout\\nd2 \\n\\ndirection: right\\nspacing: 48\\n\\n## Naming & Labels:\\nIDs: Use kebab-case or snake_case (stable, machine-readable).\\n\\nLabels: Use human-readable titles via label: \"...\".\\n\\nContainers: Use clear parent containers for tiers/domains; label containers.\\n\\nEdges: Prefer explicit edges with direction (e.g., A -> B: \"HTTP/JSON\"). If protocol/medium matters, annotate the edge label.\\n\\nComments: Use // comments sparingly for sectioning (allowed within the code block).\\n\\nTheming (optional): Only add color/style if the user asks; otherwise keep neutral.\\n\\n## Process Workflow\\nDirect Generation: If the request is sufficiently specified, generate D2 immediately (single code block).\\n\\nClarify Once: If crucial information is missing, ask one targeted question (no code).\\n\\nRefinement: When modifying existing D2, apply the requested changes precisely, preserve existing IDs, and return the full revised code in one block.\\n\\nValidation Pass (silent): Before sending, quickly self-check for: unbalanced containers, orphaned nodes, unlabeled key edges, unintended crossings (consider adjusting direction or grouping).\\n\\n## Non-Goals\\nDon\\'t invent components beyond reasonable inference.\\n\\nDon\\'t add explanatory prose unless explicitly requested.\\n\\nDon\\'t output multiple code blocks.\\n\\n## Complete Example (System Architecture)\\n\\n**User Request:** \"Create a diagram showing a web application with frontend, backend, and database\"\\n\\n**Your Response:**\\n```d2\\ndirection: right\\nspacing: 48\\n\\nfrontend: \"Web Frontend\" {\\n  shape: rectangle\\n  tooltip: \"React application\"\\n}\\n\\nbackend: \"API Server\" {\\n  shape: rectangle\\n  tooltip: \"Node.js + Express\"\\n}\\n\\ndatabase: \"PostgreSQL\" {\\n  shape: cylinder\\n  tooltip: \"Primary database\"\\n}\\n\\nfrontend -> backend: \"HTTP/REST API\"\\nbackend -> database: \"SQL queries\"\\n```\\n\\n## Additional Syntax Examples\\n\\n**Mathematical/Conceptual Diagram:**\\n```d2\\ndirection: right\\n\\none_a: \"1\" {\\n  shape: circle\\n  style.fill: \"#a8dadc\"\\n}\\n\\nplus: \"+\" {\\n  shape: diamond\\n  style.fill: \"#457b9d\"\\n}\\n\\none_b: \"1\" {\\n  shape: circle\\n  style.fill: \"#a8dadc\"\\n}\\n\\nequals: \"=\" {\\n  shape: octagon\\n  style.fill: \"#e63946\"\\n}\\n\\ntwo: \"2\" {\\n  shape: rectangle\\n  style.fill: \"#f1faee\"\\n  style.stroke: \"#e63946\"\\n}\\n\\none_a -> plus: \"input\"\\none_b -> plus: \"input\"\\nplus -> equals: \"result\"\\nequals -> two: \"output\"\\n```\\n\\n**Key Syntax Reminders:**\\n- ALWAYS use: `object_name: \"Label\" { properties }`\\n- NEVER use: `object_name: { label: \"Label\", properties }`\\n- Use dot notation for styles: `style.fill: \"#color\"`\\n- Use proper arrows: `source -> target: \"label\"`', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.793078", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: make a d2 diagram of an android app", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.794078", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.798074", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: ['backend/common/__init__.py', 'backend/common/ai.py', 'backend/common/base_ai.py', 'backend/common/env_manager.py', 'backend/common/file_filters.py', 'backend/common/lazy_file_scanner.py', 'backend/common/log_broadcaster.py', 'backend/common/logger.py', 'backend/common/models.py', 'backend/common/system_message_manager.py']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.800075", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': '---\\ntitle: \"D2 Diagram Generation Expert (Reinforced)\"\\ndescription: \"Generate D2 Diagrams\"\\ncategory: [\"Code Review\", \"Software Development\", \"Quality Assurance\"]\\nauthor: \"Eric M\"\\ncreated: \"2025-09-27\"\\ntags: [\"code quality\", \"review\", \"best practices\", \"performance\", \"security\", \"testing\"]\\nversion: \"1.0\"\\nstatus: \"draft\"\\n---\\n\\n# D2 Diagram Generation Expert\\n\\n## Role & Goal\\nYou are an expert consultant for the D2 diagramming language. Your sole focus is converting the user’s conceptual, structural, or business descriptions into clean, valid, and efficient D2 code that accurately represents the requested architecture, flow, or structure.\\n\\n## Primary Output Rule\\nSingle-Block Code Only: When generating D2, respond with one single code block containing only D2—no prose, no headers, no commentary.\\n\\nThe code block MUST start with  ```d2 and end with ```.\\n\\n**CRITICAL: Use pure D2 syntax only! Do NOT use Mermaid syntax, PlantUML, or any other diagram language.**\\n\\n**WRONG (Mermaid):**\\n```mermaid\\ngraph TD\\n    A[Start] --> B[End]\\n```\\n\\n**CORRECT (D2):**\\n```d2\\ndirection: right\\n\\nstart: \"Start\" {\\n  shape: rectangle\\n}\\nend: \"End\" {\\n  shape: rectangle\\n}\\nstart -> end\\n```\\n\\nExceptions:\\n\\nIf details are ambiguous or missing, ask one concise clarifying question (no code yet).\\n\\nIf the user asks for an explanation, provide it, then on the next turn output code in a single block.\\n\\n## Ambiguity Veto\\nIf the request is unclear or missing crucial structure (e.g., scope, key components, relationships, connector direction/type), ask one targeted question. If the reply still leaves blockers, ask at most one follow-up. Do not guess or assume.\\n\\n## Input Expectations (Guide, don’t block)\\nIf not provided, infer conservatively. Prefer clarity over guessing. Helpful inputs include:\\n\\nScope & Layer: (e.g., logical vs physical; high-level vs detailed)\\n\\nKey Entities/Components and any must-include items\\n\\nRelationships/Flows: direction, multiplicity, protocols (if relevant)\\n\\nContainers/Boundaries: systems, sub-systems, tiers, teams\\n\\nDetail Level: low | medium | high\\n\\nStyle (optional): theme light|dark, direction right|down|left|up\\n\\n## Code Quality & Validity\\nProduce syntactically correct D2; prefer readability and maintainability.\\n\\nSYNTAX CHECK: All D2 code must adhere to the following fundamental rules:\\n\\n**CRITICAL SYNTAX RULES:**\\n\\nObject Definition: Define objects with name: \"Label\" { properties }\\n- CORRECT: `server: \"Web Server\" { shape: rectangle }`\\n- WRONG: `server: { shape: rectangle, label: \"Web Server\" }`\\n\\nLabels: Assign visible text in quotes immediately after the object name (e.g., Server: \"Web Server\").\\n\\nProperties: Use dot notation for styles inside braces\\n- CORRECT: `style.fill: \"#color\"`\\n- WRONG: `style: { fill: \"#color\" }`\\n\\nRelationships: Use arrows (->, <-, <->) between defined object names with optional labels\\n- CORRECT: `frontend -> backend: \"HTTP/JSON\"`\\n\\nContainment: Use curly braces ({}) for object properties only. Use separate objects for containers.\\n\\nUse standard D2 shapes (e.g., rectangle, square, circle, cylinder, person) and proper syntax.\\n\\n## Default Layout\\nd2 \\n\\ndirection: right\\nspacing: 48\\n\\n## Naming & Labels:\\nIDs: Use kebab-case or snake_case (stable, machine-readable).\\n\\nLabels: Use human-readable titles via label: \"...\".\\n\\nContainers: Use clear parent containers for tiers/domains; label containers.\\n\\nEdges: Prefer explicit edges with direction (e.g., A -> B: \"HTTP/JSON\"). If protocol/medium matters, annotate the edge label.\\n\\nComments: Use // comments sparingly for sectioning (allowed within the code block).\\n\\nTheming (optional): Only add color/style if the user asks; otherwise keep neutral.\\n\\n## Process Workflow\\nDirect Generation: If the request is sufficiently specified, generate D2 immediately (single code block).\\n\\nClarify Once: If crucial information is missing, ask one targeted question (no code).\\n\\nRefinement: When modifying existing D2, apply the requested changes precisely, preserve existing IDs, and return the full revised code in one block.\\n\\nValidation Pass (silent): Before sending, quickly self-check for: unbalanced containers, orphaned nodes, unlabeled key edges, unintended crossings (consider adjusting direction or grouping).\\n\\n## Non-Goals\\nDon\\'t invent components beyond reasonable inference.\\n\\nDon\\'t add explanatory prose unless explicitly requested.\\n\\nDon\\'t output multiple code blocks.\\n\\n## Complete Example (System Architecture)\\n\\n**User Request:** \"Create a diagram showing a web application with frontend, backend, and database\"\\n\\n**Your Response:**\\n```d2\\ndirection: right\\nspacing: 48\\n\\nfrontend: \"Web Frontend\" {\\n  shape: rectangle\\n  tooltip: \"React application\"\\n}\\n\\nbackend: \"API Server\" {\\n  shape: rectangle\\n  tooltip: \"Node.js + Express\"\\n}\\n\\ndatabase: \"PostgreSQL\" {\\n  shape: cylinder\\n  tooltip: \"Primary database\"\\n}\\n\\nfrontend -> backend: \"HTTP/REST API\"\\nbackend -> database: \"SQL queries\"\\n```\\n\\n## Additional Syntax Examples\\n\\n**Mathematical/Conceptual Diagram:**\\n```d2\\ndirection: right\\n\\none_a: \"1\" {\\n  shape: circle\\n  style.fill: \"#a8dadc\"\\n}\\n\\nplus: \"+\" {\\n  shape: diamond\\n  style.fill: \"#457b9d\"\\n}\\n\\none_b: \"1\" {\\n  shape: circle\\n  style.fill: \"#a8dadc\"\\n}\\n\\nequals: \"=\" {\\n  shape: octagon\\n  style.fill: \"#e63946\"\\n}\\n\\ntwo: \"2\" {\\n  shape: rectangle\\n  style.fill: \"#f1faee\"\\n  style.stroke: \"#e63946\"\\n}\\n\\none_a -> plus: \"input\"\\none_b -> plus: \"input\"\\nplus -> equals: \"result\"\\nequals -> two: \"output\"\\n```\\n\\n**Key Syntax Reminders:**\\n- ALWAYS use: `object_name: \"Label\" { properties }`\\n- NEVER use: `object_name: { label: \"Label\", properties }`\\n- Use dot notation for styles: `style.fill: \"#color\"`\\n- Use proper arrows: `source -> target: \"label\"`', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.806686", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Retrieved existing session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.811685", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 ADDING 10 CONTEXT FILES TO SESSION conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.813683", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📋 Files to add: ['backend/common/__init__.py', 'backend/common/ai.py', 'backend/common/base_ai.py', 'backend/common/env_manager.py', 'backend/common/file_filters.py', 'backend/common/lazy_file_scanner.py', 'backend/common/log_broadcaster.py', 'backend/common/logger.py', 'backend/common/models.py', 'backend/common/system_message_manager.py']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.815685", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📄 Adding file 1/10: backend/common/__init__.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.818217", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 ADDING FILE TO SESSION conv-1: backend/common/__init__.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.821223", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📂 Using CODE_PATH: C:\\Code2025\\Whysper", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.822220", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 Resolving file path: backend/common/__init__.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.825216", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔐 Resolved safe_path: C:\\Code2025\\Whysper\\backend\\common\\__init__.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.826216", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ FILE ADDED SUCCESSFULLY! Total files: 1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.829076", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Current selected files: ['C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\__init__.py']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.835998", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "File added to selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.837995", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Successfully added file: backend/common/__init__.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.840263", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📄 Adding file 2/10: backend/common/ai.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.841394", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 ADDING FILE TO SESSION conv-1: backend/common/ai.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.845906", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📂 Using CODE_PATH: C:\\Code2025\\Whysper", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.848342", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 Resolving file path: backend/common/ai.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.852341", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔐 Resolved safe_path: C:\\Code2025\\Whysper\\backend\\common\\ai.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.853355", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ FILE ADDED SUCCESSFULLY! Total files: 2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.855353", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Current selected files: ['C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\__init__.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\ai.py']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.857354", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "File added to selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.858356", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Successfully added file: backend/common/ai.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.859358", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📄 Adding file 3/10: backend/common/base_ai.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.862353", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 ADDING FILE TO SESSION conv-1: backend/common/base_ai.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.871673", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📂 Using CODE_PATH: C:\\Code2025\\Whysper", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.873114", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 Resolving file path: backend/common/base_ai.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.877539", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔐 Resolved safe_path: C:\\Code2025\\Whysper\\backend\\common\\base_ai.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.879541", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ FILE ADDED SUCCESSFULLY! Total files: 3", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.891954", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Current selected files: ['C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\__init__.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\ai.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\base_ai.py']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.894951", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "File added to selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.899293", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Successfully added file: backend/common/base_ai.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.904721", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📄 Adding file 4/10: backend/common/env_manager.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.919980", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 ADDING FILE TO SESSION conv-1: backend/common/env_manager.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.927763", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📂 Using CODE_PATH: C:\\Code2025\\Whysper", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.930781", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 Resolving file path: backend/common/env_manager.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.938313", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔐 Resolved safe_path: C:\\Code2025\\Whysper\\backend\\common\\env_manager.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.942785", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ FILE ADDED SUCCESSFULLY! Total files: 4", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.945308", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Current selected files: ['C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\__init__.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\ai.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\base_ai.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\env_manager.py']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.947309", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "File added to selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.951701", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Successfully added file: backend/common/env_manager.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.953763", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📄 Adding file 5/10: backend/common/file_filters.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.957165", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 ADDING FILE TO SESSION conv-1: backend/common/file_filters.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.959809", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📂 Using CODE_PATH: C:\\Code2025\\Whysper", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.960831", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 Resolving file path: backend/common/file_filters.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.963834", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔐 Resolved safe_path: C:\\Code2025\\Whysper\\backend\\common\\file_filters.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.965835", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ FILE ADDED SUCCESSFULLY! Total files: 5", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.969252", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Current selected files: ['C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\__init__.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\ai.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\base_ai.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\env_manager.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\file_filters.py']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.971789", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "File added to selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.974617", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Successfully added file: backend/common/file_filters.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.978637", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📄 Adding file 6/10: backend/common/lazy_file_scanner.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.981636", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 ADDING FILE TO SESSION conv-1: backend/common/lazy_file_scanner.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.985691", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📂 Using CODE_PATH: C:\\Code2025\\Whysper", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.986689", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 Resolving file path: backend/common/lazy_file_scanner.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.991217", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔐 Resolved safe_path: C:\\Code2025\\Whysper\\backend\\common\\lazy_file_scanner.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.992211", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ FILE ADDED SUCCESSFULLY! Total files: 6", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.993512", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Current selected files: ['C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\__init__.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\ai.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\base_ai.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\env_manager.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\file_filters.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\lazy_file_scanner.py']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:42.994903", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "File added to selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.000601", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Successfully added file: backend/common/lazy_file_scanner.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.001600", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📄 Adding file 7/10: backend/common/log_broadcaster.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.003807", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 ADDING FILE TO SESSION conv-1: backend/common/log_broadcaster.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.009926", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📂 Using CODE_PATH: C:\\Code2025\\Whysper", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.010922", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 Resolving file path: backend/common/log_broadcaster.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.014920", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔐 Resolved safe_path: C:\\Code2025\\Whysper\\backend\\common\\log_broadcaster.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.015920", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ FILE ADDED SUCCESSFULLY! Total files: 7", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.016921", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Current selected files: ['C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\__init__.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\ai.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\base_ai.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\env_manager.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\file_filters.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\lazy_file_scanner.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\log_broadcaster.py']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.022096", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "File added to selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.024096", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Successfully added file: backend/common/log_broadcaster.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.027226", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📄 Adding file 8/10: backend/common/logger.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.028226", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 ADDING FILE TO SESSION conv-1: backend/common/logger.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.031481", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📂 Using CODE_PATH: C:\\Code2025\\Whysper", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.032495", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 Resolving file path: backend/common/logger.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.037872", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔐 Resolved safe_path: C:\\Code2025\\Whysper\\backend\\common\\logger.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.040349", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ FILE ADDED SUCCESSFULLY! Total files: 8", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.041349", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Current selected files: ['C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\__init__.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\ai.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\base_ai.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\env_manager.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\file_filters.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\lazy_file_scanner.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\log_broadcaster.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\logger.py']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.042350", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "File added to selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.043351", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Successfully added file: backend/common/logger.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.044348", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📄 Adding file 9/10: backend/common/models.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.049515", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 ADDING FILE TO SESSION conv-1: backend/common/models.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.057206", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📂 Using CODE_PATH: C:\\Code2025\\Whysper", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.059221", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 Resolving file path: backend/common/models.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.062717", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔐 Resolved safe_path: C:\\Code2025\\Whysper\\backend\\common\\models.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.071943", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ FILE ADDED SUCCESSFULLY! Total files: 9", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.072948", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Current selected files: ['C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\__init__.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\ai.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\base_ai.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\env_manager.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\file_filters.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\lazy_file_scanner.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\log_broadcaster.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\logger.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\models.py']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.075230", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "File added to selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.077248", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Successfully added file: backend/common/models.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.079253", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📄 Adding file 10/10: backend/common/system_message_manager.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.080252", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 ADDING FILE TO SESSION conv-1: backend/common/system_message_manager.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.084943", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📂 Using CODE_PATH: C:\\Code2025\\Whysper", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.085942", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 Resolving file path: backend/common/system_message_manager.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.091724", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔐 Resolved safe_path: C:\\Code2025\\Whysper\\backend\\common\\system_message_manager.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.092746", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ FILE ADDED SUCCESSFULLY! Total files: 10", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.093757", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Current selected files: ['C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\__init__.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\ai.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\base_ai.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\env_manager.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\file_filters.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\lazy_file_scanner.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\log_broadcaster.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\logger.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\models.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\system_message_manager.py']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.096745", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "File added to selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.098156", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Successfully added file: backend/common/system_message_manager.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.100170", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📊 SESSION SUMMARY - Total selected files: 10", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.104173", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📋 Final selected files list: ['C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\__init__.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\ai.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\base_ai.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\env_manager.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\file_filters.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\lazy_file_scanner.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\log_broadcaster.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\logger.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\models.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\system_message_manager.py']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.106174", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Provider update skipped - same or empty provider: 'openrouter'", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.108175", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating model to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.111285", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Model updated", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.116127", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Model changed to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.117151", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.119160", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Using agent prompt: ---\ntitle: \"D2 Diagram Generation Expert (Reinforced)\"\ndescription: \"Generate D2 Diagrams\"\ncategory:...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.120150", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.121148", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 10 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.122150", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 10 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.123147", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.123147", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 10 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.125686", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is follow-up message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.126693", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.127680", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.130687", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.132995", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.226135", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=False)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.265869", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.275158", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.277162", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: False, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.279157", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 10", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.280670", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: ['backend/common/__init__.py', 'backend/common/ai.py', 'backend/common/base_ai.py', 'backend/common/env_manager.py', 'backend/common/file_filters.py', 'backend/common/lazy_file_scanner.py', 'backend/common/log_broadcaster.py', 'backend/common/logger.py', 'backend/common/models.py', 'backend/common/system_message_manager.py']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.283687", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📚 LOADING FILES - 10 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.285687", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Files to load: ['backend/common/__init__.py', 'backend/common/ai.py', 'backend/common/base_ai.py', 'backend/common/env_manager.py', 'backend/common/file_filters.py', 'backend/common/lazy_file_scanner.py', 'backend/common/log_broadcaster.py', 'backend/common/logger.py', 'backend/common/models.py', 'backend/common/system_message_manager.py']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.286687", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 Using regular loading (≤50 files)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.288686", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Getting codebase content from files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "num_files": 10, "max_size": 10485760}}
{"timestamp": "2025-10-19T20:37:43.298027", "level": "WARNING", "logger": "whysper.common.lazy_file_scanner", "message": "Could not get file size, skipping", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "file": "backend/common/__init__.py"}}
{"timestamp": "2025-10-19T20:37:43.299027", "level": "WARNING", "logger": "whysper.common.lazy_file_scanner", "message": "Could not get file size, skipping", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "file": "backend/common/ai.py"}}
{"timestamp": "2025-10-19T20:37:43.300027", "level": "WARNING", "logger": "whysper.common.lazy_file_scanner", "message": "Could not get file size, skipping", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "file": "backend/common/base_ai.py"}}
{"timestamp": "2025-10-19T20:37:43.301028", "level": "WARNING", "logger": "whysper.common.lazy_file_scanner", "message": "Could not get file size, skipping", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "file": "backend/common/env_manager.py"}}
{"timestamp": "2025-10-19T20:37:43.302028", "level": "WARNING", "logger": "whysper.common.lazy_file_scanner", "message": "Could not get file size, skipping", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "file": "backend/common/file_filters.py"}}
{"timestamp": "2025-10-19T20:37:43.305335", "level": "WARNING", "logger": "whysper.common.lazy_file_scanner", "message": "Could not get file size, skipping", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "file": "backend/common/lazy_file_scanner.py"}}
{"timestamp": "2025-10-19T20:37:43.307333", "level": "WARNING", "logger": "whysper.common.lazy_file_scanner", "message": "Could not get file size, skipping", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "file": "backend/common/log_broadcaster.py"}}
{"timestamp": "2025-10-19T20:37:43.308351", "level": "WARNING", "logger": "whysper.common.lazy_file_scanner", "message": "Could not get file size, skipping", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "file": "backend/common/logger.py"}}
{"timestamp": "2025-10-19T20:37:43.310351", "level": "WARNING", "logger": "whysper.common.lazy_file_scanner", "message": "Could not get file size, skipping", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "file": "backend/common/models.py"}}
{"timestamp": "2025-10-19T20:37:43.311352", "level": "WARNING", "logger": "whysper.common.lazy_file_scanner", "message": "Could not get file size, skipping", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "file": "backend/common/system_message_manager.py"}}
{"timestamp": "2025-10-19T20:37:43.314351", "level": "INFO", "logger": "whysper", "message": "Performance: common.lazy_file_scanner.get_codebase_content_lazy completed in 0.026s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "performance": true, "duration_ms": 25.66, "operation": "common.lazy_file_scanner.get_codebase_content_lazy"}}
{"timestamp": "2025-10-19T20:37:43.315348", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 LOADING RESULT - 72 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.317349", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📖 Content preview: \n\n=== Summary ===\nIncluded 0 files, skipped 10 files due to size limits....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.319353", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 72 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:37:43.321349", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:39:08.746505", "level": "ERROR", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Error processing chat message: Network request failed: Expecting value: line 397 column 1 (char 2178)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 16656, "thread_name": "AnyIO worker thread", "process": 23424, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:42:32.060027", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33532, "thread_name": "MainThread", "process": 34380, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:42:32.561572", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33532, "thread_name": "MainThread", "process": 34380, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:42:32.562577", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33532, "thread_name": "MainThread", "process": 34380, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-19T20:42:32.592593", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33532, "thread_name": "MainThread", "process": 34380, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-19T20:42:32.597587", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33532, "thread_name": "MainThread", "process": 34380, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:42:32.597587", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33532, "thread_name": "MainThread", "process": 34380, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:42:37.200673", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33532, "thread_name": "MainThread", "process": 34380, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:42:43.355992", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39428, "thread_name": "MainThread", "process": 29988, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:42:43.611213", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39428, "thread_name": "MainThread", "process": 29988, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:42:43.612211", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39428, "thread_name": "MainThread", "process": 29988, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-19T20:42:43.622671", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39428, "thread_name": "MainThread", "process": 29988, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-19T20:42:43.623735", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39428, "thread_name": "MainThread", "process": 29988, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:42:43.623735", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39428, "thread_name": "MainThread", "process": 29988, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:42:47.415412", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39428, "thread_name": "MainThread", "process": 29988, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:42:47.785259", "level": "INFO", "logger": "whysper.app.main", "message": "Starting Whysper Web2 Backend v2.0.0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39428, "thread_name": "MainThread", "process": 29988, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T20:42:47.787264", "level": "INFO", "logger": "whysper.app.main", "message": "Server running on 0.0.0.0:8003", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39428, "thread_name": "MainThread", "process": 29988, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T20:42:47.788262", "level": "INFO", "logger": "whysper.app.main", "message": "Debug mode: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39428, "thread_name": "MainThread", "process": 29988, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T20:42:47.789272", "level": "INFO", "logger": "whysper.app.main", "message": "CORS origins: ['http://localhost:3000', 'http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:5176', 'http://localhost:5177', 'http://localhost:5178', 'http://127.0.0.1:3000', 'http://127.0.0.1:5173', 'http://127.0.0.1:5174', 'http://127.0.0.1:5175', 'http://127.0.0.1:5176', 'http://127.0.0.1:5177']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39428, "thread_name": "MainThread", "process": 29988, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T20:42:47.791263", "level": "INFO", "logger": "whysper.app.main", "message": "Real-time log broadcasting enabled - connect to GET /api/v1/logs/stream", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39428, "thread_name": "MainThread", "process": 29988, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T20:42:47.792476", "level": "INFO", "logger": "whysper.app.main", "message": "FastMCP server integration initialized", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39428, "thread_name": "MainThread", "process": 29988, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T20:42:47.793492", "level": "INFO", "logger": "whysper.app.main", "message": "MCP endpoints available at /mcp/*", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39428, "thread_name": "MainThread", "process": 29988, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T20:42:47.794640", "level": "INFO", "logger": "whysper.app.main", "message": "MCP tools: generate_diagram, render_diagram, generate_and_render", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39428, "thread_name": "MainThread", "process": 29988, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T20:42:47.795680", "level": "INFO", "logger": "whysper.app.main", "message": "MCP WebSocket endpoint: /mcp/ws", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39428, "thread_name": "MainThread", "process": 29988, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T20:45:51.742063", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27588, "thread_name": "MainThread", "process": 35584, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:45:52.454132", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27588, "thread_name": "MainThread", "process": 35584, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:45:52.454132", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27588, "thread_name": "MainThread", "process": 35584, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-19T20:45:52.472158", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27588, "thread_name": "MainThread", "process": 35584, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-19T20:45:52.473154", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27588, "thread_name": "MainThread", "process": 35584, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:45:52.473154", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27588, "thread_name": "MainThread", "process": 35584, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:45:56.789368", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27588, "thread_name": "MainThread", "process": 35584, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:46:07.886015", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 25520, "thread_name": "MainThread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:46:08.443471", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 25520, "thread_name": "MainThread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:46:08.444486", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 25520, "thread_name": "MainThread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-19T20:46:08.464800", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 25520, "thread_name": "MainThread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-19T20:46:08.464800", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 25520, "thread_name": "MainThread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:46:08.465812", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 25520, "thread_name": "MainThread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:46:15.015871", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 25520, "thread_name": "MainThread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:46:15.708497", "level": "INFO", "logger": "whysper.app.main", "message": "Starting Whysper Web2 Backend v2.0.0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 25520, "thread_name": "MainThread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T20:46:15.709630", "level": "INFO", "logger": "whysper.app.main", "message": "Server running on 0.0.0.0:8003", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 25520, "thread_name": "MainThread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T20:46:15.710653", "level": "INFO", "logger": "whysper.app.main", "message": "Debug mode: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 25520, "thread_name": "MainThread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T20:46:15.711660", "level": "INFO", "logger": "whysper.app.main", "message": "CORS origins: ['http://localhost:3000', 'http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:5176', 'http://localhost:5177', 'http://localhost:5178', 'http://127.0.0.1:3000', 'http://127.0.0.1:5173', 'http://127.0.0.1:5174', 'http://127.0.0.1:5175', 'http://127.0.0.1:5176', 'http://127.0.0.1:5177']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 25520, "thread_name": "MainThread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T20:46:15.712662", "level": "INFO", "logger": "whysper.app.main", "message": "Real-time log broadcasting enabled - connect to GET /api/v1/logs/stream", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 25520, "thread_name": "MainThread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T20:46:15.713664", "level": "INFO", "logger": "whysper.app.main", "message": "FastMCP server integration initialized", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 25520, "thread_name": "MainThread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T20:46:15.714662", "level": "INFO", "logger": "whysper.app.main", "message": "MCP endpoints available at /mcp/*", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 25520, "thread_name": "MainThread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T20:46:15.715663", "level": "INFO", "logger": "whysper.app.main", "message": "MCP tools: generate_diagram, render_diagram, generate_and_render", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 25520, "thread_name": "MainThread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T20:46:15.716655", "level": "INFO", "logger": "whysper.app.main", "message": "MCP WebSocket endpoint: /mcp/ws", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 25520, "thread_name": "MainThread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-19T20:46:35.811915", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:46:35.814910", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:46:35.823050", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:46:35.825036", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:46:36.454743", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:46:36.477588", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:46:36.494520", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:46:36.537853", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:46:36.589188", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:46:36.592060", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:46:36.601862", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:46:36.605735", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:47:28.613719", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 25520, "thread_name": "MainThread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-26"}}
{"timestamp": "2025-10-19T20:47:52.090332", "level": "INFO", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Generating all documentation for 5 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 25520, "thread_name": "MainThread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-36"}}
{"timestamp": "2025-10-19T20:47:52.093248", "level": "INFO", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "AI processor initialized for documentation generation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 25520, "thread_name": "MainThread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-36"}}
{"timestamp": "2025-10-19T20:47:52.095238", "level": "INFO", "logger": "whysper.app.services.documentation_service.DocumentationService", "message": "Analyzing code structure for 5 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 25520, "thread_name": "MainThread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-36"}}
{"timestamp": "2025-10-19T20:48:44.249883", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.258342", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'ggg', 'conversationId': 'conv-1', 'contextFiles': ['backend/mcp_server/fastmcp_server.py', 'backend/mcp_server/MCP_HISTORY_SERVICE.md', 'backend/mcp_server/mcp_history_service.py', 'backend/mcp_server/mcp_inspector_guide.md', 'backend/mcp_server/README.md'], 'settings': {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.262535", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: ggg", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.264754", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.286254", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: ['backend/mcp_server/fastmcp_server.py', 'backend/mcp_server/MCP_HISTORY_SERVICE.md', 'backend/mcp_server/mcp_history_service.py', 'backend/mcp_server/mcp_inspector_guide.md', 'backend/mcp_server/README.md']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.287086", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.292119", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Creating new conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.293120", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Creating conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.294614", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-19T20:48:44.336201", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-19T20:48:44.338200", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.339394", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initializing conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.339394", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Set default model: qwen/qwen3-coder-30b-a3b-instruct", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.341534", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initialized session logger for: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.343032", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Created new conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.343544", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Conversation session conv-1 initialized successfully", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.344914", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Setting API key for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.345932", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "API key updated for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.350965", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Session created", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.353965", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 ADDING 5 CONTEXT FILES TO SESSION conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.356965", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📋 Files to add: ['backend/mcp_server/fastmcp_server.py', 'backend/mcp_server/MCP_HISTORY_SERVICE.md', 'backend/mcp_server/mcp_history_service.py', 'backend/mcp_server/mcp_inspector_guide.md', 'backend/mcp_server/README.md']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.359966", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📄 Adding file 1/5: backend/mcp_server/fastmcp_server.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.360966", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 ADDING FILE TO SESSION conv-1: backend/mcp_server/fastmcp_server.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.365963", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📂 Using CODE_PATH: C:\\Code2025\\Whysper", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.370690", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 Resolving file path: backend/mcp_server/fastmcp_server.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.376760", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔐 Resolved safe_path: C:\\Code2025\\Whysper\\backend\\mcp_server\\fastmcp_server.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.378779", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ FILE ADDED SUCCESSFULLY! Total files: 1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.386199", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Current selected files: ['C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\fastmcp_server.py']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.387220", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "File added to selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.388217", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Successfully added file: backend/mcp_server/fastmcp_server.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.390646", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📄 Adding file 2/5: backend/mcp_server/MCP_HISTORY_SERVICE.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.392175", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 ADDING FILE TO SESSION conv-1: backend/mcp_server/MCP_HISTORY_SERVICE.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.397195", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📂 Using CODE_PATH: C:\\Code2025\\Whysper", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.407034", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 Resolving file path: backend/mcp_server/MCP_HISTORY_SERVICE.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.411889", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔐 Resolved safe_path: C:\\Code2025\\Whysper\\backend\\mcp_server\\MCP_HISTORY_SERVICE.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.412908", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ FILE ADDED SUCCESSFULLY! Total files: 2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.419668", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Current selected files: ['C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\fastmcp_server.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\MCP_HISTORY_SERVICE.md']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.422189", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "File added to selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.422948", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Successfully added file: backend/mcp_server/MCP_HISTORY_SERVICE.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.425121", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📄 Adding file 3/5: backend/mcp_server/mcp_history_service.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.426119", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 ADDING FILE TO SESSION conv-1: backend/mcp_server/mcp_history_service.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.429930", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📂 Using CODE_PATH: C:\\Code2025\\Whysper", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.434328", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 Resolving file path: backend/mcp_server/mcp_history_service.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.440122", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔐 Resolved safe_path: C:\\Code2025\\Whysper\\backend\\mcp_server\\mcp_history_service.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.441144", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ FILE ADDED SUCCESSFULLY! Total files: 3", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.443174", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Current selected files: ['C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\fastmcp_server.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\MCP_HISTORY_SERVICE.md', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\mcp_history_service.py']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.444643", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "File added to selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.446973", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Successfully added file: backend/mcp_server/mcp_history_service.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.451282", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📄 Adding file 4/5: backend/mcp_server/mcp_inspector_guide.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.453743", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 ADDING FILE TO SESSION conv-1: backend/mcp_server/mcp_inspector_guide.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.457009", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📂 Using CODE_PATH: C:\\Code2025\\Whysper", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.459185", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 Resolving file path: backend/mcp_server/mcp_inspector_guide.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.465017", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔐 Resolved safe_path: C:\\Code2025\\Whysper\\backend\\mcp_server\\mcp_inspector_guide.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.469328", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ FILE ADDED SUCCESSFULLY! Total files: 4", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.472536", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Current selected files: ['C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\fastmcp_server.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\MCP_HISTORY_SERVICE.md', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\mcp_history_service.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\mcp_inspector_guide.md']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.475667", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "File added to selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.479966", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Successfully added file: backend/mcp_server/mcp_inspector_guide.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.483197", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📄 Adding file 5/5: backend/mcp_server/README.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.485706", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 ADDING FILE TO SESSION conv-1: backend/mcp_server/README.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.493242", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📂 Using CODE_PATH: C:\\Code2025\\Whysper", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.496775", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 Resolving file path: backend/mcp_server/README.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.502561", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔐 Resolved safe_path: C:\\Code2025\\Whysper\\backend\\mcp_server\\README.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.505622", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ FILE ADDED SUCCESSFULLY! Total files: 5", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.511235", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Current selected files: ['C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\fastmcp_server.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\MCP_HISTORY_SERVICE.md', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\mcp_history_service.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\mcp_inspector_guide.md', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\README.md']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.512375", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "File added to selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.514665", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Successfully added file: backend/mcp_server/README.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.516664", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📊 SESSION SUMMARY - Total selected files: 5", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.519361", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📋 Final selected files list: ['C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\fastmcp_server.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\MCP_HISTORY_SERVICE.md', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\mcp_history_service.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\mcp_inspector_guide.md', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\README.md']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.520672", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Provider update skipped - same or empty provider: 'openrouter'", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.526138", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating model to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.528155", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Model updated", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.530454", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Model changed to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.534109", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.535328", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Using agent prompt: You are a helpful AI assistant specialized in code analysis and development....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.536434", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.537457", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 5 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.538674", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 5 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.541093", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.544508", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 5 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.545501", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is first message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.546015", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.547029", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.551393", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.552683", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.553869", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=True)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.559478", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.561467", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.562514", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: True, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.566580", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 5", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.569581", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: ['backend/mcp_server/fastmcp_server.py', 'backend/mcp_server/MCP_HISTORY_SERVICE.md', 'backend/mcp_server/mcp_history_service.py', 'backend/mcp_server/mcp_inspector_guide.md', 'backend/mcp_server/README.md']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.577764", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🚀 FIRST MESSAGE - Loading 5 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.579226", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📖 Calling _load_files with: ['backend/mcp_server/fastmcp_server.py', 'backend/mcp_server/MCP_HISTORY_SERVICE.md', 'backend/mcp_server/mcp_history_service.py', 'backend/mcp_server/mcp_inspector_guide.md', 'backend/mcp_server/README.md']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.581511", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📚 LOADING FILES - 5 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.589308", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Files to load: ['backend/mcp_server/fastmcp_server.py', 'backend/mcp_server/MCP_HISTORY_SERVICE.md', 'backend/mcp_server/mcp_history_service.py', 'backend/mcp_server/mcp_inspector_guide.md', 'backend/mcp_server/README.md']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.593508", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 Using regular loading (≤50 files)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.596551", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Getting codebase content from files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "num_files": 5, "max_size": 10485760}}
{"timestamp": "2025-10-19T20:48:44.600615", "level": "WARNING", "logger": "whysper.common.lazy_file_scanner", "message": "Could not get file size, skipping", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "file": "backend/mcp_server/README.md"}}
{"timestamp": "2025-10-19T20:48:44.604990", "level": "WARNING", "logger": "whysper.common.lazy_file_scanner", "message": "Could not get file size, skipping", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "file": "backend/mcp_server/fastmcp_server.py"}}
{"timestamp": "2025-10-19T20:48:44.607014", "level": "WARNING", "logger": "whysper.common.lazy_file_scanner", "message": "Could not get file size, skipping", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "file": "backend/mcp_server/MCP_HISTORY_SERVICE.md"}}
{"timestamp": "2025-10-19T20:48:44.610622", "level": "WARNING", "logger": "whysper.common.lazy_file_scanner", "message": "Could not get file size, skipping", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "file": "backend/mcp_server/mcp_history_service.py"}}
{"timestamp": "2025-10-19T20:48:44.614032", "level": "WARNING", "logger": "whysper.common.lazy_file_scanner", "message": "Could not get file size, skipping", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "file": "backend/mcp_server/mcp_inspector_guide.md"}}
{"timestamp": "2025-10-19T20:48:44.616442", "level": "INFO", "logger": "whysper", "message": "Performance: common.lazy_file_scanner.get_codebase_content_lazy completed in 0.020s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "performance": true, "duration_ms": 19.89, "operation": "common.lazy_file_scanner.get_codebase_content_lazy"}}
{"timestamp": "2025-10-19T20:48:44.619846", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 LOADING RESULT - 71 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.620845", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📖 Content preview: \n\n=== Summary ===\nIncluded 0 files, skipped 5 files due to size limits....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.622225", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 LOADED CONTENT - 71 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.623993", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ SUCCESS - Content loaded, preview: \n\n=== Summary ===\nIncluded 0 files, skipped 5 files due to size limits....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.625010", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 71 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:44.626010", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:45.775217", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1760924924-NA1CPJoONuAUkuziwlII\",\n  \"provider\": \"DeepInfra\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1760924924,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"It looks like you've sent just \\\"ggg\\\" - could you provide more context or clarify what you're asking about? \\n\\nIf you're referring to the codebase summary you shared earlier, I can help analyze that. Or if you have specific code you'd like me to review, please share it and let me know what you'd like assistance with.\\n\\nWhat would you like help with today?\",\n        \"refusal\": null,\n        \"reasoning\": null\n      }\n    }\n  ],\n  \"usage\": {\n    \"prompt_tokens\": 54,\n    \"completion_tokens\": 80,\n    \"total_tokens\": 134,\n    \"prompt_tokens_details\": null\n  }\n}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:45.776167", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 354 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:45.777161", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: It looks like you've sent just \"ggg\" - could you provide more context or clarify what you're asking about? \n\nIf you're referring to the codebase summary you shared earlier, I can help analyze that. Or", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:45.777161", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 354 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:45.779164", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No D2 diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:45.780232", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 354 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:45.781291", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Using agent prompt for question: ggg...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:45.781291", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt length: 76 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:45.782301", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt preview: You are a helpful AI assistant specialized in code analysis and development....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:45.782301", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 1.230s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:45.783300", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:45.783300", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:45.811048", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 1.23s using 134 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:45.812056", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:45.812056", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "Created new GUID 2461710f-650d-4b51-bbc8-8a6a9a395290 for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:45.815058", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "No history file found for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:45.819061", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251019-204845_2461710f-650d-4b51-bbc8-8a6a9a395290.json (2 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:45.820062", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (2 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:45.821058", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:45.859637", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.102314", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.104377", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'make a d2 diagram of a iphone app', 'conversationId': 'conv-1', 'contextFiles': ['backend/mcp_server/fastmcp_server.py', 'backend/mcp_server/MCP_HISTORY_SERVICE.md', 'backend/mcp_server/mcp_history_service.py', 'backend/mcp_server/mcp_inspector_guide.md', 'backend/mcp_server/README.md'], 'settings': {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.105313", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: make a d2 diagram of a iphone app", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.106319", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.108335", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: ['backend/mcp_server/fastmcp_server.py', 'backend/mcp_server/MCP_HISTORY_SERVICE.md', 'backend/mcp_server/mcp_history_service.py', 'backend/mcp_server/mcp_inspector_guide.md', 'backend/mcp_server/README.md']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.109336", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.113336", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Retrieved existing session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.116331", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 ADDING 5 CONTEXT FILES TO SESSION conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.117335", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📋 Files to add: ['backend/mcp_server/fastmcp_server.py', 'backend/mcp_server/MCP_HISTORY_SERVICE.md', 'backend/mcp_server/mcp_history_service.py', 'backend/mcp_server/mcp_inspector_guide.md', 'backend/mcp_server/README.md']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.118331", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📄 Adding file 1/5: backend/mcp_server/fastmcp_server.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.119331", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 ADDING FILE TO SESSION conv-1: backend/mcp_server/fastmcp_server.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.122466", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📂 Using CODE_PATH: C:\\Code2025\\Whysper", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.122995", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 Resolving file path: backend/mcp_server/fastmcp_server.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.126012", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔐 Resolved safe_path: C:\\Code2025\\Whysper\\backend\\mcp_server\\fastmcp_server.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.127010", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ FILE ADDED SUCCESSFULLY! Total files: 6", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.128032", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Current selected files: ['backend/mcp_server/fastmcp_server.py', 'backend/mcp_server/MCP_HISTORY_SERVICE.md', 'backend/mcp_server/mcp_history_service.py', 'backend/mcp_server/mcp_inspector_guide.md', 'backend/mcp_server/README.md', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\fastmcp_server.py']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.129006", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "File added to selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.130058", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Successfully added file: backend/mcp_server/fastmcp_server.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.131525", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📄 Adding file 2/5: backend/mcp_server/MCP_HISTORY_SERVICE.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.132644", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 ADDING FILE TO SESSION conv-1: backend/mcp_server/MCP_HISTORY_SERVICE.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.136203", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📂 Using CODE_PATH: C:\\Code2025\\Whysper", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.138746", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 Resolving file path: backend/mcp_server/MCP_HISTORY_SERVICE.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.144158", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔐 Resolved safe_path: C:\\Code2025\\Whysper\\backend\\mcp_server\\MCP_HISTORY_SERVICE.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.145639", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ FILE ADDED SUCCESSFULLY! Total files: 7", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.151798", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Current selected files: ['backend/mcp_server/fastmcp_server.py', 'backend/mcp_server/MCP_HISTORY_SERVICE.md', 'backend/mcp_server/mcp_history_service.py', 'backend/mcp_server/mcp_inspector_guide.md', 'backend/mcp_server/README.md', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\fastmcp_server.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\MCP_HISTORY_SERVICE.md']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.152999", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "File added to selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.156172", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Successfully added file: backend/mcp_server/MCP_HISTORY_SERVICE.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.158200", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📄 Adding file 3/5: backend/mcp_server/mcp_history_service.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.161618", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 ADDING FILE TO SESSION conv-1: backend/mcp_server/mcp_history_service.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.164619", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📂 Using CODE_PATH: C:\\Code2025\\Whysper", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.167741", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 Resolving file path: backend/mcp_server/mcp_history_service.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.174419", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔐 Resolved safe_path: C:\\Code2025\\Whysper\\backend\\mcp_server\\mcp_history_service.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.176437", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ FILE ADDED SUCCESSFULLY! Total files: 8", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.177949", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Current selected files: ['backend/mcp_server/fastmcp_server.py', 'backend/mcp_server/MCP_HISTORY_SERVICE.md', 'backend/mcp_server/mcp_history_service.py', 'backend/mcp_server/mcp_inspector_guide.md', 'backend/mcp_server/README.md', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\fastmcp_server.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\MCP_HISTORY_SERVICE.md', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\mcp_history_service.py']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.183659", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "File added to selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.186663", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Successfully added file: backend/mcp_server/mcp_history_service.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.188179", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📄 Adding file 4/5: backend/mcp_server/mcp_inspector_guide.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.190897", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 ADDING FILE TO SESSION conv-1: backend/mcp_server/mcp_inspector_guide.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.196338", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📂 Using CODE_PATH: C:\\Code2025\\Whysper", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.198339", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 Resolving file path: backend/mcp_server/mcp_inspector_guide.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.211341", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔐 Resolved safe_path: C:\\Code2025\\Whysper\\backend\\mcp_server\\mcp_inspector_guide.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.212342", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ FILE ADDED SUCCESSFULLY! Total files: 9", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.214336", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Current selected files: ['backend/mcp_server/fastmcp_server.py', 'backend/mcp_server/MCP_HISTORY_SERVICE.md', 'backend/mcp_server/mcp_history_service.py', 'backend/mcp_server/mcp_inspector_guide.md', 'backend/mcp_server/README.md', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\fastmcp_server.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\MCP_HISTORY_SERVICE.md', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\mcp_history_service.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\mcp_inspector_guide.md']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.216343", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "File added to selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.218341", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Successfully added file: backend/mcp_server/mcp_inspector_guide.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.220338", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📄 Adding file 5/5: backend/mcp_server/README.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.221339", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 ADDING FILE TO SESSION conv-1: backend/mcp_server/README.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.224337", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📂 Using CODE_PATH: C:\\Code2025\\Whysper", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.225336", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 Resolving file path: backend/mcp_server/README.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.228337", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔐 Resolved safe_path: C:\\Code2025\\Whysper\\backend\\mcp_server\\README.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.230337", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ FILE ADDED SUCCESSFULLY! Total files: 10", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.231338", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Current selected files: ['backend/mcp_server/fastmcp_server.py', 'backend/mcp_server/MCP_HISTORY_SERVICE.md', 'backend/mcp_server/mcp_history_service.py', 'backend/mcp_server/mcp_inspector_guide.md', 'backend/mcp_server/README.md', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\fastmcp_server.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\MCP_HISTORY_SERVICE.md', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\mcp_history_service.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\mcp_inspector_guide.md', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\README.md']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.232337", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "File added to selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.233343", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Successfully added file: backend/mcp_server/README.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.234340", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📊 SESSION SUMMARY - Total selected files: 10", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.235346", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📋 Final selected files list: ['backend/mcp_server/fastmcp_server.py', 'backend/mcp_server/MCP_HISTORY_SERVICE.md', 'backend/mcp_server/mcp_history_service.py', 'backend/mcp_server/mcp_inspector_guide.md', 'backend/mcp_server/README.md', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\fastmcp_server.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\MCP_HISTORY_SERVICE.md', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\mcp_history_service.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\mcp_inspector_guide.md', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\README.md']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.236340", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Provider update skipped - same or empty provider: 'openrouter'", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.238342", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating model to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.242874", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Model updated", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.244159", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Model changed to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.346788", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.354589", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Using agent prompt: You are a helpful AI assistant specialized in code analysis and development....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.359098", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.361651", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 5 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.373280", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 5 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.381665", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.389664", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 5 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.392987", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is follow-up message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.394109", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.395131", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.405128", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.406132", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.411128", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=False)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.412127", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.414125", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.427129", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: False, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.434391", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 5", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.436393", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: ['backend/mcp_server/fastmcp_server.py', 'backend/mcp_server/MCP_HISTORY_SERVICE.md', 'backend/mcp_server/mcp_history_service.py', 'backend/mcp_server/mcp_inspector_guide.md', 'backend/mcp_server/README.md']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.437409", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📚 LOADING FILES - 5 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.439424", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Files to load: ['backend/mcp_server/fastmcp_server.py', 'backend/mcp_server/MCP_HISTORY_SERVICE.md', 'backend/mcp_server/mcp_history_service.py', 'backend/mcp_server/mcp_inspector_guide.md', 'backend/mcp_server/README.md']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.440427", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 Using regular loading (≤50 files)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.442513", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Getting codebase content from files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "num_files": 5, "max_size": 10485760}}
{"timestamp": "2025-10-19T20:48:53.445173", "level": "WARNING", "logger": "whysper.common.lazy_file_scanner", "message": "Could not get file size, skipping", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "file": "backend/mcp_server/README.md"}}
{"timestamp": "2025-10-19T20:48:53.448173", "level": "WARNING", "logger": "whysper.common.lazy_file_scanner", "message": "Could not get file size, skipping", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "file": "backend/mcp_server/fastmcp_server.py"}}
{"timestamp": "2025-10-19T20:48:53.450456", "level": "WARNING", "logger": "whysper.common.lazy_file_scanner", "message": "Could not get file size, skipping", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "file": "backend/mcp_server/MCP_HISTORY_SERVICE.md"}}
{"timestamp": "2025-10-19T20:48:53.452476", "level": "WARNING", "logger": "whysper.common.lazy_file_scanner", "message": "Could not get file size, skipping", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "file": "backend/mcp_server/mcp_history_service.py"}}
{"timestamp": "2025-10-19T20:48:53.455701", "level": "WARNING", "logger": "whysper.common.lazy_file_scanner", "message": "Could not get file size, skipping", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "file": "backend/mcp_server/mcp_inspector_guide.md"}}
{"timestamp": "2025-10-19T20:48:53.457774", "level": "INFO", "logger": "whysper", "message": "Performance: common.lazy_file_scanner.get_codebase_content_lazy completed in 0.015s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "performance": true, "duration_ms": 15.26, "operation": "common.lazy_file_scanner.get_codebase_content_lazy"}}
{"timestamp": "2025-10-19T20:48:53.461079", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 LOADING RESULT - 71 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.463101", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📖 Content preview: \n\n=== Summary ===\nIncluded 0 files, skipped 5 files due to size limits....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.465641", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 71 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:53.466880", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:58.882680", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1760924933-WhMsK0bZumrKcfFLWA9f\",\n  \"provider\": \"SiliconFlow\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1760924933,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"Here's a D2 diagram representing an iPhone app architecture:\\n\\n```d2\\n// iPhone App Architecture Diagram\\n\\n// Main app container\\n\\\"iPhone App\\\" {\\n  style: \\\"filled\\\"\\n  color: \\\"#f0f0f0\\\"\\n  stroke: \\\"#333\\\"\\n  \\\"UI Layer\\\" {\\n    style: \\\"filled\\\"\\n    color: \\\"#e3f2fd\\\"\\n    stroke: \\\"#1976d2\\\"\\n    \\\"View Controllers\\\" {\\n      style: \\\"filled\\\"\\n      color: \\\"#bbdefb\\\"\\n      \\\"Home View Controller\\\"\\n      \\\"Profile View Controller\\\"\\n      \\\"Settings View Controller\\\"\\n    }\\n    \\\"Views\\\" {\\n      style: \\\"filled\\\"\\n      color: \\\"#c8e6c9\\\"\\n      \\\"Home View\\\"\\n      \\\"Profile View\\\"\\n      \\\"Setti", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:58.883679", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 2473 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:58.884679", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: Here's a D2 diagram representing an iPhone app architecture:\n\n```d2\n// iPhone App Architecture Diagram\n\n// Main app container\n\"iPhone App\" {\n  style: \"filled\"\n  color: \"#f0f0f0\"\n  stroke: \"#333\"\n  \"UI", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:58.884679", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 2473 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:58.885677", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 [D2 PROGRESS] Found 1 D2 diagram(s) - validating syntax...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:59.077676", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Validation attempt 1/8", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:59.301477", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "D2 diagram #1 validation failed: debug: using theme Neutral Default (ID: 0)\nerr: failed to compile ..\\..\\..\\Users\\Hack\\AppData\\Local\\Temp\\tmp38ip8b2w.d2: C:\\Users\\Hack\\AppData\\Local\\Temp\\tmp38ip8b2w.d2:5:3: \"style\" expected to be set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:48:59.303628", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔧 [D2 PROGRESS] Validation errors found - requesting AI auto-fix (attempt 1/8)...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:02.228839", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1760924939-9R9gJ4mLE617rzOdVgGl\",\n  \"provider\": \"Nebius\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1760924939,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```d2\\n// Define the diagram with proper styling syntax\\n{\\n  // Database nodes\\n  database1: {\\n    shape: cylinder\\n    style: {\\n      fill: \\\"#e0e0e0\\\"\\n      stroke: \\\"#333\\\"\\n    }\\n  }\\n\\n  database2: {\\n    shape: cylinder\\n    style: {\\n      fill: \\\"#e0e0e0\\\"\\n      stroke: \\\"#333\\\"\\n    }\\n  }\\n\\n  // Web/App nodes\\n  webapp1: {\\n    shape: rectangle\\n    style: {\\n      fill: \\\"#add8e6\\\"\\n      stroke: \\\"#333\\\"\\n    }\\n  }\\n\\n  webapp2: {\\n    shape: rectangle\\n    style: {\\n      fill: \\\"#add8e6\\\"\\n      stroke: \\\"#333\\\"\\n    }\\n  }\\n\\n  // User nodes\\n  user1: {\\n    shape: person\\n    style: {\\n      ", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:02.231823", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 1006 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:02.232867", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```d2\n// Define the diagram with proper styling syntax\n{\n  // Database nodes\n  database1: {\n    shape: cylinder\n    style: {\n      fill: \"#e0e0e0\"\n      stroke: \"#333\"\n    }\n  }\n\n  database2: {\n    sh", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:02.234904", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [D2 PROGRESS] Received corrected D2 code (1006 chars) - re-validating...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:02.236901", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Validation attempt 2/8", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:02.425135", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "D2 diagram #1 validation failed: debug: using theme Neutral Default (ID: 0)\nerr: failed to compile ..\\..\\..\\Users\\Hack\\AppData\\Local\\Temp\\tmpu9vka8p6.d2: C:\\Users\\Hack\\AppData\\Local\\Temp\\tmpu9vka8p6.d2:2:1: invalid text beginning unq", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:02.426138", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔧 [D2 PROGRESS] Validation errors found - requesting AI auto-fix (attempt 2/8)...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:05.065507", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1760924942-SrG9mySrAbNDFkDd9edo\",\n  \"provider\": \"SiliconFlow\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1760924942,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```d2\\n\\\"Database\\\" {\\n  shape: cylinder\\n}\\n\\n\\\"Web/App\\\" {\\n  shape: rectangle\\n}\\n\\n\\\"User\\\" {\\n  shape: person\\n}\\n\\n\\\"Cloud\\\" {\\n  shape: cloud\\n}\\n\\n\\\"Database\\\" -> \\\"Web/App\\\" {\\n  label: \\\"queries\\\"\\n}\\n\\n\\\"User\\\" -> \\\"Web/App\\\" {\\n  label: \\\"uses\\\"\\n}\\n\\n\\\"Web/App\\\" -> \\\"Cloud\\\" {\\n  label: \\\"requests\\\"\\n}\\n\\n\\\"Cloud\\\" -> \\\"Database\\\" {\\n  label: \\\"stores data\\\"\\n}\\n```\",\n        \"refusal\": null,\n        \"reasoning\": null\n      }\n    }\n  ],\n  \"system_fingerprint\": \"\",\n  \"usage\": {\n    \"prompt_tokens\": 285,\n    \"completion_tokens\": 110,\n    \"total_tokens\": 395\n  }\n}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:05.066511", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 317 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:05.066511", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```d2\n\"Database\" {\n  shape: cylinder\n}\n\n\"Web/App\" {\n  shape: rectangle\n}\n\n\"User\" {\n  shape: person\n}\n\n\"Cloud\" {\n  shape: cloud\n}\n\n\"Database\" -> \"Web/App\" {\n  label: \"queries\"\n}\n\n\"User\" -> \"Web/App\" {\n", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:05.067897", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [D2 PROGRESS] Received corrected D2 code (317 chars) - re-validating...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:05.068908", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Validation attempt 3/8", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:05.456397", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [D2 PROGRESS] All D2 diagrams validated successfully!", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:05.457400", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [D2 PROGRESS] Rendering diagrams to SVG...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:05.459937", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Pre-rendering D2 diagram #1 (308 chars)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:05.966251", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Saved D2 diagram to: backend\\static\\d2_diagrams\\d2_diagram_20251019_204905_a50ff662.svg", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:05.968266", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "D2 diagrams pre-rendered successfully", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:05.970268", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [D2 PROGRESS] D2 diagrams rendered and ready for display!", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:05.971268", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 20602 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:05.972555", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Using agent prompt for question: make a d2 diagram of a iphone app...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:05.974506", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt length: 76 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:05.975523", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt preview: You are a helpful AI assistant specialized in code analysis and development....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:05.977525", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Question contains diagram keywords", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:05.978524", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response preview: <div class=\"d2-diagram-container\" style=\"margin: 16px 0;\">\n<div style=\"display: inline-flex; align-items: center; gap: 6px; padding: 6px 12px; background: linear-gradient(135deg, #10b981 0%, #059669 100%); border-radius: 6px; margin-bottom: 12px; font-size: 12px; font-weight: 500; color: white;\">\n  <span style=\"font-size: 14px;\">✅</span>\n  <span>D2 Diagram Rendered Successfully</span>\n</div>\n  <div class=\"d2-rendered-diagram\">\n    <?xml version=\"1.0\" encoding=\"utf-8\"?><svg xmlns=\"http://www.w3.o...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:05.980972", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response does NOT contain Mermaid code block", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:05.981988", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 12.576s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:05.984166", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:05.985185", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:06.005851", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 12.58s using 395 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:06.007313", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:06.049427", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Loaded conversation history: C:\\Code2025\\Whysper\\history\\20251019-204845_2461710f-650d-4b51-bbc8-8a6a9a395290.json", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:06.054692", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251019-204845_2461710f-650d-4b51-bbc8-8a6a9a395290.json (4 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:06.055701", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (4 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:06.058004", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:06.091119", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.848380", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.849938", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'Evaluate this code against SOLID principles and suggest improvements for maintainable object-oriented design.', 'conversationId': 'conv-1', 'contextFiles': ['backend/mcp_server/fastmcp_server.py', 'backend/mcp_server/MCP_HISTORY_SERVICE.md', 'backend/mcp_server/mcp_history_service.py', 'backend/mcp_server/mcp_inspector_guide.md', 'backend/mcp_server/README.md'], 'settings': {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.851933", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: Evaluate this code against SOLID principles and suggest improvements for maintainable object-oriented design.", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.853936", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.854932", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: ['backend/mcp_server/fastmcp_server.py', 'backend/mcp_server/MCP_HISTORY_SERVICE.md', 'backend/mcp_server/mcp_history_service.py', 'backend/mcp_server/mcp_inspector_guide.md', 'backend/mcp_server/README.md']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.856936", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.859940", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Retrieved existing session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.861938", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 ADDING 5 CONTEXT FILES TO SESSION conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.863104", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📋 Files to add: ['backend/mcp_server/fastmcp_server.py', 'backend/mcp_server/MCP_HISTORY_SERVICE.md', 'backend/mcp_server/mcp_history_service.py', 'backend/mcp_server/mcp_inspector_guide.md', 'backend/mcp_server/README.md']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.865117", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📄 Adding file 1/5: backend/mcp_server/fastmcp_server.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.867117", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 ADDING FILE TO SESSION conv-1: backend/mcp_server/fastmcp_server.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.869287", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📂 Using CODE_PATH: C:\\Code2025\\Whysper", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.870288", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 Resolving file path: backend/mcp_server/fastmcp_server.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.871288", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔐 Resolved safe_path: C:\\Code2025\\Whysper\\backend\\mcp_server\\fastmcp_server.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.872289", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ FILE ADDED SUCCESSFULLY! Total files: 6", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.872289", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Current selected files: ['backend/mcp_server/fastmcp_server.py', 'backend/mcp_server/MCP_HISTORY_SERVICE.md', 'backend/mcp_server/mcp_history_service.py', 'backend/mcp_server/mcp_inspector_guide.md', 'backend/mcp_server/README.md', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\fastmcp_server.py']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.873286", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "File added to selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.873286", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Successfully added file: backend/mcp_server/fastmcp_server.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.874292", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📄 Adding file 2/5: backend/mcp_server/MCP_HISTORY_SERVICE.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.874292", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 ADDING FILE TO SESSION conv-1: backend/mcp_server/MCP_HISTORY_SERVICE.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.876287", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📂 Using CODE_PATH: C:\\Code2025\\Whysper", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.876287", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 Resolving file path: backend/mcp_server/MCP_HISTORY_SERVICE.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.877286", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔐 Resolved safe_path: C:\\Code2025\\Whysper\\backend\\mcp_server\\MCP_HISTORY_SERVICE.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.878287", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ FILE ADDED SUCCESSFULLY! Total files: 7", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.878287", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Current selected files: ['backend/mcp_server/fastmcp_server.py', 'backend/mcp_server/MCP_HISTORY_SERVICE.md', 'backend/mcp_server/mcp_history_service.py', 'backend/mcp_server/mcp_inspector_guide.md', 'backend/mcp_server/README.md', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\fastmcp_server.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\MCP_HISTORY_SERVICE.md']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.879294", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "File added to selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.880289", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Successfully added file: backend/mcp_server/MCP_HISTORY_SERVICE.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.881292", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📄 Adding file 3/5: backend/mcp_server/mcp_history_service.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.885325", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 ADDING FILE TO SESSION conv-1: backend/mcp_server/mcp_history_service.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.887307", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📂 Using CODE_PATH: C:\\Code2025\\Whysper", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.888307", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 Resolving file path: backend/mcp_server/mcp_history_service.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.891382", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔐 Resolved safe_path: C:\\Code2025\\Whysper\\backend\\mcp_server\\mcp_history_service.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.892428", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ FILE ADDED SUCCESSFULLY! Total files: 8", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.893430", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Current selected files: ['backend/mcp_server/fastmcp_server.py', 'backend/mcp_server/MCP_HISTORY_SERVICE.md', 'backend/mcp_server/mcp_history_service.py', 'backend/mcp_server/mcp_inspector_guide.md', 'backend/mcp_server/README.md', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\fastmcp_server.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\MCP_HISTORY_SERVICE.md', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\mcp_history_service.py']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.894433", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "File added to selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.895428", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Successfully added file: backend/mcp_server/mcp_history_service.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.896425", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📄 Adding file 4/5: backend/mcp_server/mcp_inspector_guide.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.898699", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 ADDING FILE TO SESSION conv-1: backend/mcp_server/mcp_inspector_guide.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.904294", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📂 Using CODE_PATH: C:\\Code2025\\Whysper", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.905293", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 Resolving file path: backend/mcp_server/mcp_inspector_guide.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.908294", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔐 Resolved safe_path: C:\\Code2025\\Whysper\\backend\\mcp_server\\mcp_inspector_guide.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.909290", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ FILE ADDED SUCCESSFULLY! Total files: 9", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.910292", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Current selected files: ['backend/mcp_server/fastmcp_server.py', 'backend/mcp_server/MCP_HISTORY_SERVICE.md', 'backend/mcp_server/mcp_history_service.py', 'backend/mcp_server/mcp_inspector_guide.md', 'backend/mcp_server/README.md', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\fastmcp_server.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\MCP_HISTORY_SERVICE.md', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\mcp_history_service.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\mcp_inspector_guide.md']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.911301", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "File added to selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.912293", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Successfully added file: backend/mcp_server/mcp_inspector_guide.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.919757", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📄 Adding file 5/5: backend/mcp_server/README.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.921758", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 ADDING FILE TO SESSION conv-1: backend/mcp_server/README.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.923754", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📂 Using CODE_PATH: C:\\Code2025\\Whysper", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.925611", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 Resolving file path: backend/mcp_server/README.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.931625", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔐 Resolved safe_path: C:\\Code2025\\Whysper\\backend\\mcp_server\\README.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.933626", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ FILE ADDED SUCCESSFULLY! Total files: 10", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.937625", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Current selected files: ['backend/mcp_server/fastmcp_server.py', 'backend/mcp_server/MCP_HISTORY_SERVICE.md', 'backend/mcp_server/mcp_history_service.py', 'backend/mcp_server/mcp_inspector_guide.md', 'backend/mcp_server/README.md', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\fastmcp_server.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\MCP_HISTORY_SERVICE.md', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\mcp_history_service.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\mcp_inspector_guide.md', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\README.md']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.939626", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "File added to selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.940627", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Successfully added file: backend/mcp_server/README.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.942785", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📊 SESSION SUMMARY - Total selected files: 10", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.945292", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📋 Final selected files list: ['backend/mcp_server/fastmcp_server.py', 'backend/mcp_server/MCP_HISTORY_SERVICE.md', 'backend/mcp_server/mcp_history_service.py', 'backend/mcp_server/mcp_inspector_guide.md', 'backend/mcp_server/README.md', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\fastmcp_server.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\MCP_HISTORY_SERVICE.md', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\mcp_history_service.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\mcp_inspector_guide.md', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\mcp_server\\\\README.md']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.947434", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Provider update skipped - same or empty provider: 'openrouter'", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.948440", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating model to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.950762", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Model updated", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.951988", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Model changed to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.954074", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.955092", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Using agent prompt: You are a helpful AI assistant specialized in code analysis and development....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.956095", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.957101", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 5 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.959093", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 5 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.960095", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.962090", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 5 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.963090", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is follow-up message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.965096", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.966090", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.967089", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.968089", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.971094", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=False)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.972088", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.973091", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.974091", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: False, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.976093", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 5", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.977095", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: ['backend/mcp_server/fastmcp_server.py', 'backend/mcp_server/MCP_HISTORY_SERVICE.md', 'backend/mcp_server/mcp_history_service.py', 'backend/mcp_server/mcp_inspector_guide.md', 'backend/mcp_server/README.md']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.978093", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📚 LOADING FILES - 5 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.979095", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Files to load: ['backend/mcp_server/fastmcp_server.py', 'backend/mcp_server/MCP_HISTORY_SERVICE.md', 'backend/mcp_server/mcp_history_service.py', 'backend/mcp_server/mcp_inspector_guide.md', 'backend/mcp_server/README.md']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.981470", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 Using regular loading (≤50 files)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.983489", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Getting codebase content from files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "num_files": 5, "max_size": 10485760}}
{"timestamp": "2025-10-19T20:49:30.988486", "level": "WARNING", "logger": "whysper.common.lazy_file_scanner", "message": "Could not get file size, skipping", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "file": "backend/mcp_server/README.md"}}
{"timestamp": "2025-10-19T20:49:30.989504", "level": "WARNING", "logger": "whysper.common.lazy_file_scanner", "message": "Could not get file size, skipping", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "file": "backend/mcp_server/fastmcp_server.py"}}
{"timestamp": "2025-10-19T20:49:30.991912", "level": "WARNING", "logger": "whysper.common.lazy_file_scanner", "message": "Could not get file size, skipping", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "file": "backend/mcp_server/MCP_HISTORY_SERVICE.md"}}
{"timestamp": "2025-10-19T20:49:30.992913", "level": "WARNING", "logger": "whysper.common.lazy_file_scanner", "message": "Could not get file size, skipping", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "file": "backend/mcp_server/mcp_history_service.py"}}
{"timestamp": "2025-10-19T20:49:30.992913", "level": "WARNING", "logger": "whysper.common.lazy_file_scanner", "message": "Could not get file size, skipping", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "file": "backend/mcp_server/mcp_inspector_guide.md"}}
{"timestamp": "2025-10-19T20:49:30.993915", "level": "INFO", "logger": "whysper", "message": "Performance: common.lazy_file_scanner.get_codebase_content_lazy completed in 0.010s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "performance": true, "duration_ms": 10.43, "operation": "common.lazy_file_scanner.get_codebase_content_lazy"}}
{"timestamp": "2025-10-19T20:49:30.994913", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 LOADING RESULT - 71 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.995916", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📖 Content preview: \n\n=== Summary ===\nIncluded 0 files, skipped 5 files due to size limits....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.996912", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 71 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:30.996912", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:37.405088", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1760924971-cOA5oNV3ixsjPo7Z5gpz\",\n  \"provider\": \"Novita\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1760924971,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"I notice that you've shared a D2 diagram of an iPhone app architecture, but there's no actual code provided for me to evaluate against SOLID principles. The diagram shows:\\n\\n- Database (cylinder)\\n- Web/App (rectangle) \\n- User (person)\\n- Cloud (cloud)\\n\\nWith connections showing queries, uses, requests, and data storage.\\n\\nTo properly evaluate code against SOLID principles, I would need to see the actual implementation code. However, I can provide general guidance on how to apply SOLID principles to mobile app architecture:\\n\\n## SOLID Principles for Mobile App Design\\n\\n### 1. **Single Responsibility Principle ", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:37.406083", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 2253 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:37.407001", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: I notice that you've shared a D2 diagram of an iPhone app architecture, but there's no actual code provided for me to evaluate against SOLID principles. The diagram shows:\n\n- Database (cylinder)\n- Web", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:37.408005", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 2253 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:37.409003", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No D2 diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:37.410010", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 2253 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:37.411003", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Using agent prompt for question: Evaluate this code against SOLID principles and suggest improvements for maintainable object-oriente...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:37.412003", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt length: 76 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:37.413002", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt preview: You are a helpful AI assistant specialized in code analysis and development....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:37.414517", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 6.446s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:37.414517", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:37.415537", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:37.474460", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 6.45s using 12764 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:37.475459", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:37.522881", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Loaded conversation history: C:\\Code2025\\Whysper\\history\\20251019-204845_2461710f-650d-4b51-bbc8-8a6a9a395290.json", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:37.526882", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251019-204845_2461710f-650d-4b51-bbc8-8a6a9a395290.json (6 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:37.527878", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (6 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:37.527878", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-19T20:49:37.558157", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 23612, "thread_name": "AnyIO worker thread", "process": 22284, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:47:08.858835", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35228, "thread_name": "MainThread", "process": 23816, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:47:09.303145", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35228, "thread_name": "MainThread", "process": 23816, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:47:09.303145", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35228, "thread_name": "MainThread", "process": 23816, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T11:47:09.335168", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35228, "thread_name": "MainThread", "process": 23816, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T11:47:09.336200", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35228, "thread_name": "MainThread", "process": 23816, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:47:09.337165", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35228, "thread_name": "MainThread", "process": 23816, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:47:17.736685", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35228, "thread_name": "MainThread", "process": 23816, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:47:24.814743", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22548, "thread_name": "MainThread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:47:25.123939", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22548, "thread_name": "MainThread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:47:25.124942", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22548, "thread_name": "MainThread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T11:47:25.136048", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22548, "thread_name": "MainThread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T11:47:25.136941", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22548, "thread_name": "MainThread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:47:25.136941", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22548, "thread_name": "MainThread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:47:29.438021", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22548, "thread_name": "MainThread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:47:30.084088", "level": "INFO", "logger": "whysper.app.main", "message": "Starting Whysper Web2 Backend v2.0.0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22548, "thread_name": "MainThread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T11:47:30.085088", "level": "INFO", "logger": "whysper.app.main", "message": "Server running on 0.0.0.0:8003", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22548, "thread_name": "MainThread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T11:47:30.086088", "level": "INFO", "logger": "whysper.app.main", "message": "Debug mode: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22548, "thread_name": "MainThread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T11:47:30.088442", "level": "INFO", "logger": "whysper.app.main", "message": "CORS origins: ['http://localhost:3000', 'http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:5176', 'http://localhost:5177', 'http://localhost:5178', 'http://127.0.0.1:3000', 'http://127.0.0.1:5173', 'http://127.0.0.1:5174', 'http://127.0.0.1:5175', 'http://127.0.0.1:5176', 'http://127.0.0.1:5177']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22548, "thread_name": "MainThread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T11:47:30.090979", "level": "INFO", "logger": "whysper.app.main", "message": "Real-time log broadcasting enabled - connect to GET /api/v1/logs/stream", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22548, "thread_name": "MainThread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T11:47:30.094001", "level": "INFO", "logger": "whysper.app.main", "message": "FastMCP server integration initialized", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22548, "thread_name": "MainThread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T11:47:30.095002", "level": "INFO", "logger": "whysper.app.main", "message": "MCP endpoints available at /mcp/*", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22548, "thread_name": "MainThread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T11:47:30.096418", "level": "INFO", "logger": "whysper.app.main", "message": "MCP tools: generate_diagram, render_diagram, generate_and_render", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22548, "thread_name": "MainThread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T11:47:30.097814", "level": "INFO", "logger": "whysper.app.main", "message": "MCP WebSocket endpoint: /mcp/ws", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22548, "thread_name": "MainThread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T11:49:12.373405", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:12.376962", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:12.389835", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:12.392849", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:13.034800", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:13.102676", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:13.154059", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:13.179980", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:13.342085", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:13.345576", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:13.365223", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:13.368777", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:18.503152", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22548, "thread_name": "MainThread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-17"}}
{"timestamp": "2025-10-20T11:49:24.464601", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_agent_prompt endpoint called for file: d2-architecture.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:24.467616", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Successfully retrieved agent prompt 'd2-architecture.md' with 5602 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.104708", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.106694", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'Create a d2 diagram for an iphone app', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.108696", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: Create a d2 diagram for an iphone app", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.109695", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.111691", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.112692", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.115709", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Creating new conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.115709", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Creating conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.116693", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T11:49:54.135204", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T11:49:54.137181", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.138185", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initializing conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.139196", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Set default model: qwen/qwen3-coder-30b-a3b-instruct", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.140711", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initialized session logger for: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.143730", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Created new conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.145727", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Conversation session conv-1 initialized successfully", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.146930", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Setting API key for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.147930", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "API key updated for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.148942", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Session created", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.149936", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.152929", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Provider update skipped - same or empty provider: 'openrouter'", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.154934", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating model to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.155933", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Model updated", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.157990", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Model changed to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.161955", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.163952", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Using agent prompt: You are a helpful AI assistant specialized in code analysis and development....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.164953", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.167948", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.168948", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.169948", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.171461", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.173477", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is first message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.174480", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "First question has no file context in session conv-1 - proceeding without code context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.177481", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.180476", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.181477", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.183320", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.185846", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=True)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.186849", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.188840", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.190842", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: True, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.192842", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.195902", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.197902", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "⚠️ First message but NO SELECTED FILES", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.203934", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:54.206968", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:49:55.254208", "level": "ERROR", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Error processing chat message: OpenRouter API key is invalid or expired", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:50:44.755594", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:50:44.758595", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:50:44.769281", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:50:44.773281", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:50:45.140908", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:50:45.157839", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:50:45.172692", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:50:45.188407", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:50:45.357192", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:50:45.361196", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:50:45.370061", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T11:50:45.373491", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:09:56.495364", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 Log stream client disconnected (cancelled, session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22548, "thread_name": "MainThread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap"}}
{"timestamp": "2025-10-20T12:09:59.498462", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:09:59.498462", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27528, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:09:59.633239", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22548, "thread_name": "MainThread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-48"}}
{"timestamp": "2025-10-20T12:09:59.643809", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:09:59.689951", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27528, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:09:59.787975", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27528, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:09:59.892164", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27528, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:09:59.965550", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27528, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:10:00.053360", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27528, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:10:00.496991", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:10:00.500001", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27528, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:10:00.508512", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31764, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:10:00.520011", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27528, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:10:06.813759", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27528, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:10:06.815773", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'Say hello', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27528, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:10:06.820518", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: Say hello", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27528, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:10:06.825217", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27528, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:10:06.832830", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27528, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:10:06.841768", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27528, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:10:06.853043", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Retrieved existing session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27528, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:10:06.856667", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27528, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:10:06.860137", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27528, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:10:06.861247", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27528, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:10:06.862482", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27528, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:10:06.867824", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27528, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:10:06.872491", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27528, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:10:06.874380", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27528, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:10:06.876860", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is follow-up message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27528, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:10:06.879649", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27528, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:10:06.894843", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27528, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:10:06.900136", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27528, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:10:06.905671", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27528, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:10:06.921690", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: False (first_message=False)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27528, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:10:06.922692", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27528, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:10:06.925213", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27528, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:10:06.927559", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: False, needs_context: False", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27528, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:10:06.931580", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27528, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:10:06.936513", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27528, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:10:06.938542", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "❌ No codebase context needed, returning empty", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27528, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:10:06.940744", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27528, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:10:06.948029", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27528, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:10:07.402089", "level": "ERROR", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Error processing chat message: OpenRouter API key is invalid or expired", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27528, "thread_name": "AnyIO worker thread", "process": 25876, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:14:25.330590", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 2348, "thread_name": "MainThread", "process": 28412, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:14:25.660559", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 2348, "thread_name": "MainThread", "process": 28412, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:14:25.661553", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 2348, "thread_name": "MainThread", "process": 28412, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T12:14:25.686315", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 2348, "thread_name": "MainThread", "process": 28412, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T12:14:25.686315", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 2348, "thread_name": "MainThread", "process": 28412, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:14:25.687403", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 2348, "thread_name": "MainThread", "process": 28412, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:14:30.248197", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 2348, "thread_name": "MainThread", "process": 28412, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:14:37.322772", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:14:37.705653", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:14:37.705653", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T12:14:37.721777", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T12:14:37.722813", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:14:37.723777", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:14:42.276894", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:14:42.941202", "level": "INFO", "logger": "whysper.app.main", "message": "Starting Whysper Web2 Backend v2.0.0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T12:14:42.943205", "level": "INFO", "logger": "whysper.app.main", "message": "Server running on 0.0.0.0:8003", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T12:14:42.944206", "level": "INFO", "logger": "whysper.app.main", "message": "Debug mode: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T12:14:42.945241", "level": "INFO", "logger": "whysper.app.main", "message": "CORS origins: ['http://localhost:3000', 'http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:5176', 'http://localhost:5177', 'http://localhost:5178', 'http://127.0.0.1:3000', 'http://127.0.0.1:5173', 'http://127.0.0.1:5174', 'http://127.0.0.1:5175', 'http://127.0.0.1:5176', 'http://127.0.0.1:5177']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T12:14:42.949980", "level": "INFO", "logger": "whysper.app.main", "message": "Real-time log broadcasting enabled - connect to GET /api/v1/logs/stream", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T12:14:42.951038", "level": "INFO", "logger": "whysper.app.main", "message": "FastMCP server integration initialized", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T12:14:42.953060", "level": "INFO", "logger": "whysper.app.main", "message": "MCP endpoints available at /mcp/*", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T12:14:42.954046", "level": "INFO", "logger": "whysper.app.main", "message": "MCP tools: generate_diagram, render_diagram, generate_and_render", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T12:14:42.955036", "level": "INFO", "logger": "whysper.app.main", "message": "MCP WebSocket endpoint: /mcp/ws", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T12:14:43.213445", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-4"}}
{"timestamp": "2025-10-20T12:15:11.182118", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 Log stream client disconnected (cancelled, session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap"}}
{"timestamp": "2025-10-20T12:15:19.651101", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:19.655502", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:19.672503", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:19.675502", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:19.862948", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-11"}}
{"timestamp": "2025-10-20T12:15:20.257951", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:20.270470", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:20.284472", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:20.313098", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:21.221481", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:21.227014", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:21.253553", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:21.269628", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.288778", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.290796", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'iii', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.292200", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: iii", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.296060", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.301077", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.304429", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.313843", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Creating new conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.316182", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Creating conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.319205", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T12:15:25.355968", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T12:15:25.358140", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.359141", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initializing conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.360166", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Set default model: qwen/qwen3-coder-30b-a3b-instruct", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.361139", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initialized session logger for: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.362143", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Created new conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.363144", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Conversation session conv-1 initialized successfully", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.365145", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Setting API key for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.368162", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "API key updated for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.369614", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Session created", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.373156", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.374526", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Provider update skipped - same or empty provider: 'openrouter'", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.375573", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating model to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.376547", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Model updated", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.377551", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Model changed to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.378551", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.379547", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Using agent prompt: You are a helpful AI assistant specialized in code analysis and development....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.380545", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.382802", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.385025", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.386042", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.388041", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.389041", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is first message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.390083", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "First question has no file context in session conv-1 - proceeding without code context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.391043", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.392045", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.393041", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.394046", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.395081", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=True)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.396044", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.398052", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.401042", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: True, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.406914", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.409405", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.411410", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "⚠️ First message but NO SELECTED FILES", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.413406", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:25.414407", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:26.795719", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1760980530-nh2xWsBZJdPzikayuvIj\",\n  \"provider\": \"DeepInfra\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1760980530,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"I notice you've provided just \\\"iii\\\" as input. This appears to be a very brief or incomplete code snippet. \\n\\nCould you please provide more context or the actual code you'd like me to analyze? For example:\\n- The complete code file\\n- A more detailed code snippet\\n- Information about what specific aspect you'd like me to help with\\n\\nThis will help me give you a more useful and detailed analysis of your code.\",\n        \"refusal\": null,\n        \"reasoning\": null\n      }\n    }\n  ],\n  \"usage\": {\n    \"prompt_tokens\": 35,\n    \"completion_tokens\": 88,\n    \"total_tokens\": 123,\n    \"prompt_tokens_details\": null\n  }\n}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:26.796720", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 405 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:26.798703", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: I notice you've provided just \"iii\" as input. This appears to be a very brief or incomplete code snippet. \n\nCould you please provide more context or the actual code you'd like me to analyze? For examp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:26.799700", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 405 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:26.813867", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No D2 diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:26.816023", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 405 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:26.817163", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Using agent prompt for question: iii...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:26.818260", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt length: 76 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:26.820279", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt preview: You are a helpful AI assistant specialized in code analysis and development....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:26.821291", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 1.426s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:26.822290", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:26.825285", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:26.941967", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 1.43s using 123 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:26.949954", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:26.953144", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "Created new GUID 4dfa223f-2f18-4508-8bd7-d24714aa5be9 for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:26.961805", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "No history file found for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:26.971864", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251020-121526_4dfa223f-2f18-4508-8bd7-d24714aa5be9.json (2 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:26.980914", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (2 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:26.993361", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:27.073971", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:39.046349", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_agent_prompt endpoint called for file: d2-architecture.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:39.049399", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Successfully retrieved agent prompt 'd2-architecture.md' with 5602 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:55.959082", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:55.959082", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'create a d2 diagram of a iphone app', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:55.959082", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: create a d2 diagram of a iphone app", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:55.960102", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:55.961091", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:55.961091", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:55.963102", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Retrieved existing session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:55.964136", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:55.965400", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:55.965400", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:55.968189", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:55.969204", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:55.971539", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:55.972588", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:55.973551", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is follow-up message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:55.973551", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:55.975556", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:55.976556", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:55.977551", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:55.979552", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=False)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:55.982553", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Detected D2 diagram request, loading d2-architecture.md prompt", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:55.984554", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Auto-detected diagram request, using agent prompt: ---\ntitle: \"D2 Diagram Generation Expert (Reinforc...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:55.986886", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:55.986886", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:55.988197", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: False, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:55.990212", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:55.991215", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:55.992208", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:15:55.993209", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:03.105879", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1760980561-ln2ScLVV2Emjdwsh11fM\",\n  \"provider\": \"SiliconFlow\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1760980561,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"I'll create a D2 diagram for an iPhone app interface. Here's a visual representation:\\n\\n```d2\\n// iPhone App Interface Diagram\\n\\n// Main app container\\n\\\"iPhone App\\\" {\\n  style: \\\"filled\\\"\\n  fill: \\\"#f0f0f0\\\"\\n  stroke: \\\"#ccc\\\"\\n  border-radius: 20\\n}\\n\\n// App components\\n\\\"Home Screen\\\" {\\n  style: \\\"filled\\\"\\n  fill: \\\"#ffffff\\\"\\n  stroke: \\\"#ddd\\\"\\n  border-radius: 10\\n}\\n\\n\\\"Navigation Bar\\\" {\\n  style: \\\"filled\\\"\\n  fill: \\\"#007AFF\\\"\\n  stroke: \\\"#0056b3\\\"\\n  text-color: \\\"#ffffff\\\"\\n}\\n\\n\\\"Tab Bar\\\" {\\n  style: \\\"filled\\\"\\n  fill: \\\"#f8f8f8\\\"\\n  stroke: \\\"#ddd\\\"\\n  text-color: \\\"#333\\\"\\n}\\n\\n\\\"Conte", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:03.106956", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 2672 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:03.106956", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: I'll create a D2 diagram for an iPhone app interface. Here's a visual representation:\n\n```d2\n// iPhone App Interface Diagram\n\n// Main app container\n\"iPhone App\" {\n  style: \"filled\"\n  fill: \"#f0f0f0\"\n ", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:03.106956", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 2672 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:03.109371", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 [D2 PROGRESS] Found 1 D2 diagram(s) - validating syntax...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:03.528026", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Validation attempt 1/8", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:03.766156", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "D2 diagram #1 validation failed: debug: using theme Neutral Default (ID: 0)\nerr: failed to compile ..\\..\\..\\Users\\Hack\\AppData\\Local\\Temp\\tmpnbkth8q1.d2: C:\\Users\\Hack\\AppData\\Local\\Temp\\tmpnbkth8q1.d2:5:3: \"style\" expected to be set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:03.767476", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔧 [D2 PROGRESS] Validation errors found - requesting AI auto-fix (attempt 1/8)...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:07.951120", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1760980568-oyD1DDuYloIqNkRZDinV\",\n  \"provider\": \"SiliconFlow\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1760980569,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```d2\\n// Database nodes\\ndb1: {\\n  shape: cylinder\\n  style: {\\n    fill: \\\"#e0e0e0\\\"\\n    stroke: \\\"#333\\\"\\n    border-radius: 5\\n  }\\n}\\n\\ndb2: {\\n  shape: cylinder\\n  style: {\\n    fill: \\\"#e0e0e0\\\"\\n    stroke: \\\"#333\\\"\\n    border-radius: 5\\n  }\\n}\\n\\n// Web/App nodes\\nwebapp1: {\\n  shape: rectangle\\n  style: {\\n    fill: \\\"#add8e6\\\"\\n    stroke: \\\"#333\\\"\\n    border-radius: 5\\n  }\\n}\\n\\nwebapp2: {\\n  shape: rectangle\\n  style: {\\n    fill: \\\"#add8e6\\\"\\n    stroke: \\\"#333\\\"\\n    border-radius: 5\\n  }\\n}\\n\\n// User nodes\\nuser1: {\\n  shape: person\\n  style: {\\n    fill: \\\"#90ee90\\\"\\n    stroke: \\\"#333\\\"\\n ", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:07.954138", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 1004 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:07.956123", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```d2\n// Database nodes\ndb1: {\n  shape: cylinder\n  style: {\n    fill: \"#e0e0e0\"\n    stroke: \"#333\"\n    border-radius: 5\n  }\n}\n\ndb2: {\n  shape: cylinder\n  style: {\n    fill: \"#e0e0e0\"\n    stroke: \"#333", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:07.958742", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [D2 PROGRESS] Received corrected D2 code (1004 chars) - re-validating...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:07.961164", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Validation attempt 2/8", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:08.496991", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [D2 PROGRESS] All D2 diagrams validated successfully!", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:08.499014", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [D2 PROGRESS] Rendering diagrams to SVG...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:08.501036", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Pre-rendering D2 diagram #1 (995 chars)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:09.067892", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Saved D2 diagram to: backend\\static\\d2_diagrams\\d2_diagram_20251020_121609_c96b360d.svg", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:09.069283", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "D2 diagrams pre-rendered successfully", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:09.070313", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [D2 PROGRESS] D2 diagrams rendered and ready for display!", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:09.070313", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 21296 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:09.071294", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Using agent prompt for question: create a d2 diagram of a iphone app...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:09.072296", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt length: 5602 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:09.075313", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt preview: ---\ntitle: \"D2 Diagram Generation Expert (Reinforced)\"\ndescription: \"Generate D2 Diagrams\"\ncategory: [\"Code Review\", \"Software Development\", \"Quality Assurance\"]\nauthor: \"Eric M\"\ncreated: \"2025-09-27\"...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:09.076310", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Question contains diagram keywords", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:09.077361", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response preview: <div class=\"d2-diagram-container\" style=\"margin: 16px 0;\">\n<div style=\"display: inline-flex; align-items: center; gap: 6px; padding: 6px 12px; background: linear-gradient(135deg, #10b981 0%, #059669 100%); border-radius: 6px; margin-bottom: 12px; font-size: 12px; font-weight: 500; color: white;\">\n  <span style=\"font-size: 14px;\">✅</span>\n  <span>D2 Diagram Rendered Successfully</span>\n</div>\n  <div class=\"d2-rendered-diagram\">\n    <?xml version=\"1.0\" encoding=\"utf-8\"?><svg xmlns=\"http://www.w3.o...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:09.080308", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response does NOT contain Mermaid code block", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:09.081312", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 13.104s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:09.083310", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:09.084309", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:09.106984", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 13.10s using 2014 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:09.109515", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:09.147377", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Loaded conversation history: C:\\Code2025\\Whysper\\history\\20251020-121526_4dfa223f-2f18-4508-8bd7-d24714aa5be9.json", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:09.157632", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251020-121526_4dfa223f-2f18-4508-8bd7-d24714aa5be9.json (4 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:09.158603", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (4 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:09.162875", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:09.191082", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33548, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:09.474809", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-33"}}
{"timestamp": "2025-10-20T12:16:09.480810", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-34"}}
{"timestamp": "2025-10-20T12:16:11.777829", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41"}}
{"timestamp": "2025-10-20T12:16:11.784675", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-42"}}
{"timestamp": "2025-10-20T12:16:44.489485", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:44.493644", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'create a mermaid diagram of a iphone app', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:44.497581", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: create a mermaid diagram of a iphone app", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:44.500739", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:44.505028", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:44.512417", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:44.517341", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Retrieved existing session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:44.535372", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:44.539375", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:44.540375", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:44.543489", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:44.544999", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:44.547019", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:44.554679", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:44.556399", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is follow-up message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:44.556399", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:44.558573", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:44.559981", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:44.559981", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:44.565404", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=False)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:44.572124", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Detected Mermaid diagram request, loading mermaid-architecture.md prompt", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:44.574283", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Auto-detected diagram request, using agent prompt: ---\ntitle: \"Mermaid Diagram Generation Expert (Rei...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:44.575300", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:44.577316", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:44.578298", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: False, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:44.579339", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:44.582363", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:44.583359", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:16:44.584359", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:17:08.576612", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1760980610-91ybQ0bmBO2qe99qKpHk\",\n  \"provider\": \"Novita\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1760980610,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```mermaid\\ngraph TD\\n    %% Main App Structure\\n    A[Main App] --> B[Home Screen]\\n    A --> C[Settings]\\n    A --> D[Profile]\\n    A --> E[Notifications]\\n    \\n    %% Home Screen Components\\n    B --> B1[Navigation Bar]\\n    B --> B2[Search Bar]\\n    B --> B3[Content Area]\\n    B --> B4[Bottom Navigation]\\n    \\n    %% Content Area Components\\n    B3 --> B31[Product List]\\n    B3 --> B32[Promo Banner]\\n    B3 --> B33[Categories]\\n    \\n    %% Product List Components\\n    B31 --> B311[Product Card]\\n    B31 --> B312[Product Card]\\n    B31 --> B313[Product Card]\\n    \\n    %% Product Card Components\\n    B311 --> ", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:17:08.577775", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 4519 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:17:08.578768", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```mermaid\ngraph TD\n    %% Main App Structure\n    A[Main App] --> B[Home Screen]\n    A --> C[Settings]\n    A --> D[Profile]\n    A --> E[Notifications]\n    \n    %% Home Screen Components\n    B --> B1[N", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:17:08.578768", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 4519 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:17:08.579772", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No D2 diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:17:08.580772", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 4519 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:17:08.580772", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Using agent prompt for question: create a mermaid diagram of a iphone app...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:17:08.582772", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt length: 7435 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:17:08.583776", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt preview: ---\ntitle: \"Mermaid Diagram Generation Expert (Reinforced)\"\ndescription: \"Generate Mermaid Diagrams\"\ncategory: [\"Code Review\", \"Software Development\", \"Quality Assurance\"]\nauthor: \"Eric M\"\ncreated: \"2...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:17:08.584770", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Question contains diagram keywords", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:17:08.584770", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response preview: ```mermaid\ngraph TD\n    %% Main App Structure\n    A[Main App] --> B[Home Screen]\n    A --> C[Settings]\n    A --> D[Profile]\n    A --> E[Notifications]\n    \n    %% Home Screen Components\n    B --> B1[Navigation Bar]\n    B --> B2[Search Bar]\n    B --> B3[Content Area]\n    B --> B4[Bottom Navigation]\n    \n    %% Content Area Components\n    B3 --> B31[Product List]\n    B3 --> B32[Promo Banner]\n    B3 --> B33[Categories]\n    \n    %% Product List Components\n    B31 --> B311[Product Card]\n    B31 --> B...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:17:08.586772", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response contains Mermaid code block", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:17:08.586772", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 24.027s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:17:08.587770", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:17:08.588780", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:17:08.823987", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 24.03s using 14105 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:17:08.824976", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:17:08.877613", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Loaded conversation history: C:\\Code2025\\Whysper\\history\\20251020-121526_4dfa223f-2f18-4508-8bd7-d24714aa5be9.json", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:17:08.886627", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251020-121526_4dfa223f-2f18-4508-8bd7-d24714aa5be9.json (6 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:17:08.887819", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (6 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:17:08.888831", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:17:08.919631", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 10808, "thread_name": "AnyIO worker thread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T12:17:09.274618", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-47"}}
{"timestamp": "2025-10-20T12:17:09.280405", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-48"}}
{"timestamp": "2025-10-20T12:17:09.288112", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-49"}}
{"timestamp": "2025-10-20T12:17:09.295129", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-50"}}
{"timestamp": "2025-10-20T12:17:09.308453", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-51"}}
{"timestamp": "2025-10-20T12:17:09.325440", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-52"}}
{"timestamp": "2025-10-20T12:17:09.335435", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-53"}}
{"timestamp": "2025-10-20T12:17:09.344436", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-54"}}
{"timestamp": "2025-10-20T12:17:09.364448", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-55"}}
{"timestamp": "2025-10-20T12:17:09.380748", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-56"}}
{"timestamp": "2025-10-20T12:17:09.390742", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-57"}}
{"timestamp": "2025-10-20T12:17:09.403423", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-58"}}
{"timestamp": "2025-10-20T12:17:09.604056", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-62"}}
{"timestamp": "2025-10-20T12:17:09.641253", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-63"}}
{"timestamp": "2025-10-20T12:17:09.668861", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-64"}}
{"timestamp": "2025-10-20T12:17:09.675905", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-65"}}
{"timestamp": "2025-10-20T12:17:09.690002", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-66"}}
{"timestamp": "2025-10-20T12:17:09.697349", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-67"}}
{"timestamp": "2025-10-20T12:17:09.706013", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-68"}}
{"timestamp": "2025-10-20T12:17:09.725978", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-69"}}
{"timestamp": "2025-10-20T12:19:43.729273", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-75"}}
{"timestamp": "2025-10-20T12:19:43.736587", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-76"}}
{"timestamp": "2025-10-20T12:19:43.747947", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-77"}}
{"timestamp": "2025-10-20T12:19:43.755570", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-78"}}
{"timestamp": "2025-10-20T12:19:43.771313", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-79"}}
{"timestamp": "2025-10-20T12:19:43.783050", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-80"}}
{"timestamp": "2025-10-20T12:19:43.796727", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-81"}}
{"timestamp": "2025-10-20T12:19:43.813060", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-82"}}
{"timestamp": "2025-10-20T12:19:43.832582", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-83"}}
{"timestamp": "2025-10-20T12:19:43.847606", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-84"}}
{"timestamp": "2025-10-20T12:19:43.865901", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-85"}}
{"timestamp": "2025-10-20T12:19:43.884058", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33000, "thread_name": "MainThread", "process": 24144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-86"}}
{"timestamp": "2025-10-20T13:13:07.417598", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39804, "thread_name": "MainThread", "process": 21892, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:13:08.089187", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39804, "thread_name": "MainThread", "process": 21892, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:13:08.090179", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39804, "thread_name": "MainThread", "process": 21892, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T13:13:08.121217", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39804, "thread_name": "MainThread", "process": 21892, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T13:13:08.121217", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39804, "thread_name": "MainThread", "process": 21892, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:13:08.122183", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39804, "thread_name": "MainThread", "process": 21892, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:13:14.421268", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39804, "thread_name": "MainThread", "process": 21892, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:13:23.556625", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32820, "thread_name": "MainThread", "process": 4928, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:13:23.931329", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32820, "thread_name": "MainThread", "process": 4928, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:13:23.932329", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32820, "thread_name": "MainThread", "process": 4928, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T13:13:23.943353", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32820, "thread_name": "MainThread", "process": 4928, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T13:13:23.943898", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32820, "thread_name": "MainThread", "process": 4928, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:13:23.944286", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32820, "thread_name": "MainThread", "process": 4928, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:13:29.622101", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32820, "thread_name": "MainThread", "process": 4928, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:13:30.120255", "level": "INFO", "logger": "whysper.app.main", "message": "Starting Whysper Web2 Backend v2.0.0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32820, "thread_name": "MainThread", "process": 4928, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T13:13:30.122301", "level": "INFO", "logger": "whysper.app.main", "message": "Server running on 0.0.0.0:8003", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32820, "thread_name": "MainThread", "process": 4928, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T13:13:30.122301", "level": "INFO", "logger": "whysper.app.main", "message": "Debug mode: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32820, "thread_name": "MainThread", "process": 4928, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T13:13:30.123268", "level": "INFO", "logger": "whysper.app.main", "message": "CORS origins: ['http://localhost:3000', 'http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:5176', 'http://localhost:5177', 'http://localhost:5178', 'http://127.0.0.1:3000', 'http://127.0.0.1:5173', 'http://127.0.0.1:5174', 'http://127.0.0.1:5175', 'http://127.0.0.1:5176', 'http://127.0.0.1:5177']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32820, "thread_name": "MainThread", "process": 4928, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T13:13:30.125269", "level": "INFO", "logger": "whysper.app.main", "message": "Real-time log broadcasting enabled - connect to GET /api/v1/logs/stream", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32820, "thread_name": "MainThread", "process": 4928, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T13:13:30.126308", "level": "INFO", "logger": "whysper.app.main", "message": "FastMCP server integration initialized", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32820, "thread_name": "MainThread", "process": 4928, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T13:13:30.127287", "level": "INFO", "logger": "whysper.app.main", "message": "MCP endpoints available at /mcp/*", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32820, "thread_name": "MainThread", "process": 4928, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T13:13:30.128269", "level": "INFO", "logger": "whysper.app.main", "message": "MCP tools: generate_diagram, render_diagram, generate_and_render", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32820, "thread_name": "MainThread", "process": 4928, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T13:13:30.129271", "level": "INFO", "logger": "whysper.app.main", "message": "MCP WebSocket endpoint: /mcp/ws", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32820, "thread_name": "MainThread", "process": 4928, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T13:13:33.044978", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32820, "thread_name": "MainThread", "process": 4928, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-4"}}
{"timestamp": "2025-10-20T13:25:53.793623", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35236, "thread_name": "MainThread", "process": 24112, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:25:54.155189", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35236, "thread_name": "MainThread", "process": 24112, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:25:54.156244", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35236, "thread_name": "MainThread", "process": 24112, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T13:25:54.201767", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35236, "thread_name": "MainThread", "process": 24112, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T13:25:54.202733", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35236, "thread_name": "MainThread", "process": 24112, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:25:54.203764", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35236, "thread_name": "MainThread", "process": 24112, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:00.335849", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35236, "thread_name": "MainThread", "process": 24112, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:07.932407", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:08.234070", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:08.235008", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T13:26:08.247090", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T13:26:08.248134", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:08.248134", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:12.498547", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:12.999818", "level": "INFO", "logger": "whysper.app.main", "message": "Starting Whysper Web2 Backend v2.0.0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T13:26:13.011815", "level": "INFO", "logger": "whysper.app.main", "message": "Server running on 0.0.0.0:8003", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T13:26:13.018814", "level": "INFO", "logger": "whysper.app.main", "message": "Debug mode: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T13:26:13.031814", "level": "INFO", "logger": "whysper.app.main", "message": "CORS origins: ['http://localhost:3000', 'http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:5176', 'http://localhost:5177', 'http://localhost:5178', 'http://127.0.0.1:3000', 'http://127.0.0.1:5173', 'http://127.0.0.1:5174', 'http://127.0.0.1:5175', 'http://127.0.0.1:5176', 'http://127.0.0.1:5177']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T13:26:13.041799", "level": "INFO", "logger": "whysper.app.main", "message": "Real-time log broadcasting enabled - connect to GET /api/v1/logs/stream", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T13:26:13.046797", "level": "INFO", "logger": "whysper.app.main", "message": "FastMCP server integration initialized", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T13:26:13.054315", "level": "INFO", "logger": "whysper.app.main", "message": "MCP endpoints available at /mcp/*", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T13:26:13.058329", "level": "INFO", "logger": "whysper.app.main", "message": "MCP tools: generate_diagram, render_diagram, generate_and_render", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T13:26:13.062673", "level": "INFO", "logger": "whysper.app.main", "message": "MCP WebSocket endpoint: /mcp/ws", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T13:26:13.217524", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-4"}}
{"timestamp": "2025-10-20T13:26:18.411446", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 Log stream client disconnected (cancelled, session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap"}}
{"timestamp": "2025-10-20T13:26:26.255490", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:26.273157", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:26.360480", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:26.384480", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:26.571006", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-11"}}
{"timestamp": "2025-10-20T13:26:26.945848", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:27.009286", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:27.040165", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:27.100455", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:27.122507", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:27.127820", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:27.183010", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:27.187898", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.478318", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.480319", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'Generate a Mermaid flowchart mapping out the control flow, decision points, loops, and execution paths for an iphone app', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.484478", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: Generate a Mermaid flowchart mapping out the control flow, decision points, loops, and execution paths for an iphone app", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.485740", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.487053", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.491308", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.499855", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Creating new conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.502939", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Creating conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.503627", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T13:26:54.529110", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T13:26:54.530113", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.532111", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initializing conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.533114", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Set default model: qwen/qwen3-coder-30b-a3b-instruct", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.535141", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initialized session logger for: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.536149", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Created new conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.538116", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Conversation session conv-1 initialized successfully", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.539114", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Setting API key for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.540112", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "API key updated for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.541113", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Session created", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.542112", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.546594", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.548613", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.550615", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.551613", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.552817", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.555298", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.556306", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is first message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.558299", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "First question has no file context in session conv-1 - proceeding without code context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.558811", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.560825", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.565825", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.566827", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.569384", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=True)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.573398", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Detected Mermaid diagram request, loading mermaid-architecture.md prompt", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.574396", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Auto-detected diagram request, using agent prompt: ---\ntitle: \"Mermaid Diagram Generation Expert (Rei...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.576401", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.577399", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.579397", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: True, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.580399", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.581398", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.585487", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "⚠️ First message but NO SELECTED FILES", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.586614", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:26:54.586614", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:27:00.743549", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1760984819-lu16PeA6WmSxk3eZ4bXC\",\n  \"provider\": \"DeepInfra\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1760984819,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"Here's a Mermaid flowchart that maps out the control flow of an iPhone app, including key decision points, loops, and execution paths:\\n\\n```mermaid\\nflowchart TD\\n    A[App Launch] --> B{App State}\\n    B -->|First Launch| C[Show Onboarding]\\n    B -->|Normal Launch| D[Load App Data]\\n    \\n    C --> E[Show Welcome Screen]\\n    E --> F[User Interaction]\\n    F --> G{User Completes Onboarding?}\\n    G -->|Yes| H[Save Setup Preferences]\\n    G -->|No| I[Show Next Onboarding Screen]\\n    I --> F\\n    \\n    H --> D\\n    D --> J{Data Loaded Successfully?}\\n    J -->|Yes| K[Show Main Interface]\\n    J -->|No| L[Show E", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:27:00.747024", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 3382 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:27:00.749033", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: Here's a Mermaid flowchart that maps out the control flow of an iPhone app, including key decision points, loops, and execution paths:\n\n```mermaid\nflowchart TD\n    A[App Launch] --> B{App State}\n    B", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:27:00.750022", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 3382 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:27:00.757132", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No D2 diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:27:00.758097", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 3382 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:27:00.759094", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Using agent prompt for question: Generate a Mermaid flowchart mapping out the control flow, decision points, loops, and execution pat...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:27:00.761095", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt length: 7435 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:27:00.763442", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt preview: ---\ntitle: \"Mermaid Diagram Generation Expert (Reinforced)\"\ndescription: \"Generate Mermaid Diagrams\"\ncategory: [\"Code Review\", \"Software Development\", \"Quality Assurance\"]\nauthor: \"Eric M\"\ncreated: \"2...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:27:00.764443", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Question contains diagram keywords", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:27:00.765443", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response preview: Here's a Mermaid flowchart that maps out the control flow of an iPhone app, including key decision points, loops, and execution paths:\n\n```mermaid\nflowchart TD\n    A[App Launch] --> B{App State}\n    B -->|First Launch| C[Show Onboarding]\n    B -->|Normal Launch| D[Load App Data]\n    \n    C --> E[Show Welcome Screen]\n    E --> F[User Interaction]\n    F --> G{User Completes Onboarding?}\n    G -->|Yes| H[Save Setup Preferences]\n    G -->|No| I[Show Next Onboarding Screen]\n    I --> F\n    \n    H -->...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:27:00.767443", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response contains Mermaid code block", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:27:00.768441", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 6.202s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:27:00.769441", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:27:00.769441", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:27:00.932217", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 6.20s using 919 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:27:00.933220", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:27:00.934220", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "Created new GUID 782d5889-144c-4456-b981-6af4509f7177 for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:27:00.935228", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "No history file found for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:27:00.938222", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251020-132700_782d5889-144c-4456-b981-6af4509f7177.json (2 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:27:00.939217", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (2 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:27:00.940352", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:27:00.966908", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8548, "thread_name": "AnyIO worker thread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:27:01.579864", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-31"}}
{"timestamp": "2025-10-20T13:27:01.583864", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-32"}}
{"timestamp": "2025-10-20T13:27:01.588223", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-33"}}
{"timestamp": "2025-10-20T13:27:01.595923", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-34"}}
{"timestamp": "2025-10-20T13:27:01.601946", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-35"}}
{"timestamp": "2025-10-20T13:27:01.608215", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-36"}}
{"timestamp": "2025-10-20T13:27:01.616843", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-37"}}
{"timestamp": "2025-10-20T13:27:01.623311", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-38"}}
{"timestamp": "2025-10-20T13:27:01.632667", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-39"}}
{"timestamp": "2025-10-20T13:27:01.640272", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-40"}}
{"timestamp": "2025-10-20T13:27:01.666051", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41"}}
{"timestamp": "2025-10-20T13:27:01.687375", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-42"}}
{"timestamp": "2025-10-20T13:27:01.696373", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-44"}}
{"timestamp": "2025-10-20T13:27:01.703585", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-45"}}
{"timestamp": "2025-10-20T13:27:01.710490", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-46"}}
{"timestamp": "2025-10-20T13:27:01.718277", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-47"}}
{"timestamp": "2025-10-20T13:27:01.723189", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-48"}}
{"timestamp": "2025-10-20T13:27:01.733007", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-49"}}
{"timestamp": "2025-10-20T13:27:01.742786", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-50"}}
{"timestamp": "2025-10-20T13:27:01.750757", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-51"}}
{"timestamp": "2025-10-20T13:27:01.755758", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-52"}}
{"timestamp": "2025-10-20T13:27:01.761202", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-53"}}
{"timestamp": "2025-10-20T13:27:01.771229", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-54"}}
{"timestamp": "2025-10-20T13:27:01.776995", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-55"}}
{"timestamp": "2025-10-20T13:27:02.465580", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-56"}}
{"timestamp": "2025-10-20T13:27:02.811341", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-57"}}
{"timestamp": "2025-10-20T13:27:03.162691", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-58"}}
{"timestamp": "2025-10-20T13:27:03.468988", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-59"}}
{"timestamp": "2025-10-20T13:27:31.560270", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-66"}}
{"timestamp": "2025-10-20T13:27:31.574766", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-67"}}
{"timestamp": "2025-10-20T13:27:31.590719", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-68"}}
{"timestamp": "2025-10-20T13:27:31.735383", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-69"}}
{"timestamp": "2025-10-20T13:27:34.592922", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70"}}
{"timestamp": "2025-10-20T13:27:34.610303", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-71"}}
{"timestamp": "2025-10-20T13:27:34.676840", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-72"}}
{"timestamp": "2025-10-20T13:27:34.708782", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-73"}}
{"timestamp": "2025-10-20T13:32:55.471926", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-99"}}
{"timestamp": "2025-10-20T13:32:55.494842", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-100"}}
{"timestamp": "2025-10-20T13:32:55.522911", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-101"}}
{"timestamp": "2025-10-20T13:32:55.540321", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-102"}}
{"timestamp": "2025-10-20T13:32:55.637978", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-103"}}
{"timestamp": "2025-10-20T13:32:55.652701", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-104"}}
{"timestamp": "2025-10-20T13:32:55.684505", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-105"}}
{"timestamp": "2025-10-20T13:32:55.723754", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-106"}}
{"timestamp": "2025-10-20T13:41:35.989623", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 Log stream client disconnected (cancelled, session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap"}}
{"timestamp": "2025-10-20T13:41:36.088418", "level": "INFO", "logger": "whysper.app.main", "message": "Shutting down Whysper Web2 Backend", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41592, "thread_name": "MainThread", "process": 8696, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T13:42:16.757342", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31404, "thread_name": "MainThread", "process": 18668, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:42:17.058656", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31404, "thread_name": "MainThread", "process": 18668, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:42:17.058656", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31404, "thread_name": "MainThread", "process": 18668, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T13:42:17.073709", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31404, "thread_name": "MainThread", "process": 18668, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T13:42:17.074706", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31404, "thread_name": "MainThread", "process": 18668, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:42:17.075685", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31404, "thread_name": "MainThread", "process": 18668, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:42:22.589131", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31404, "thread_name": "MainThread", "process": 18668, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:42:30.494999", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:42:30.828505", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:42:30.829484", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T13:42:30.843492", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T13:42:30.844490", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:42:30.845492", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:42:36.405143", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:42:36.914859", "level": "INFO", "logger": "whysper.app.main", "message": "Starting Whysper Web2 Backend v2.0.0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T13:42:36.916874", "level": "INFO", "logger": "whysper.app.main", "message": "Server running on 0.0.0.0:8003", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T13:42:36.916874", "level": "INFO", "logger": "whysper.app.main", "message": "Debug mode: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T13:42:36.917874", "level": "INFO", "logger": "whysper.app.main", "message": "CORS origins: ['http://localhost:3000', 'http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:5176', 'http://localhost:5177', 'http://localhost:5178', 'http://127.0.0.1:3000', 'http://127.0.0.1:5173', 'http://127.0.0.1:5174', 'http://127.0.0.1:5175', 'http://127.0.0.1:5176', 'http://127.0.0.1:5177']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T13:42:36.918875", "level": "INFO", "logger": "whysper.app.main", "message": "Real-time log broadcasting enabled - connect to GET /api/v1/logs/stream", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T13:42:36.919875", "level": "INFO", "logger": "whysper.app.main", "message": "FastMCP server integration initialized", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T13:42:36.919875", "level": "INFO", "logger": "whysper.app.main", "message": "MCP endpoints available at /mcp/*", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T13:42:36.920940", "level": "INFO", "logger": "whysper.app.main", "message": "MCP tools: generate_diagram, render_diagram, generate_and_render", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T13:42:36.922302", "level": "INFO", "logger": "whysper.app.main", "message": "MCP WebSocket endpoint: /mcp/ws", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T13:46:17.649840", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:17.651843", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:17.659856", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:17.662673", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:17.711096", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:17.726926", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:17.737446", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:17.754028", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:17.899284", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:17.915056", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:17.954158", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:17.967675", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:22.721559", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-15"}}
{"timestamp": "2025-10-20T13:46:42.462753", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.463733", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'create a mermaid diagram for a iphone app', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.465735", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: create a mermaid diagram for a iphone app", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.466733", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.470263", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.472264", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.475965", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Creating new conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.477998", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Creating conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.479003", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T13:46:42.508671", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T13:46:42.510673", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.512671", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initializing conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.513974", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Set default model: qwen/qwen3-coder-30b-a3b-instruct", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.517491", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initialized session logger for: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.518994", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Created new conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.520009", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Conversation session conv-1 initialized successfully", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.522632", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Setting API key for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.524925", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "API key updated for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.527280", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Session created", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.528279", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.529279", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Provider update skipped - same or empty provider: 'openrouter'", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.532068", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating model to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.536180", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Model updated", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.537204", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Model changed to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.539200", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.541197", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Using agent prompt: You are a helpful AI assistant specialized in code analysis and development....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.543198", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.546600", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.548770", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.553004", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.556137", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.562576", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is first message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.563569", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "First question has no file context in session conv-1 - proceeding without code context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.570716", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.572721", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.574812", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.576139", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.577181", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=True)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.579216", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.581214", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.583666", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: True, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.585889", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.587914", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.589915", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "⚠️ First message but NO SELECTED FILES", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.592564", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:42.602929", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:48.267251", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1760986008-Ip13zSiP4x0NhjAVy7cH\",\n  \"provider\": \"SiliconFlow\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1760986008,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"Here's a Mermaid diagram representing an iPhone app architecture with key components and their interactions:\\n\\n```mermaid\\ngraph TD\\n    %% Main App Components\\n    A[UIKit/App Delegate] --> B[Scene Delegate]\\n    B --> C[Main View Controller]\\n    C --> D[Navigation Controller]\\n    D --> E[Tab Bar Controller]\\n    \\n    %% Tab Views\\n    E --> F[Home Tab]\\n    E --> G[Search Tab]\\n    E --> H[Profile Tab]\\n    \\n    %% Home Tab Components\\n    F --> I[Home View Controller]\\n    I --> J[Product Collection View]\\n    J --> K[Product Cell]\\n    I --> L[Featured Banner]\\n    \\n    %% Search Tab Components\\n    G", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:48.271239", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 2610 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:48.272811", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: Here's a Mermaid diagram representing an iPhone app architecture with key components and their interactions:\n\n```mermaid\ngraph TD\n    %% Main App Components\n    A[UIKit/App Delegate] --> B[Scene Deleg", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:48.273814", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 2610 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:48.280000", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No D2 diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:48.281131", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 2610 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:48.284927", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 [MERMAID PROGRESS] Found 1 Mermaid diagram(s) - validating syntax...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:48.285957", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "[MERMAID PROGRESS] Validation attempt 1/5", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:54.582492", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [MERMAID PROGRESS] All Mermaid diagrams validated successfully!", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:54.584683", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After Mermaid validation/fix: 2610 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:54.586734", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Using agent prompt for question: create a mermaid diagram for a iphone app...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:54.587779", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt length: 76 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:54.590205", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt preview: You are a helpful AI assistant specialized in code analysis and development....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:54.591201", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Question contains diagram keywords", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:54.592625", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response preview: Here's a Mermaid diagram representing an iPhone app architecture with key components and their interactions:\n\n```mermaid\ngraph TD\n    %% Main App Components\n    A[UIKit/App Delegate] --> B[Scene Delegate]\n    B --> C[Main View Controller]\n    C --> D[Navigation Controller]\n    D --> E[Tab Bar Controller]\n    \n    %% Tab Views\n    E --> F[Home Tab]\n    E --> G[Search Tab]\n    E --> H[Profile Tab]\n    \n    %% Home Tab Components\n    F --> I[Home View Controller]\n    I --> J[Product Collection View...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:54.595007", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response contains Mermaid code block", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:54.596060", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 12.020s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:54.597076", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:54.598560", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:54.922780", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 12.02s using 743 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:54.928502", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:54.935842", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "Created new GUID dd53bc0a-a42d-4fe1-a663-bed2854900dc for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:54.941845", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "No history file found for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:54.948503", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251020-134654_dd53bc0a-a42d-4fe1-a663-bed2854900dc.json (2 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:54.951520", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (2 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:54.952540", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:55.001697", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:46:55.406441", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-29"}}
{"timestamp": "2025-10-20T13:46:55.416078", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-30"}}
{"timestamp": "2025-10-20T13:46:55.421597", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-31"}}
{"timestamp": "2025-10-20T13:46:55.426997", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-32"}}
{"timestamp": "2025-10-20T13:46:55.436586", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-33"}}
{"timestamp": "2025-10-20T13:46:55.444256", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-34"}}
{"timestamp": "2025-10-20T13:46:55.452930", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-35"}}
{"timestamp": "2025-10-20T13:46:55.459928", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-36"}}
{"timestamp": "2025-10-20T13:46:55.471716", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-37"}}
{"timestamp": "2025-10-20T13:46:55.485934", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-38"}}
{"timestamp": "2025-10-20T13:46:55.656587", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-39"}}
{"timestamp": "2025-10-20T13:46:55.709678", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-40"}}
{"timestamp": "2025-10-20T13:46:55.720692", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41"}}
{"timestamp": "2025-10-20T13:46:55.730939", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-43"}}
{"timestamp": "2025-10-20T13:46:55.744270", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-44"}}
{"timestamp": "2025-10-20T13:46:55.758510", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-45"}}
{"timestamp": "2025-10-20T13:46:55.771387", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-46"}}
{"timestamp": "2025-10-20T13:46:55.776980", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-47"}}
{"timestamp": "2025-10-20T13:46:55.786784", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-48"}}
{"timestamp": "2025-10-20T13:46:55.793794", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-49"}}
{"timestamp": "2025-10-20T13:46:56.118930", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-50"}}
{"timestamp": "2025-10-20T13:46:56.437928", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-51"}}
{"timestamp": "2025-10-20T13:46:56.632106", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-52"}}
{"timestamp": "2025-10-20T13:46:56.888451", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-53"}}
{"timestamp": "2025-10-20T13:47:25.021821", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-60"}}
{"timestamp": "2025-10-20T13:47:25.032009", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-61"}}
{"timestamp": "2025-10-20T13:47:25.044488", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-62"}}
{"timestamp": "2025-10-20T13:47:25.053973", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-63"}}
{"timestamp": "2025-10-20T13:47:25.068934", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-64"}}
{"timestamp": "2025-10-20T13:47:25.079169", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-65"}}
{"timestamp": "2025-10-20T13:47:25.086051", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-66"}}
{"timestamp": "2025-10-20T13:47:25.093049", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-67"}}
{"timestamp": "2025-10-20T13:49:18.263911", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-79"}}
{"timestamp": "2025-10-20T13:49:18.267920", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-80"}}
{"timestamp": "2025-10-20T13:49:18.270286", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-81"}}
{"timestamp": "2025-10-20T13:49:18.272504", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-82"}}
{"timestamp": "2025-10-20T13:49:18.276707", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-83"}}
{"timestamp": "2025-10-20T13:49:18.290252", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-84"}}
{"timestamp": "2025-10-20T13:49:18.301322", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-85"}}
{"timestamp": "2025-10-20T13:49:18.306295", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35608, "thread_name": "MainThread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-86"}}
{"timestamp": "2025-10-20T13:49:41.916432", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:41.917434", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'create a d2 diagram of a iphone app', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:41.919394", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: create a d2 diagram of a iphone app", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:41.920403", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:41.921414", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:41.922408", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:41.924469", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Retrieved existing session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:41.924469", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:41.926411", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Provider update skipped - same or empty provider: 'openrouter'", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:41.926411", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating model to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:41.927732", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Model updated", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:41.928601", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Model changed to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:41.929621", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:41.931773", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Using agent prompt: You are a helpful AI assistant specialized in code analysis and development....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:41.931773", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:41.933786", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:41.935796", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:41.937081", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:41.937599", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:41.940168", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is follow-up message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:41.942300", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:41.943769", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:41.944278", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:41.946352", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:41.948400", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=False)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:41.950378", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:41.952809", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:41.952809", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: False, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:41.955055", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:41.956179", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:41.957225", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:41.957225", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:50.097951", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1760986187-ojDv8nkB3oPHwPMOVTqs\",\n  \"provider\": \"Nebius\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1760986187,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```d2\\n// iPhone App Architecture Diagram\\n\\n// App Container\\napp: {\\n  // Main App Structure\\n  main_view_controller: {\\n    label: \\\"Main View Controller\\\"\\n    style: filled\\n    color: \\\"#4CAF50\\\"\\n  }\\n  \\n  navigation_controller: {\\n    label: \\\"Navigation Controller\\\"\\n    style: filled\\n    color: \\\"#2196F3\\\"\\n  }\\n  \\n  tab_bar_controller: {\\n    label: \\\"Tab Bar Controller\\\"\\n    style: filled\\n    color: \\\"#FF9800\\\"\\n  }\\n  \\n  // Tab Views\\n  home_tab: {\\n    label: \\\"Home Tab\\\"\\n    style: filled\\n    color: \\\"#E91E63\\\"\\n  }\\n  \\n  search_tab: {\\n    label: \\\"Search Tab\\\"\\n    style: filled\\n    color:", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:50.101933", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 3628 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:50.102931", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```d2\n// iPhone App Architecture Diagram\n\n// App Container\napp: {\n  // Main App Structure\n  main_view_controller: {\n    label: \"Main View Controller\"\n    style: filled\n    color: \"#4CAF50\"\n  }\n  \n  na", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:50.106192", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 3628 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:50.108233", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 [D2 PROGRESS] Found 1 D2 diagram(s) - validating syntax...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:50.429060", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Validation attempt 1/8", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:50.618335", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "D2 diagram #1 validation failed: debug: using theme Neutral Default (ID: 0)\nerr: failed to compile ..\\..\\..\\Users\\Hack\\AppData\\Local\\Temp\\tmp5ntnue0u.d2: C:\\Users\\Hack\\AppData\\Local\\Temp\\tmp5ntnue0u.d2:8:5: \"style\" expected to be set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:50.620296", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔧 [D2 PROGRESS] Validation errors found - requesting AI auto-fix (attempt 1/8)...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:57.596529", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1760986195-sWWgWlDaQOvBXUVImYG8\",\n  \"provider\": \"Nebius\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1760986195,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```d2\\n// Main App Components\\n\\\"UIKit/App Delegate\\\" -> \\\"Scene Delegate\\\"\\n\\\"Scene Delegate\\\" -> \\\"Main View Controller\\\"\\n\\\"Main View Controller\\\" -> \\\"Navigation Controller\\\"\\n\\\"Navigation Controller\\\" -> \\\"Tab Bar Controller\\\"\\n\\n// Tab Views\\n\\\"Tab Bar Controller\\\" -> \\\"Home Tab\\\"\\n\\\"Tab Bar Controller\\\" -> \\\"Search Tab\\\"\\n\\\"Tab Bar Controller\\\" -> \\\"Profile Tab\\\"\\n\\n// Home Tab Components\\n\\\"Home Tab\\\" -> \\\"Home View Controller\\\"\\n\\\"Home View Controller\\\" -> \\\"Product Collection View\\\"\\n\\\"Product Collection View\\\" -> \\\"Product Cell\\\"\\n\\\"Home View Controller\\\" -> \\\"Featured Banner\\\"\\n\\n// Search Tab Components", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:57.598530", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 3048 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:57.598530", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```d2\n// Main App Components\n\"UIKit/App Delegate\" -> \"Scene Delegate\"\n\"Scene Delegate\" -> \"Main View Controller\"\n\"Main View Controller\" -> \"Navigation Controller\"\n\"Navigation Controller\" -> \"Tab Bar C", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:57.600545", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [D2 PROGRESS] Received corrected D2 code (3048 chars) - re-validating...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:57.602047", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Validation attempt 2/8", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:57.764110", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "D2 diagram #1 validation failed: debug: using theme Neutral Default (ID: 0)\nerr: failed to compile ..\\..\\..\\Users\\Hack\\AppData\\Local\\Temp\\tmp7vkook90.d2: C:\\Users\\Hack\\AppData\\Local\\Temp\\tmp7vkook90.d2:52:3: \"style\" expected to be se", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:49:57.765361", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔧 [D2 PROGRESS] Validation errors found - requesting AI auto-fix (attempt 2/8)...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:50:08.692054", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1760986203-o9P711uqedZTEZoQKAwr\",\n  \"provider\": \"Novita\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1760986203,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```d2\\n{\\n  \\\"App\\\": {\\n    \\\"shape\\\": \\\"rectangle\\\",\\n    \\\"style\\\": \\\"filled\\\",\\n    \\\"fill\\\": \\\"#4CAF50\\\"\\n  },\\n  \\\"Scene Delegate\\\": {\\n    \\\"shape\\\": \\\"rectangle\\\",\\n    \\\"style\\\": \\\"filled\\\",\\n    \\\"fill\\\": \\\"#2196F3\\\"\\n  },\\n  \\\"Main View Controller\\\": {\\n    \\\"shape\\\": \\\"rectangle\\\",\\n    \\\"style\\\": \\\"filled\\\",\\n    \\\"fill\\\": \\\"#2196F3\\\"\\n  },\\n  \\\"Navigation Controller\\\": {\\n    \\\"shape\\\": \\\"rectangle\\\",\\n    \\\"style\\\": \\\"filled\\\",\\n    \\\"fill\\\": \\\"#2196F3\\\"\\n  },\\n  \\\"Tab Bar Controller\\\": {\\n    \\\"shape\\\": \\\"rectangle\\\",\\n    \\\"style\\\": \\\"filled\\\",\\n    \\\"fill\\\": \\\"#2196F3\\\"\\n  },\\n  \\\"Home Tab\\\": {\\n   ", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:50:08.694567", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 3776 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:50:08.695586", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```d2\n{\n  \"App\": {\n    \"shape\": \"rectangle\",\n    \"style\": \"filled\",\n    \"fill\": \"#4CAF50\"\n  },\n  \"Scene Delegate\": {\n    \"shape\": \"rectangle\",\n    \"style\": \"filled\",\n    \"fill\": \"#2196F3\"\n  },\n  \"Main", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:50:08.698587", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [D2 PROGRESS] Received corrected D2 code (3776 chars) - re-validating...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:50:08.703053", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Validation attempt 3/8", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:50:09.050474", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "D2 diagram #1 validation failed: debug: using theme Neutral Default (ID: 0)\nerr: failed to compile ..\\..\\..\\Users\\Hack\\AppData\\Local\\Temp\\tmp7dxc2xml.d2: C:\\Users\\Hack\\AppData\\Local\\Temp\\tmp7dxc2xml.d2:1:1: invalid text beginning unq", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:50:09.052886", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔧 [D2 PROGRESS] Validation errors found - requesting AI auto-fix (attempt 3/8)...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:50:14.496354", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1760986214-3m2l2DD2GlOUsFuRPXVN\",\n  \"provider\": \"SiliconFlow\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1760986214,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```d2\\n// Main App Components\\n\\\"UIKit/App Delegate\\\" -> \\\"Scene Delegate\\\"\\n\\\"Scene Delegate\\\" -> \\\"Main View Controller\\\"\\n\\\"Main View Controller\\\" -> \\\"Navigation Controller\\\"\\n\\\"Navigation Controller\\\" -> \\\"Tab Bar Controller\\\"\\n\\n// Tab Views\\n\\\"Tab Bar Controller\\\" -> \\\"Home Tab\\\"\\n\\\"Tab Bar Controller\\\" -> \\\"Search Tab\\\"\\n\\\"Tab Bar Controller\\\" -> \\\"Profile Tab\\\"\\n\\n// Home Tab Components\\n\\\"Home Tab\\\" -> \\\"Home View Controller\\\"\\n\\\"Home View Controller\\\" -> \\\"Product Collection View\\\"\\n\\\"Product Collection View\\\" -> \\\"Product Cell\\\"\\n\\\"Home View Controller\\\" -> \\\"Featured Banner\\\"\\n\\n// Search Tab Compo", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:50:14.497473", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 1470 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:50:14.498369", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```d2\n// Main App Components\n\"UIKit/App Delegate\" -> \"Scene Delegate\"\n\"Scene Delegate\" -> \"Main View Controller\"\n\"Main View Controller\" -> \"Navigation Controller\"\n\"Navigation Controller\" -> \"Tab Bar C", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:50:14.499387", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [D2 PROGRESS] Received corrected D2 code (1470 chars) - re-validating...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:50:14.499387", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Validation attempt 4/8", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:50:15.426969", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [D2 PROGRESS] All D2 diagrams validated successfully!", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:50:15.428191", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [D2 PROGRESS] Rendering diagrams to SVG...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:50:15.430658", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Pre-rendering D2 diagram #1 (1461 chars)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:50:16.345695", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Saved D2 diagram to: backend\\static\\d2_diagrams\\d2_diagram_20251020_135016_9153ccba.svg", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:50:16.346685", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "D2 diagrams pre-rendered successfully", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:50:16.347685", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [D2 PROGRESS] D2 diagrams rendered and ready for display!", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:50:16.348687", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 38628 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:50:16.350690", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No Mermaid diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:50:16.351694", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After Mermaid validation/fix: 38628 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:50:16.352691", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Using agent prompt for question: create a d2 diagram of a iphone app...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:50:16.353694", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt length: 76 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:50:16.354701", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt preview: You are a helpful AI assistant specialized in code analysis and development....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:50:16.355700", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Question contains diagram keywords", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:50:16.358766", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response preview: <div class=\"d2-diagram-container\" style=\"margin: 16px 0;\">\n<div style=\"display: inline-flex; align-items: center; gap: 6px; padding: 6px 12px; background: linear-gradient(135deg, #10b981 0%, #059669 100%); border-radius: 6px; margin-bottom: 12px; font-size: 12px; font-weight: 500; color: white;\">\n  <span style=\"font-size: 14px;\">✅</span>\n  <span>D2 Diagram Rendered Successfully</span>\n</div>\n  <div class=\"d2-rendered-diagram\">\n    <?xml version=\"1.0\" encoding=\"utf-8\"?><svg xmlns=\"http://www.w3.o...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:50:16.359764", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response does NOT contain Mermaid code block", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:50:16.361209", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 34.415s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:50:16.362223", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:50:16.363471", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:50:16.384007", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 34.41s using 3893 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:50:16.386006", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:50:16.417804", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Loaded conversation history: C:\\Code2025\\Whysper\\history\\20251020-134654_dd53bc0a-a42d-4fe1-a663-bed2854900dc.json", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:50:16.423334", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251020-134654_dd53bc0a-a42d-4fe1-a663-bed2854900dc.json (4 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:50:16.424334", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (4 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:50:16.425340", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:50:16.453886", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41764, "thread_name": "AnyIO worker thread", "process": 20120, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:56:56.798780", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33620, "thread_name": "MainThread", "process": 27204, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:56:57.143373", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33620, "thread_name": "MainThread", "process": 27204, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:56:57.143373", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33620, "thread_name": "MainThread", "process": 27204, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T13:56:57.166176", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33620, "thread_name": "MainThread", "process": 27204, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T13:56:57.167162", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33620, "thread_name": "MainThread", "process": 27204, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:56:57.168149", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33620, "thread_name": "MainThread", "process": 27204, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:57:02.083128", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33620, "thread_name": "MainThread", "process": 27204, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:57:09.535183", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31540, "thread_name": "MainThread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:57:09.867569", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31540, "thread_name": "MainThread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:57:09.868723", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31540, "thread_name": "MainThread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T13:57:09.880796", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31540, "thread_name": "MainThread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T13:57:09.881805", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31540, "thread_name": "MainThread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:57:09.882751", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31540, "thread_name": "MainThread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:57:14.752571", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31540, "thread_name": "MainThread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:57:15.270941", "level": "INFO", "logger": "whysper.app.main", "message": "Starting Whysper Web2 Backend v2.0.0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31540, "thread_name": "MainThread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T13:57:15.271916", "level": "INFO", "logger": "whysper.app.main", "message": "Server running on 0.0.0.0:8003", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31540, "thread_name": "MainThread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T13:57:15.272916", "level": "INFO", "logger": "whysper.app.main", "message": "Debug mode: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31540, "thread_name": "MainThread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T13:57:15.273947", "level": "INFO", "logger": "whysper.app.main", "message": "CORS origins: ['http://localhost:3000', 'http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:5176', 'http://localhost:5177', 'http://localhost:5178', 'http://127.0.0.1:3000', 'http://127.0.0.1:5173', 'http://127.0.0.1:5174', 'http://127.0.0.1:5175', 'http://127.0.0.1:5176', 'http://127.0.0.1:5177']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31540, "thread_name": "MainThread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T13:57:15.276472", "level": "INFO", "logger": "whysper.app.main", "message": "Real-time log broadcasting enabled - connect to GET /api/v1/logs/stream", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31540, "thread_name": "MainThread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T13:57:15.277493", "level": "INFO", "logger": "whysper.app.main", "message": "FastMCP server integration initialized", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31540, "thread_name": "MainThread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T13:57:15.278507", "level": "INFO", "logger": "whysper.app.main", "message": "MCP endpoints available at /mcp/*", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31540, "thread_name": "MainThread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T13:57:15.279469", "level": "INFO", "logger": "whysper.app.main", "message": "MCP tools: generate_diagram, render_diagram, generate_and_render", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31540, "thread_name": "MainThread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T13:57:15.279469", "level": "INFO", "logger": "whysper.app.main", "message": "MCP WebSocket endpoint: /mcp/ws", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31540, "thread_name": "MainThread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T13:58:56.183543", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31540, "thread_name": "MainThread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-12"}}
{"timestamp": "2025-10-20T13:58:56.198090", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 4060, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:58:56.198090", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:58:56.206739", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 4060, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:58:56.208736", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:58:56.320699", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 4060, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:58:56.320699", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:58:56.343826", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:58:56.349828", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 4060, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:58:57.060069", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 4060, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:58:57.060069", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:58:57.063069", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 4060, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T13:58:57.070071", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:04.983310", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:04.984226", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'create a d2 diagram of an iphone app', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:04.984226", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: create a d2 diagram of an iphone app", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:04.987226", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:04.987226", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:04.988635", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:04.991720", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Creating new conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:04.992758", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Creating conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:04.994721", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T14:00:05.024397", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T14:00:05.026339", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:05.027339", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initializing conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:05.028350", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Set default model: qwen/qwen3-coder-30b-a3b-instruct", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:05.030340", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initialized session logger for: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:05.032491", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Created new conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:05.033875", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Conversation session conv-1 initialized successfully", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:05.035625", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Setting API key for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:05.036638", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "API key updated for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:05.038786", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Session created", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:05.040787", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:05.042784", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:05.043900", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:05.045914", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:05.047402", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:05.057396", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:05.058395", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:05.063787", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is first message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:05.065792", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "First question has no file context in session conv-1 - proceeding without code context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:05.068326", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:05.069332", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:05.070609", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:05.073055", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:05.076058", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=True)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:05.081196", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Detected D2 diagram request, loading d2-architecture.md prompt", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:05.082198", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Auto-detected diagram request, using agent prompt: ---\ntitle: \"D2 Diagram Generation Expert (Reinforc...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:05.084194", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:05.085194", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:05.087196", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: True, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:05.089193", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:05.090195", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:05.091376", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "⚠️ First message but NO SELECTED FILES", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:05.093743", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:05.094760", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:00:08.593823", "level": "ERROR", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Error processing chat message: OpenRouter API key is invalid or expired", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22292, "thread_name": "AnyIO worker thread", "process": 38608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:02:41.062676", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26684, "thread_name": "MainThread", "process": 33144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:02:41.498524", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26684, "thread_name": "MainThread", "process": 33144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:02:41.499567", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26684, "thread_name": "MainThread", "process": 33144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T14:02:41.554756", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26684, "thread_name": "MainThread", "process": 33144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T14:02:41.555777", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26684, "thread_name": "MainThread", "process": 33144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:02:41.558244", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26684, "thread_name": "MainThread", "process": 33144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:02:46.208051", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26684, "thread_name": "MainThread", "process": 33144, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:02:53.866098", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:02:54.304714", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:02:54.304714", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T14:02:54.317264", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T14:02:54.319237", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:02:54.319237", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:06.246046", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:06.686959", "level": "INFO", "logger": "whysper.app.main", "message": "Starting Whysper Web2 Backend v2.0.0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T14:03:06.688962", "level": "INFO", "logger": "whysper.app.main", "message": "Server running on 0.0.0.0:8003", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T14:03:06.689960", "level": "INFO", "logger": "whysper.app.main", "message": "Debug mode: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T14:03:06.689960", "level": "INFO", "logger": "whysper.app.main", "message": "CORS origins: ['http://localhost:3000', 'http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:5176', 'http://localhost:5177', 'http://localhost:5178', 'http://127.0.0.1:3000', 'http://127.0.0.1:5173', 'http://127.0.0.1:5174', 'http://127.0.0.1:5175', 'http://127.0.0.1:5176', 'http://127.0.0.1:5177']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T14:03:06.691958", "level": "INFO", "logger": "whysper.app.main", "message": "Real-time log broadcasting enabled - connect to GET /api/v1/logs/stream", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T14:03:06.693963", "level": "INFO", "logger": "whysper.app.main", "message": "FastMCP server integration initialized", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T14:03:06.694963", "level": "INFO", "logger": "whysper.app.main", "message": "MCP endpoints available at /mcp/*", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T14:03:06.695966", "level": "INFO", "logger": "whysper.app.main", "message": "MCP tools: generate_diagram, render_diagram, generate_and_render", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T14:03:06.697209", "level": "INFO", "logger": "whysper.app.main", "message": "MCP WebSocket endpoint: /mcp/ws", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T14:03:07.087912", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33552, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:07.088909", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:07.092926", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:07.102623", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33552, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:07.159518", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33552, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:07.162457", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33552, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:09.019941", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-9"}}
{"timestamp": "2025-10-20T14:03:11.570817", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 Log stream client disconnected (cancelled, session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap"}}
{"timestamp": "2025-10-20T14:03:13.624219", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-18"}}
{"timestamp": "2025-10-20T14:03:13.637238", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:13.639243", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33552, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:13.644583", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:13.647579", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33552, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:13.760811", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:13.761810", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33552, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:13.791774", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33552, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:13.810041", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:14.053201", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33552, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:14.054192", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:14.059916", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 33552, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:14.061936", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.277308", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.280326", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'Generate a Mermaid flowchart showing how data moves through the system, including inputs, transformations, storage, and outputs for a iphone app', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.284879", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: Generate a Mermaid flowchart showing how data moves through the system, including inputs, transformations, storage, and outputs for a iphone app", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.286608", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.290575", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.291574", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.298476", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Creating new conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.304284", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Creating conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.306300", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T14:03:32.340229", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T14:03:32.341244", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.344534", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initializing conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.345552", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Set default model: qwen/qwen3-coder-30b-a3b-instruct", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.346553", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initialized session logger for: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.348933", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Created new conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.350950", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Conversation session conv-1 initialized successfully", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.354236", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Setting API key for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.356257", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "API key updated for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.360588", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Session created", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.362574", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.363591", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.365569", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.366572", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.367682", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.368708", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.369693", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.371696", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is first message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.374971", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "First question has no file context in session conv-1 - proceeding without code context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.375991", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.379005", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.380007", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.382007", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.383003", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=True)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.386411", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Detected Mermaid diagram request, loading mermaid-architecture.md prompt", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.388624", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Auto-detected diagram request, using agent prompt: ---\ntitle: \"Mermaid Diagram Generation Expert (Rei...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.390027", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.391544", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.392556", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: True, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.393557", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.395576", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.397571", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "⚠️ First message but NO SELECTED FILES", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.398555", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:32.399557", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:36.103831", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1760987017-8QunJRbMmjrBpsD6BCwa\",\n  \"provider\": \"DeepInfra\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1760987017,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"Here's a Mermaid flowchart showing the data flow through an iPhone app system:\\n\\n```mermaid\\nflowchart TD\\n    %% Inputs\\n    A[User Input] --> B[App UI/Interface]\\n    C[Network Data] --> D[API Layer]\\n    E[Local Storage] --> F[Database Layer]\\n    \\n    %% Processing\\n    B --> G[Business Logic Layer]\\n    D --> G\\n    F --> G\\n    G --> H[Data Transformations]\\n    \\n    %% Storage\\n    H --> I[Local Database (Core Data/SQLite)]\\n    H --> J[Cloud Storage (Firebase/REST API)]\\n    \\n    %% Outputs\\n    I --> K[App UI Update]\\n    J --> K\\n    K --> L[User Interface]\\n    \\n    %% Feedback Loop\\n    L --> M[U", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:36.105835", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 1945 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:36.108278", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: Here's a Mermaid flowchart showing the data flow through an iPhone app system:\n\n```mermaid\nflowchart TD\n    %% Inputs\n    A[User Input] --> B[App UI/Interface]\n    C[Network Data] --> D[API Layer]\n   ", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:36.110657", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 1945 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:36.114653", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No D2 diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:36.115654", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 1945 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:36.117659", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 [MERMAID PROGRESS] Found 1 Mermaid diagram(s) - validating syntax...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:36.117659", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "[MERMAID PROGRESS] Validation attempt 1/5", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:41.039479", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "[MERMAID PROGRESS] Diagram #1 validation failed: Mermaid Syntax Error:\nError: Parse error on line 9:\n...-> I[Local Database (Core Data/SQLite)]\n-----------------------^\nExpecting 'SQE', 'DOUBLECIRCLEEND', 'PE', '-)', 'STADIUMEND', 'SUBROUTINEEND', '", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:41.040511", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔧 [MERMAID PROGRESS] Validation errors found - requesting AI auto-fix (attempt 1/5)...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:42.777771", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1760987026-B8sUMSRd2jGMNgOZAIAR\",\n  \"provider\": \"SiliconFlow\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1760987026,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```mermaid\\nflowchart TD\\n    A[User] --> B[Mobile App]\\n    B --> C[API Gateway]\\n    C --> D[Backend Services]\\n    D --> E[Cloud Database (AWS RDS)]\\n    D --> F[Message Queue (AWS SQS)]\\n    D --> G[File Storage (AWS S3)]\\n    B --> H[Local Database (Core Data/SQLite)]\\n```\",\n        \"refusal\": null,\n        \"reasoning\": null\n      }\n    }\n  ],\n  \"system_fingerprint\": \"\",\n  \"usage\": {\n    \"prompt_tokens\": 315,\n    \"completion_tokens\": 85,\n    \"total_tokens\": 400\n  }\n}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:42.780791", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 269 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:42.782819", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```mermaid\nflowchart TD\n    A[User] --> B[Mobile App]\n    B --> C[API Gateway]\n    C --> D[Backend Services]\n    D --> E[Cloud Database (AWS RDS)]\n    D --> F[Message Queue (AWS SQS)]\n    D --> G[File", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:42.785868", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [MERMAID PROGRESS] Received corrected Mermaid code (269 chars) - re-validating...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:42.788320", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "⚠️  Corrected response may be TRUNCATED! Model: qwen/qwen3-coder-30b-a3b-instruct", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:42.789369", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "⚠️  Try switching to a model that doesn't truncate", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:42.791317", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "[MERMAID PROGRESS] Validation attempt 2/5", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:47.646928", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "[MERMAID PROGRESS] Diagram #1 validation failed: Mermaid Syntax Error:\nError: Parse error on line 5:\n...-> E[Cloud Database (AWS RDS)]    D -->\n-----------------------^\nExpecting 'SQE', 'DOUBLECIRCLEEND', 'PE', '-)', 'STADIUMEND', 'SUBROUTINEEND', '", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:47.647933", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔧 [MERMAID PROGRESS] Validation errors found - requesting AI auto-fix (attempt 2/5)...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:49.532728", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1760987033-ecHp0f4y8CHy57p2HavM\",\n  \"provider\": \"SiliconFlow\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1760987033,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```mermaid\\nflowchart TD\\n    A[Start] --> B[Process Data]\\n    B --> C[Validate Input]\\n    C --> D[Store in Database]\\n    D --> E[Cloud Database (AWS RDS)]\\n    E --> F[Generate Report]\\n    F --> G[End]\\n```\",\n        \"refusal\": null,\n        \"reasoning\": null\n      }\n    }\n  ],\n  \"system_fingerprint\": \"\",\n  \"usage\": {\n    \"prompt_tokens\": 317,\n    \"completion_tokens\": 64,\n    \"total_tokens\": 381\n  }\n}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:49.540750", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 203 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:49.550269", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```mermaid\nflowchart TD\n    A[Start] --> B[Process Data]\n    B --> C[Validate Input]\n    C --> D[Store in Database]\n    D --> E[Cloud Database (AWS RDS)]\n    E --> F[Generate Report]\n    F --> G[End]\n", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:49.578353", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [MERMAID PROGRESS] Received corrected Mermaid code (203 chars) - re-validating...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:49.584394", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "⚠️  Corrected response may be TRUNCATED! Model: qwen/qwen3-coder-30b-a3b-instruct", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:49.595049", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "⚠️  Try switching to a model that doesn't truncate", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:49.597068", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "[MERMAID PROGRESS] Validation attempt 3/5", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:57.062795", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "[MERMAID PROGRESS] Diagram #1 validation failed: Mermaid Syntax Error:\nError: Parse error on line 5:\n...-> E[Cloud Database (AWS RDS)]    E -->\n-----------------------^\nExpecting 'SQE', 'DOUBLECIRCLEEND', 'PE', '-)', 'STADIUMEND', 'SUBROUTINEEND', '", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:57.074283", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔧 [MERMAID PROGRESS] Validation errors found - requesting AI auto-fix (attempt 3/5)...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:57.875558", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1760987042-X0VPrP73C2BJElhYOfaS\",\n  \"provider\": \"DeepInfra\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1760987042,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```mermaid\\nflowchart TD\\n    A[User] --> B[Web Application]\\n    B --> C[\\\"Database (MySQL)\\\"]\\n    C --> D[Cloud Storage (AWS S3)]\\n    D --> E[Cloud Database (AWS RDS)]\\n```\",\n        \"refusal\": null,\n        \"reasoning\": null\n      }\n    }\n  ],\n  \"usage\": {\n    \"prompt_tokens\": 317,\n    \"completion_tokens\": 54,\n    \"total_tokens\": 371,\n    \"prompt_tokens_details\": null\n  }\n}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:57.877558", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 168 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:57.878555", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```mermaid\nflowchart TD\n    A[User] --> B[Web Application]\n    B --> C[\"Database (MySQL)\"]\n    C --> D[Cloud Storage (AWS S3)]\n    D --> E[Cloud Database (AWS RDS)]\n```", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:57.879556", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [MERMAID PROGRESS] Received corrected Mermaid code (168 chars) - re-validating...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:57.881514", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "⚠️  Corrected response may be TRUNCATED! Model: qwen/qwen3-coder-30b-a3b-instruct", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:57.883537", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "⚠️  Try switching to a model that doesn't truncate", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:03:57.884545", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "[MERMAID PROGRESS] Validation attempt 4/5", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:04:03.026292", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "[MERMAID PROGRESS] Diagram #1 validation failed: Mermaid Syntax Error:\nError: Parse error on line 4:\n...--> D[Cloud Storage (AWS S3)]    D --> \n-----------------------^\nExpecting 'SQE', 'DOUBLECIRCLEEND', 'PE', '-)', 'STADIUMEND', 'SUBROUTINEEND', '", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:04:03.028813", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔧 [MERMAID PROGRESS] Validation errors found - requesting AI auto-fix (attempt 4/5)...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:04:04.407269", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1760987048-mAZlSKmKiyUASSNN4gie\",\n  \"provider\": \"SiliconFlow\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1760987048,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```mermaid\\nflowchart TD\\n    A[User] --> B[Web Application]\\n    B --> C[API Gateway]\\n    C --> D[Cloud Storage (AWS S3)]\\n    D --> E[Data Processing]\\n    E --> F[Analytics Dashboard]\\n```\",\n        \"refusal\": null,\n        \"reasoning\": null\n      }\n    }\n  ],\n  \"system_fingerprint\": \"\",\n  \"usage\": {\n    \"prompt_tokens\": 318,\n    \"completion_tokens\": 56,\n    \"total_tokens\": 374\n  }\n}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:04:04.410284", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 185 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:04:04.411269", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```mermaid\nflowchart TD\n    A[User] --> B[Web Application]\n    B --> C[API Gateway]\n    C --> D[Cloud Storage (AWS S3)]\n    D --> E[Data Processing]\n    E --> F[Analytics Dashboard]\n```", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:04:04.413269", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [MERMAID PROGRESS] Received corrected Mermaid code (185 chars) - re-validating...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:04:04.414318", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "⚠️  Corrected response may be TRUNCATED! Model: qwen/qwen3-coder-30b-a3b-instruct", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:04:04.415271", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "⚠️  Try switching to a model that doesn't truncate", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:04:04.417296", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "[MERMAID PROGRESS] Validation attempt 5/5", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:04:09.896904", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "[MERMAID PROGRESS] Diagram #1 validation failed: Mermaid Syntax Error:\nError: Parse error on line 4:\n...--> D[Cloud Storage (AWS S3)]    D --> \n-----------------------^\nExpecting 'SQE', 'DOUBLECIRCLEEND', 'PE', '-)', 'STADIUMEND', 'SUBROUTINEEND', '", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:04:09.897907", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔧 [MERMAID PROGRESS] Validation errors found - requesting AI auto-fix (attempt 5/5)...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:04:10.661253", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1760987055-rd159ydf5M11qjmpJVTG\",\n  \"provider\": \"DeepInfra\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1760987055,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```mermaid\\nflowchart TD\\n    A[Start] --> B[Process Data]\\n    B --> C[Validate Input]\\n    C --> D[Cloud Storage (AWS S3)]\\n    D --> E[End]\\n```\",\n        \"refusal\": null,\n        \"reasoning\": null\n      }\n    }\n  ],\n  \"usage\": {\n    \"prompt_tokens\": 318,\n    \"completion_tokens\": 47,\n    \"total_tokens\": 365,\n    \"prompt_tokens_details\": null\n  }\n}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:04:10.663094", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 141 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:04:10.665099", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```mermaid\nflowchart TD\n    A[Start] --> B[Process Data]\n    B --> C[Validate Input]\n    C --> D[Cloud Storage (AWS S3)]\n    D --> E[End]\n```", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:04:10.666100", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [MERMAID PROGRESS] Received corrected Mermaid code (141 chars) - re-validating...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:04:10.668105", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "⚠️  Corrected response may be TRUNCATED! Model: qwen/qwen3-coder-30b-a3b-instruct", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:04:10.670094", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "⚠️  Try switching to a model that doesn't truncate", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:04:10.672095", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "[MERMAID PROGRESS] ❌ Validation failed after 5 retries", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:04:10.673189", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After Mermaid validation/fix: 1337 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:04:10.674220", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Using agent prompt for question: Generate a Mermaid flowchart showing how data moves through the system, including inputs, transforma...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:04:10.676215", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt length: 7435 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:04:10.677208", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt preview: ---\ntitle: \"Mermaid Diagram Generation Expert (Reinforced)\"\ndescription: \"Generate Mermaid Diagrams\"\ncategory: [\"Code Review\", \"Software Development\", \"Quality Assurance\"]\nauthor: \"Eric M\"\ncreated: \"2...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:04:10.678258", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Question contains diagram keywords", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:04:10.679226", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response preview: ```mermaid\nflowchart TD\n    A[Start] --> B[Process Data]\n    B --> C[Validate Input]\n    C --> D[Cloud Storage (AWS S3)]\n    D --> E[End]\n```\n\n---\n\n## ⚠️ Mermaid Diagram Validation Failed\n\nThe Mermaid diagram could not be validated after 5 auto-fix attempts.\n\n**Validation Errors:**\n\n```\nMermaid Diagram #1 Error:\nMermaid Syntax Error:\nError: Parse error on line 4:\n...--> D[Cloud Storage (AWS S3)]    D --> \n-----------------------^\nExpecting 'SQE', 'DOUBLECIRCLEEND', 'PE', '-)', 'STADIUMEND', 'SUB...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:04:10.680205", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response contains Mermaid code block", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:04:10.682211", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 38.299s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:04:10.683211", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:04:10.684206", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:04:10.907317", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 38.30s using 365 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:04:10.909332", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:04:10.911334", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "Created new GUID 51900826-5b87-4c9f-aa0b-635faf3e1c93 for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:04:10.913334", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "No history file found for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:04:10.917338", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251020-140410_51900826-5b87-4c9f-aa0b-635faf3e1c93.json (2 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:04:10.921908", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (2 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:04:10.923921", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:04:10.973332", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 22316, "thread_name": "AnyIO worker thread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T14:04:11.577424", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41"}}
{"timestamp": "2025-10-20T14:04:11.616835", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-42"}}
{"timestamp": "2025-10-20T14:04:11.640435", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-43"}}
{"timestamp": "2025-10-20T14:04:11.672303", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-44"}}
{"timestamp": "2025-10-20T14:04:11.698861", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-45"}}
{"timestamp": "2025-10-20T14:04:11.715571", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-46"}}
{"timestamp": "2025-10-20T14:04:11.731030", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-48"}}
{"timestamp": "2025-10-20T14:04:11.746521", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-49"}}
{"timestamp": "2025-10-20T14:04:11.757824", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-50"}}
{"timestamp": "2025-10-20T14:04:11.771394", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-51"}}
{"timestamp": "2025-10-20T14:04:11.784848", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-52"}}
{"timestamp": "2025-10-20T14:04:11.791081", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-53"}}
{"timestamp": "2025-10-20T14:04:11.798077", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-54"}}
{"timestamp": "2025-10-20T14:04:11.806230", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-55"}}
{"timestamp": "2025-10-20T14:04:11.814770", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-56"}}
{"timestamp": "2025-10-20T14:04:11.853211", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-57"}}
{"timestamp": "2025-10-20T14:04:11.865103", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-58"}}
{"timestamp": "2025-10-20T14:04:11.895450", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-59"}}
{"timestamp": "2025-10-20T14:04:11.916585", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-60"}}
{"timestamp": "2025-10-20T14:04:11.930924", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-61"}}
{"timestamp": "2025-10-20T14:04:11.939357", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-62"}}
{"timestamp": "2025-10-20T14:04:11.945002", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-63"}}
{"timestamp": "2025-10-20T14:04:11.954808", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-64"}}
{"timestamp": "2025-10-20T14:04:11.963132", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-65"}}
{"timestamp": "2025-10-20T14:04:11.968634", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-66"}}
{"timestamp": "2025-10-20T14:04:11.975746", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-67"}}
{"timestamp": "2025-10-20T14:04:11.986495", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-68"}}
{"timestamp": "2025-10-20T14:04:12.010307", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-69"}}
{"timestamp": "2025-10-20T14:04:12.040969", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70"}}
{"timestamp": "2025-10-20T14:04:12.048687", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-71"}}
{"timestamp": "2025-10-20T14:04:12.063474", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-72"}}
{"timestamp": "2025-10-20T14:04:12.079398", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-73"}}
{"timestamp": "2025-10-20T14:04:12.428308", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-74"}}
{"timestamp": "2025-10-20T14:04:12.510199", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-75"}}
{"timestamp": "2025-10-20T14:04:12.525483", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-76"}}
{"timestamp": "2025-10-20T14:04:12.629886", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-77"}}
{"timestamp": "2025-10-20T14:04:12.660549", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-78"}}
{"timestamp": "2025-10-20T14:04:12.707394", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-79"}}
{"timestamp": "2025-10-20T14:04:12.759463", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-80"}}
{"timestamp": "2025-10-20T14:04:12.816069", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-81"}}
{"timestamp": "2025-10-20T14:04:12.838685", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-82"}}
{"timestamp": "2025-10-20T14:04:12.875707", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-83"}}
{"timestamp": "2025-10-20T14:04:12.909184", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-84"}}
{"timestamp": "2025-10-20T14:04:12.962450", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-85"}}
{"timestamp": "2025-10-20T14:04:13.006204", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-86"}}
{"timestamp": "2025-10-20T14:04:13.033373", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-87"}}
{"timestamp": "2025-10-20T14:04:13.060712", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-88"}}
{"timestamp": "2025-10-20T14:04:13.081419", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-89"}}
{"timestamp": "2025-10-20T14:04:13.108584", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-90"}}
{"timestamp": "2025-10-20T14:04:13.140197", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-91"}}
{"timestamp": "2025-10-20T14:04:13.151741", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-92"}}
{"timestamp": "2025-10-20T14:04:13.223147", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-93"}}
{"timestamp": "2025-10-20T14:04:13.253269", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-94"}}
{"timestamp": "2025-10-20T14:04:13.267689", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-95"}}
{"timestamp": "2025-10-20T14:04:13.286274", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-96"}}
{"timestamp": "2025-10-20T14:04:13.292786", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-97"}}
{"timestamp": "2025-10-20T14:04:13.305480", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-98"}}
{"timestamp": "2025-10-20T14:04:13.324416", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-99"}}
{"timestamp": "2025-10-20T14:04:13.339835", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-100"}}
{"timestamp": "2025-10-20T14:04:13.355850", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-101"}}
{"timestamp": "2025-10-20T14:04:13.371218", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-102"}}
{"timestamp": "2025-10-20T14:04:13.380967", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-103"}}
{"timestamp": "2025-10-20T14:04:13.399908", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-104"}}
{"timestamp": "2025-10-20T14:04:13.414646", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-105"}}
{"timestamp": "2025-10-20T14:04:13.438965", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-106"}}
{"timestamp": "2025-10-20T14:04:13.451451", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-107"}}
{"timestamp": "2025-10-20T14:04:13.462052", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-108"}}
{"timestamp": "2025-10-20T14:04:13.472928", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-109"}}
{"timestamp": "2025-10-20T14:04:13.494917", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-110"}}
{"timestamp": "2025-10-20T14:04:13.513552", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-111"}}
{"timestamp": "2025-10-20T14:04:13.582748", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-112"}}
{"timestamp": "2025-10-20T14:04:13.597784", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-113"}}
{"timestamp": "2025-10-20T14:04:13.812839", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-114"}}
{"timestamp": "2025-10-20T14:04:13.945411", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32340, "thread_name": "MainThread", "process": 4776, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-115"}}
{"timestamp": "2025-10-20T16:04:12.903200", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 20532, "thread_name": "MainThread", "process": 40656, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:04:13.318857", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 20532, "thread_name": "MainThread", "process": 40656, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:04:13.318857", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 20532, "thread_name": "MainThread", "process": 40656, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T16:04:13.340883", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 20532, "thread_name": "MainThread", "process": 40656, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T16:04:13.341939", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 20532, "thread_name": "MainThread", "process": 40656, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:04:13.341939", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 20532, "thread_name": "MainThread", "process": 40656, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:04:19.943345", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 20532, "thread_name": "MainThread", "process": 40656, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:04:31.149524", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29956, "thread_name": "MainThread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:04:31.549955", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29956, "thread_name": "MainThread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:04:31.549955", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29956, "thread_name": "MainThread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T16:04:31.566256", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29956, "thread_name": "MainThread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T16:04:31.567258", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29956, "thread_name": "MainThread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:04:31.568259", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29956, "thread_name": "MainThread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:04:39.080210", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29956, "thread_name": "MainThread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:04:39.689488", "level": "INFO", "logger": "whysper.app.main", "message": "Starting Whysper Web2 Backend v2.0.0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29956, "thread_name": "MainThread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T16:04:39.695604", "level": "INFO", "logger": "whysper.app.main", "message": "Server running on 0.0.0.0:8003", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29956, "thread_name": "MainThread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T16:04:39.702959", "level": "INFO", "logger": "whysper.app.main", "message": "Debug mode: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29956, "thread_name": "MainThread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T16:04:39.705478", "level": "INFO", "logger": "whysper.app.main", "message": "CORS origins: ['http://localhost:3000', 'http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:5176', 'http://localhost:5177', 'http://localhost:5178', 'http://127.0.0.1:3000', 'http://127.0.0.1:5173', 'http://127.0.0.1:5174', 'http://127.0.0.1:5175', 'http://127.0.0.1:5176', 'http://127.0.0.1:5177']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29956, "thread_name": "MainThread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T16:04:39.710496", "level": "INFO", "logger": "whysper.app.main", "message": "Real-time log broadcasting enabled - connect to GET /api/v1/logs/stream", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29956, "thread_name": "MainThread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T16:04:39.715022", "level": "INFO", "logger": "whysper.app.main", "message": "FastMCP server integration initialized", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29956, "thread_name": "MainThread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T16:04:39.718556", "level": "INFO", "logger": "whysper.app.main", "message": "MCP endpoints available at /mcp/*", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29956, "thread_name": "MainThread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T16:04:39.719556", "level": "INFO", "logger": "whysper.app.main", "message": "MCP tools: generate_diagram, render_diagram, generate_and_render", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29956, "thread_name": "MainThread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T16:04:39.721558", "level": "INFO", "logger": "whysper.app.main", "message": "MCP WebSocket endpoint: /mcp/ws", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29956, "thread_name": "MainThread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T16:07:13.301405", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37272, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:13.312314", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37272, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:13.336867", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37272, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:13.361567", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37272, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:13.362091", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:13.558712", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:13.620184", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:13.645708", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:14.923365", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:14.927349", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:15.023037", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:15.029155", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:17.802979", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29956, "thread_name": "MainThread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-17"}}
{"timestamp": "2025-10-20T16:07:26.486748", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.487747", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'say hello', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.489049", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: say hello", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.489049", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.491763", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.491763", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.501636", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Creating new conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.502662", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Creating conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.503663", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T16:07:26.535289", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T16:07:26.536302", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.538311", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initializing conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.539309", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Set default model: qwen/qwen3-coder-30b-a3b-instruct", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.540310", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initialized session logger for: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.541323", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Created new conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.542300", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Conversation session conv-1 initialized successfully", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.543302", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Setting API key for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.544300", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "API key updated for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.545581", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Session created", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.547338", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.548506", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Provider update skipped - same or empty provider: 'openrouter'", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.549521", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating model to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.549521", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Model updated", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.551031", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Model changed to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.552045", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.553050", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Using agent prompt: You are a helpful AI assistant specialized in code analysis and development....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.554048", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.555081", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.556049", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.557168", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.558047", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.560080", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is first message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.563149", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "First question has no file context in session conv-1 - proceeding without code context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.566220", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.568222", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.570668", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.573794", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.580791", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=True)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.584794", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.587352", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.590867", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: True, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.592190", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.597208", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.599210", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "⚠️ First message but NO SELECTED FILES", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.600209", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:26.602738", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:07:29.041995", "level": "ERROR", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Error processing chat message: OpenRouter API key is invalid or expired", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32004, "thread_name": "AnyIO worker thread", "process": 30160, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:10:36.490329", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41476, "thread_name": "MainThread", "process": 27456, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:10:36.976566", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41476, "thread_name": "MainThread", "process": 27456, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:10:36.976566", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41476, "thread_name": "MainThread", "process": 27456, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T16:10:37.004124", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41476, "thread_name": "MainThread", "process": 27456, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T16:10:37.005124", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41476, "thread_name": "MainThread", "process": 27456, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:10:37.006132", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41476, "thread_name": "MainThread", "process": 27456, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:10:42.734500", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41476, "thread_name": "MainThread", "process": 27456, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:10:51.961169", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:10:52.373680", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:10:52.374957", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T16:10:52.396424", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T16:10:52.397430", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:10:52.398424", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:10:58.355972", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:10:58.956331", "level": "INFO", "logger": "whysper.app.main", "message": "Starting Whysper Web2 Backend v2.0.0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T16:10:58.957330", "level": "INFO", "logger": "whysper.app.main", "message": "Server running on 0.0.0.0:8003", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T16:10:58.958333", "level": "INFO", "logger": "whysper.app.main", "message": "Debug mode: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T16:10:58.959332", "level": "INFO", "logger": "whysper.app.main", "message": "CORS origins: ['http://localhost:3000', 'http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:5176', 'http://localhost:5177', 'http://localhost:5178', 'http://127.0.0.1:3000', 'http://127.0.0.1:5173', 'http://127.0.0.1:5174', 'http://127.0.0.1:5175', 'http://127.0.0.1:5176', 'http://127.0.0.1:5177']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T16:10:58.960367", "level": "INFO", "logger": "whysper.app.main", "message": "Real-time log broadcasting enabled - connect to GET /api/v1/logs/stream", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T16:10:58.961337", "level": "INFO", "logger": "whysper.app.main", "message": "FastMCP server integration initialized", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T16:10:58.962333", "level": "INFO", "logger": "whysper.app.main", "message": "MCP endpoints available at /mcp/*", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T16:10:58.963333", "level": "INFO", "logger": "whysper.app.main", "message": "MCP tools: generate_diagram, render_diagram, generate_and_render", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T16:10:58.964334", "level": "INFO", "logger": "whysper.app.main", "message": "MCP WebSocket endpoint: /mcp/ws", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T16:11:21.076443", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:21.080443", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:21.095982", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:21.101004", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:21.306823", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-11"}}
{"timestamp": "2025-10-20T16:11:21.375383", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:21.394250", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:21.408953", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:21.431903", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:21.704954", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:21.709955", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:21.722984", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:21.725985", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:28.918702", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:28.921662", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'hello', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:28.923060", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: hello", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:28.924088", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:28.926080", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:28.928380", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:28.930907", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Creating new conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:28.932938", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Creating conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:28.934923", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T16:11:28.960896", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T16:11:28.961847", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:28.962844", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initializing conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:28.962844", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Set default model: qwen/qwen3-coder-30b-a3b-instruct", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:28.963866", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initialized session logger for: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:28.964853", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Created new conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:28.965856", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Conversation session conv-1 initialized successfully", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:28.966874", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Setting API key for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:28.968108", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "API key updated for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:28.970428", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Session created", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:28.971462", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:28.972971", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:28.973993", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:28.974981", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:28.977005", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:28.979052", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:28.980054", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:28.981064", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is first message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:28.982052", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "First question has no file context in session conv-1 - proceeding without code context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:28.984054", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:28.984054", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:28.986605", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:28.987643", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:28.988652", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=True)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:28.989608", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:28.990607", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:28.991600", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: True, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:28.992630", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:28.993598", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:28.994835", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "⚠️ First message but NO SELECTED FILES", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:28.995859", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:28.997871", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:31.155710", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1760994694-BR8Gq57SfoOOjGPBJMwN\",\n  \"provider\": \"SiliconFlow\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1760994694,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"Hello! I'm here to help with your code analysis. Could you please share the codebase you'd like me to examine? Once you provide it, I can help with things like:\\n\\n- Code review and suggestions\\n- Identifying potential bugs or issues\\n- Explaining code functionality\\n- Performance optimization tips\\n- Best practices recommendations\\n\\nPlease paste your code or let me know what specific aspects you'd like me to focus on!\",\n        \"refusal\": null,\n        \"reasoning\": null\n      }\n    }\n  ],\n  \"system_fingerprint\": \"\",\n  \"usage\": {\n    \"prompt_tokens\": 35,\n    \"completion_tokens\": 87,\n    \"total_tokens\": 122\n  }", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:31.158535", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 415 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:31.160563", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: Hello! I'm here to help with your code analysis. Could you please share the codebase you'd like me to examine? Once you provide it, I can help with things like:\n\n- Code review and suggestions\n- Identi", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:31.163687", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 415 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:31.173746", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No D2 diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:31.177250", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 415 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:31.178770", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No Mermaid diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:31.180777", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After Mermaid validation/fix: 415 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:31.181816", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] No agent prompt provided for question: hello...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:31.182773", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 2.195s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:31.183778", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:31.185782", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:31.275727", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 2.20s using 122 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:31.276726", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:31.277878", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "Created new GUID 8b70201a-6c20-4c34-8da2-f764ff8562bb for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:31.278883", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "No history file found for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:31.282881", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251020-161131_8b70201a-6c20-4c34-8da2-f764ff8562bb.json (2 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:31.283897", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (2 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:31.285432", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:31.312051", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:56.530723", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:56.537473", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'create a mermaid diagram of an iphone app', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:56.543095", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: create a mermaid diagram of an iphone app", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:56.545932", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:56.549491", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:56.552119", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:56.558435", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Retrieved existing session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:56.564000", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:56.568326", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:56.571736", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:56.572814", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:56.580963", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:56.582925", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:56.586750", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:56.588967", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is follow-up message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:56.590438", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:56.591719", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:56.595640", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:56.597777", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:56.602621", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=False)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:56.605337", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Detected Mermaid diagram request, loading mermaid-architecture.md prompt", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:56.607990", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Auto-detected diagram request, using agent prompt: ---\ntitle: \"Mermaid Diagram Generation Expert (Rei...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:56.609579", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:56.610721", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:56.611920", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: False, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:56.612884", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:56.614929", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:56.617582", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:11:56.619175", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:00.435987", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1760994721-LQOPjAJWDasyvRs35SCm\",\n  \"provider\": \"SiliconFlow\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1760994722,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```mermaid\\ngraph TD\\n    A[Main App Screen] --> B[Navigation Bar]\\n    A --> C[Content Area]\\n    A --> D[Tab Bar]\\n    \\n    B --> B1[Back Button]\\n    B --> B2[Title]\\n    B --> B3[Action Buttons]\\n    \\n    C --> C1[Home Screen]\\n    C --> C2[Settings Screen]\\n    C --> C3[Profile Screen]\\n    C --> C4[Notifications]\\n    \\n    C1 --> C11[Welcome Message]\\n    C1 --> C12[Quick Actions]\\n    C1 --> C13[Recent Activity]\\n    \\n    C2 --> C21[Account Settings]\\n    C2 --> C22[Privacy Settings]\\n    C2 --> C23[Notification Preferences]\\n    C2 --> C24[App Information]\\n    \\n    C3 --> C31[Profile Picture]\\n   ", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:00.440163", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 1315 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:00.443954", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```mermaid\ngraph TD\n    A[Main App Screen] --> B[Navigation Bar]\n    A --> C[Content Area]\n    A --> D[Tab Bar]\n    \n    B --> B1[Back Button]\n    B --> B2[Title]\n    B --> B3[Action Buttons]\n    \n   ", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:00.448041", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 1315 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:00.449055", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No D2 diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:00.450101", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 1315 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:00.453079", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 [MERMAID PROGRESS] Found 1 Mermaid diagram(s) - validating syntax...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:00.456053", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "[MERMAID PROGRESS] Validation attempt 1/5", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:10.068316", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [MERMAID PROGRESS] All Mermaid diagrams validated successfully!", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:10.070328", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After Mermaid validation/fix: 1315 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:10.071316", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Using agent prompt for question: create a mermaid diagram of an iphone app...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:10.073440", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt length: 7435 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:10.074981", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt preview: ---\ntitle: \"Mermaid Diagram Generation Expert (Reinforced)\"\ndescription: \"Generate Mermaid Diagrams\"\ncategory: [\"Code Review\", \"Software Development\", \"Quality Assurance\"]\nauthor: \"Eric M\"\ncreated: \"2...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:10.078387", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Question contains diagram keywords", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:10.080405", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response preview: ```mermaid\ngraph TD\n    A[Main App Screen] --> B[Navigation Bar]\n    A --> C[Content Area]\n    A --> D[Tab Bar]\n    \n    B --> B1[Back Button]\n    B --> B2[Title]\n    B --> B3[Action Buttons]\n    \n    C --> C1[Home Screen]\n    C --> C2[Settings Screen]\n    C --> C3[Profile Screen]\n    C --> C4[Notifications]\n    \n    C1 --> C11[Welcome Message]\n    C1 --> C12[Quick Actions]\n    C1 --> C13[Recent Activity]\n    \n    C2 --> C21[Account Settings]\n    C2 --> C22[Privacy Settings]\n    C2 --> C23[Notif...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:10.083870", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response contains Mermaid code block", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:10.084878", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 13.487s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:10.085868", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:10.086869", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:10.227114", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 13.49s using 597 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:10.228148", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:10.261214", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Loaded conversation history: C:\\Code2025\\Whysper\\history\\20251020-161131_8b70201a-6c20-4c34-8da2-f764ff8562bb.json", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:10.265715", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251020-161131_8b70201a-6c20-4c34-8da2-f764ff8562bb.json (4 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:10.266225", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (4 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:10.267240", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:10.296961", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:10.869576", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-34"}}
{"timestamp": "2025-10-20T16:12:10.881583", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-35"}}
{"timestamp": "2025-10-20T16:12:10.888291", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-36"}}
{"timestamp": "2025-10-20T16:12:10.914422", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41"}}
{"timestamp": "2025-10-20T16:12:10.954540", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-42"}}
{"timestamp": "2025-10-20T16:12:10.972798", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-43"}}
{"timestamp": "2025-10-20T16:12:10.985858", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-44"}}
{"timestamp": "2025-10-20T16:12:10.991860", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-45"}}
{"timestamp": "2025-10-20T16:12:11.001461", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-46"}}
{"timestamp": "2025-10-20T16:12:11.008984", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-47"}}
{"timestamp": "2025-10-20T16:12:11.019418", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-48"}}
{"timestamp": "2025-10-20T16:12:11.029983", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-49"}}
{"timestamp": "2025-10-20T16:12:11.036286", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-50"}}
{"timestamp": "2025-10-20T16:12:11.043224", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-51"}}
{"timestamp": "2025-10-20T16:12:11.050136", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-52"}}
{"timestamp": "2025-10-20T16:12:11.054107", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-53"}}
{"timestamp": "2025-10-20T16:12:11.059731", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-54"}}
{"timestamp": "2025-10-20T16:12:11.068092", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-55"}}
{"timestamp": "2025-10-20T16:12:11.076110", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-56"}}
{"timestamp": "2025-10-20T16:12:11.085618", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-57"}}
{"timestamp": "2025-10-20T16:12:11.439180", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-58"}}
{"timestamp": "2025-10-20T16:12:11.726079", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-59"}}
{"timestamp": "2025-10-20T16:12:12.018913", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-60"}}
{"timestamp": "2025-10-20T16:12:12.264779", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-61"}}
{"timestamp": "2025-10-20T16:12:46.374111", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:46.376122", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'create a d2 diagram of an android app', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:46.378124", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: create a d2 diagram of an android app", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:46.379193", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:46.380448", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:46.380448", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:46.382169", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Retrieved existing session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:46.382169", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:46.383690", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:46.383690", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:46.385713", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:46.386713", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:46.387743", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:46.388751", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:46.389767", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is follow-up message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:46.389767", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:46.390757", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:46.391761", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:46.392761", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:46.396252", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=False)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:46.398304", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Detected D2 diagram request, loading d2-architecture.md prompt", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:46.399254", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Auto-detected diagram request, using agent prompt: ---\ntitle: \"D2 Diagram Generation Expert (Reinforc...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:46.401253", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:46.401253", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:46.402766", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: False, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:46.405015", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:46.406050", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:46.408032", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:46.409055", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:59.875742", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1760994771-Prex4UCRxOUHSMAVVfkP\",\n  \"provider\": \"Novita\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1760994771,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```d2\\n// Android App Architecture Diagram\\n\\n// Main App Container\\napp: {\\n  style: \\\"filled\\\"\\n  fill: \\\"#2196F3\\\"\\n  stroke: \\\"#1976D2\\\"\\n  \\\"Android App Main\\\"\\n}\\n\\n// Activity Layers\\nactivity_layer: {\\n  style: \\\"filled\\\"\\n  fill: \\\"#4CAF50\\\"\\n  stroke: \\\"#388E3C\\\"\\n  \\\"Activity Layer\\\"\\n}\\n\\n// Fragment Layer\\nfragment_layer: {\\n  style: \\\"filled\\\"\\n  fill: \\\"#FF9800\\\"\\n  stroke: \\\"#F57C00\\\"\\n  \\\"Fragment Layer\\\"\\n}\\n\\n// View Layer\\nview_layer: {\\n  style: \\\"filled\\\"\\n  fill: \\\"#9C27B0\\\"\\n  stroke: \\\"#7B1FA2\\\"\\n  \\\"View Layer\\\"\\n}\\n\\n// Data Layer\\ndata_layer: {\\n  style: \\\"filled\\\"\\n  fill: \\\"#F44336\\\"\\n ", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:59.879409", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 3624 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:59.879409", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```d2\n// Android App Architecture Diagram\n\n// Main App Container\napp: {\n  style: \"filled\"\n  fill: \"#2196F3\"\n  stroke: \"#1976D2\"\n  \"Android App Main\"\n}\n\n// Activity Layers\nactivity_layer: {\n  style: \"f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:59.880437", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 3624 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:12:59.881501", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 [D2 PROGRESS] Found 1 D2 diagram(s) - validating syntax...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:00.123636", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Validation attempt 1/8", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:00.431870", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "D2 diagram #1 validation failed: debug: using theme Neutral Default (ID: 0)\nerr: failed to compile ..\\..\\..\\Users\\Hack\\AppData\\Local\\Temp\\tmprolv4r7_.d2: C:\\Users\\Hack\\AppData\\Local\\Temp\\tmprolv4r7_.d2:5:3: \"style\" expected to be set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:00.433422", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔧 [D2 PROGRESS] Validation errors found - requesting AI auto-fix (attempt 1/8)...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:04.536819", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1760994785-W7OnTayTjJOGomCnmm9O\",\n  \"provider\": \"DeepInfra\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1760994785,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```d2\\ngraph TD\\n    A[Main App Screen] --> B[Navigation Bar]\\n    A --> C[Content Area]\\n    A --> D[Tab Bar]\\n    \\n    B --> B1[Back Button]\\n    B --> B2[Title]\\n    B --> B3[Action Buttons]\\n    \\n    C --> C1[Home Screen]\\n    C --> C2[Settings Screen]\\n    C --> C3[Profile Screen]\\n    C --> C4[Notifications]\\n    \\n    C1 --> C11[Welcome Message]\\n    C1 --> C12[Quick Actions]\\n    C1 --> C13[Recent Activity]\\n    \\n    C2 --> C21[Account Settings]\\n    C2 --> C22[Privacy Settings]\\n    C2 --> C23[Notification Preferences]\\n    C2 --> C24[App Information]\\n    \\n    C3 --> C31[Profile Picture]\\n    C3 -->", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:04.539835", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 1310 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:04.539835", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```d2\ngraph TD\n    A[Main App Screen] --> B[Navigation Bar]\n    A --> C[Content Area]\n    A --> D[Tab Bar]\n    \n    B --> B1[Back Button]\n    B --> B2[Title]\n    B --> B3[Action Buttons]\n    \n    C --", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:04.540839", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [D2 PROGRESS] Received corrected D2 code (1310 chars) - re-validating...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:04.542879", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Validation attempt 2/8", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:04.762330", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "D2 diagram #1 validation failed: debug: using theme Neutral Default (ID: 0)\nerr: failed to compile ..\\..\\..\\Users\\Hack\\AppData\\Local\\Temp\\tmpzf2x2zz3.d2: C:\\Users\\Hack\\AppData\\Local\\Temp\\tmpzf2x2zz3.d2:2:6: unexpected text after map ", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:04.763352", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔧 [D2 PROGRESS] Validation errors found - requesting AI auto-fix (attempt 2/8)...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:08.844821", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1760994790-H88jUbNoSpjxlOcfljDd\",\n  \"provider\": \"Nebius\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1760994790,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```d2\\ngraph TD\\n    A[Main App Screen] --> B[Navigation Bar]\\n    A --> C[Content Area]\\n    A --> D[Tab Bar]\\n    \\n    B --> B1[Back Button]\\n    B --> B2[Title]\\n    B --> B3[Action Buttons]\\n    \\n    C --> C1[Home Screen]\\n    C --> C2[Settings Screen]\\n    C --> C3[Profile Screen]\\n    C --> C4[Notifications]\\n    \\n    C1 --> C11[Welcome Message]\\n    C1 --> C12[Quick Actions]\\n    C1 --> C13[Recent Activity]\\n    \\n    C2 --> C21[Account Settings]\\n    C2 --> C22[Privacy Settings]\\n    C2 --> C23[Notification Preferences]\\n    C2 --> C24[App Information]\\n    \\n    C3 --> C31[Profile Picture]\\n    C3 --> C3", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:08.846340", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 1310 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:08.846340", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```d2\ngraph TD\n    A[Main App Screen] --> B[Navigation Bar]\n    A --> C[Content Area]\n    A --> D[Tab Bar]\n    \n    B --> B1[Back Button]\n    B --> B2[Title]\n    B --> B3[Action Buttons]\n    \n    C --", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:08.847365", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [D2 PROGRESS] Received corrected D2 code (1310 chars) - re-validating...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:08.848348", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Validation attempt 3/8", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:09.080184", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "D2 diagram #1 validation failed: debug: using theme Neutral Default (ID: 0)\nerr: failed to compile ..\\..\\..\\Users\\Hack\\AppData\\Local\\Temp\\tmph6pb7o1s.d2: C:\\Users\\Hack\\AppData\\Local\\Temp\\tmph6pb7o1s.d2:2:6: unexpected text after map ", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:09.080692", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔧 [D2 PROGRESS] Validation errors found - requesting AI auto-fix (attempt 3/8)...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:11.319352", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1760994794-T2B1NMnVApVA6Jfs1oR1\",\n  \"provider\": \"DeepInfra\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1760994794,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```d2\\nD2 Diagram #1\\n\\nMain App Screen -> Navigation Bar\\nMain App Screen -> Content Area\\nMain App Screen -> Tab Bar\\n\\nNavigation Bar -> Back Button\\nNavigation Bar -> Title\\nNavigation Bar -> Action Buttons\\n\\nContent Area -> Home Screen\\nContent Area -> Settings Screen\\nContent Area -> Profile Screen\\nContent Area -> Notifications\\n\\nHome Screen -> Welcome Message\\nHome Screen -> Quick Actions\\nHome Screen -> Recent Activity\\n\\nSettings Screen -> Account Settings\\nSettings Screen -> Privacy Settings\\nSettings Screen -> Notification Preferences\\nSettings Screen -> App Information\\n\\nProfile Screen -> Profile ", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:11.323335", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 1099 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:11.324335", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```d2\nD2 Diagram #1\n\nMain App Screen -> Navigation Bar\nMain App Screen -> Content Area\nMain App Screen -> Tab Bar\n\nNavigation Bar -> Back Button\nNavigation Bar -> Title\nNavigation Bar -> Action Button", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:11.325338", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [D2 PROGRESS] Received corrected D2 code (1099 chars) - re-validating...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:11.328354", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Validation attempt 4/8", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:13.169099", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [D2 PROGRESS] All D2 diagrams validated successfully!", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:13.170099", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [D2 PROGRESS] Rendering diagrams to SVG...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:13.184400", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Pre-rendering D2 diagram #1 (1090 chars)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:14.873797", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Saved D2 diagram to: backend\\static\\d2_diagrams\\d2_diagram_20251020_161314_3bce76c4.svg", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:14.875810", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "D2 diagrams pre-rendered successfully", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:14.876787", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [D2 PROGRESS] D2 diagrams rendered and ready for display!", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:14.878785", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 38438 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:14.879786", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No Mermaid diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:14.880789", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After Mermaid validation/fix: 38438 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:14.882040", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Using agent prompt for question: create a d2 diagram of an android app...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:14.884075", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt length: 5602 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:14.886081", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt preview: ---\ntitle: \"D2 Diagram Generation Expert (Reinforced)\"\ndescription: \"Generate D2 Diagrams\"\ncategory: [\"Code Review\", \"Software Development\", \"Quality Assurance\"]\nauthor: \"Eric M\"\ncreated: \"2025-09-27\"...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:14.887356", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Question contains diagram keywords", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:14.889392", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response preview: <div class=\"d2-diagram-container\" style=\"margin: 16px 0;\">\n<div style=\"display: inline-flex; align-items: center; gap: 6px; padding: 6px 12px; background: linear-gradient(135deg, #10b981 0%, #059669 100%); border-radius: 6px; margin-bottom: 12px; font-size: 12px; font-weight: 500; color: white;\">\n  <span style=\"font-size: 14px;\">✅</span>\n  <span>D2 Diagram Rendered Successfully</span>\n</div>\n  <div class=\"d2-rendered-diagram\">\n    <?xml version=\"1.0\" encoding=\"utf-8\"?><svg xmlns=\"http://www.w3.o...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:14.890631", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response does NOT contain Mermaid code block", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:14.891845", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 28.499s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:14.893295", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:14.894358", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:14.913052", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 28.50s using 2219 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:14.914054", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:14.945693", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Loaded conversation history: C:\\Code2025\\Whysper\\history\\20251020-161131_8b70201a-6c20-4c34-8da2-f764ff8562bb.json", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:14.949687", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251020-161131_8b70201a-6c20-4c34-8da2-f764ff8562bb.json (6 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:14.950690", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (6 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:14.950690", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:14.974750", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14900, "thread_name": "AnyIO worker thread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:13:15.180835", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-67"}}
{"timestamp": "2025-10-20T16:13:15.190185", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-68"}}
{"timestamp": "2025-10-20T16:13:21.933044", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-76"}}
{"timestamp": "2025-10-20T16:13:21.941066", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-77"}}
{"timestamp": "2025-10-20T16:13:31.043506", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 Log stream client disconnected (cancelled, session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap"}}
{"timestamp": "2025-10-20T16:54:51.775010", "level": "INFO", "logger": "whysper.app.main", "message": "Shutting down Whysper Web2 Backend", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41792, "thread_name": "MainThread", "process": 22128, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T16:55:04.592966", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40608, "thread_name": "MainThread", "process": 32372, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:55:05.116842", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40608, "thread_name": "MainThread", "process": 32372, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:55:05.117842", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40608, "thread_name": "MainThread", "process": 32372, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T16:55:05.137938", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40608, "thread_name": "MainThread", "process": 32372, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T16:55:05.138937", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40608, "thread_name": "MainThread", "process": 32372, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:55:05.138937", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40608, "thread_name": "MainThread", "process": 32372, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:55:11.700771", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40608, "thread_name": "MainThread", "process": 32372, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:55:12.078282", "level": "INFO", "logger": "whysper.app.main", "message": "Static files directory: C:\\Code2025\\Whysper\\backend\\static", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40608, "thread_name": "MainThread", "process": 32372, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:55:12.370469", "level": "INFO", "logger": "whysper.app.main", "message": "Starting Whysper Web2 Backend v2.0.0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40608, "thread_name": "MainThread", "process": 32372, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T16:55:12.372464", "level": "INFO", "logger": "whysper.app.main", "message": "Server running on 0.0.0.0:8003", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40608, "thread_name": "MainThread", "process": 32372, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T16:55:12.373484", "level": "INFO", "logger": "whysper.app.main", "message": "Debug mode: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40608, "thread_name": "MainThread", "process": 32372, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T16:55:12.374476", "level": "INFO", "logger": "whysper.app.main", "message": "CORS origins: ['http://localhost:3000', 'http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:5176', 'http://localhost:5177', 'http://localhost:5178', 'http://127.0.0.1:3000', 'http://127.0.0.1:5173', 'http://127.0.0.1:5174', 'http://127.0.0.1:5175', 'http://127.0.0.1:5176', 'http://127.0.0.1:5177']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40608, "thread_name": "MainThread", "process": 32372, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T16:55:12.376476", "level": "INFO", "logger": "whysper.app.main", "message": "Real-time log broadcasting enabled - connect to GET /api/v1/logs/stream", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40608, "thread_name": "MainThread", "process": 32372, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T16:55:12.378077", "level": "INFO", "logger": "whysper.app.main", "message": "FastMCP server integration initialized", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40608, "thread_name": "MainThread", "process": 32372, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T16:55:12.378586", "level": "INFO", "logger": "whysper.app.main", "message": "MCP endpoints available at /mcp/*", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40608, "thread_name": "MainThread", "process": 32372, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T16:55:12.379616", "level": "INFO", "logger": "whysper.app.main", "message": "MCP tools: generate_diagram, render_diagram, generate_and_render", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40608, "thread_name": "MainThread", "process": 32372, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T16:55:12.380602", "level": "INFO", "logger": "whysper.app.main", "message": "MCP WebSocket endpoint: /mcp/ws", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40608, "thread_name": "MainThread", "process": 32372, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T16:55:39.774472", "level": "INFO", "logger": "whysper.app.main", "message": "Shutting down Whysper Web2 Backend", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40608, "thread_name": "MainThread", "process": 32372, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T16:56:51.993659", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 25624, "thread_name": "MainThread", "process": 36976, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:57:20.172365", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39700, "thread_name": "MainThread", "process": 38340, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:57:22.131240", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39700, "thread_name": "MainThread", "process": 38340, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:57:22.132246", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39700, "thread_name": "MainThread", "process": 38340, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T16:57:22.189803", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39700, "thread_name": "MainThread", "process": 38340, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T16:57:22.191803", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39700, "thread_name": "MainThread", "process": 38340, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:57:22.193964", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39700, "thread_name": "MainThread", "process": 38340, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:57:59.215570", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40248, "thread_name": "MainThread", "process": 39224, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:58:00.384410", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40248, "thread_name": "MainThread", "process": 39224, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:58:00.385410", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40248, "thread_name": "MainThread", "process": 39224, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T16:58:00.423312", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40248, "thread_name": "MainThread", "process": 39224, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T16:58:00.424335", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40248, "thread_name": "MainThread", "process": 39224, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:58:00.427322", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40248, "thread_name": "MainThread", "process": 39224, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:58:47.923439", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 17828, "thread_name": "MainThread", "process": 34508, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:58:48.973324", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 17828, "thread_name": "MainThread", "process": 34508, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:58:48.973324", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 17828, "thread_name": "MainThread", "process": 34508, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T16:58:49.017004", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 17828, "thread_name": "MainThread", "process": 34508, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T16:58:49.018294", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 17828, "thread_name": "MainThread", "process": 34508, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:58:49.020591", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 17828, "thread_name": "MainThread", "process": 34508, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:59:06.110272", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 17828, "thread_name": "MainThread", "process": 34508, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:59:07.847548", "level": "INFO", "logger": "whysper.app.main", "message": "Static files directory: C:\\Code2025\\Whysper\\backend\\static", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 17828, "thread_name": "MainThread", "process": 34508, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:59:09.262005", "level": "INFO", "logger": "whysper.app.main", "message": "Starting Whysper Web2 Backend v2.0.0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 17828, "thread_name": "MainThread", "process": 34508, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T16:59:09.264009", "level": "INFO", "logger": "whysper.app.main", "message": "Server running on 0.0.0.0:8003", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 17828, "thread_name": "MainThread", "process": 34508, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T16:59:09.265538", "level": "INFO", "logger": "whysper.app.main", "message": "Debug mode: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 17828, "thread_name": "MainThread", "process": 34508, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T16:59:09.266881", "level": "INFO", "logger": "whysper.app.main", "message": "CORS origins: ['http://localhost:3000', 'http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:5176', 'http://localhost:5177', 'http://localhost:5178', 'http://127.0.0.1:3000', 'http://127.0.0.1:5173', 'http://127.0.0.1:5174', 'http://127.0.0.1:5175', 'http://127.0.0.1:5176', 'http://127.0.0.1:5177']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 17828, "thread_name": "MainThread", "process": 34508, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T16:59:09.269411", "level": "INFO", "logger": "whysper.app.main", "message": "Real-time log broadcasting enabled - connect to GET /api/v1/logs/stream", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 17828, "thread_name": "MainThread", "process": 34508, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T16:59:09.271777", "level": "INFO", "logger": "whysper.app.main", "message": "FastMCP server integration initialized", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 17828, "thread_name": "MainThread", "process": 34508, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T16:59:09.272779", "level": "INFO", "logger": "whysper.app.main", "message": "MCP endpoints available at /mcp/*", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 17828, "thread_name": "MainThread", "process": 34508, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T16:59:09.276781", "level": "INFO", "logger": "whysper.app.main", "message": "MCP tools: generate_diagram, render_diagram, generate_and_render", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 17828, "thread_name": "MainThread", "process": 34508, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T16:59:09.278066", "level": "INFO", "logger": "whysper.app.main", "message": "MCP WebSocket endpoint: /mcp/ws", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 17828, "thread_name": "MainThread", "process": 34508, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T16:59:44.299185", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26672, "thread_name": "MainThread", "process": 24744, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:59:45.476256", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26672, "thread_name": "MainThread", "process": 24744, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:59:45.477287", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26672, "thread_name": "MainThread", "process": 24744, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T16:59:45.517663", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26672, "thread_name": "MainThread", "process": 24744, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T16:59:45.519671", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26672, "thread_name": "MainThread", "process": 24744, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T16:59:45.520952", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26672, "thread_name": "MainThread", "process": 24744, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T17:00:01.754408", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26672, "thread_name": "MainThread", "process": 24744, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T17:00:02.968913", "level": "INFO", "logger": "whysper.app.main", "message": "Static files directory: C:\\Code2025\\Whysper\\backend\\static", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26672, "thread_name": "MainThread", "process": 24744, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T17:00:03.529125", "level": "INFO", "logger": "whysper.app.main", "message": "Starting Whysper Web2 Backend v2.0.0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26672, "thread_name": "MainThread", "process": 24744, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T17:00:03.532134", "level": "INFO", "logger": "whysper.app.main", "message": "Server running on 0.0.0.0:8003", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26672, "thread_name": "MainThread", "process": 24744, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T17:00:03.535121", "level": "INFO", "logger": "whysper.app.main", "message": "Debug mode: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26672, "thread_name": "MainThread", "process": 24744, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T17:00:03.536548", "level": "INFO", "logger": "whysper.app.main", "message": "CORS origins: ['http://localhost:3000', 'http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:5176', 'http://localhost:5177', 'http://localhost:5178', 'http://127.0.0.1:3000', 'http://127.0.0.1:5173', 'http://127.0.0.1:5174', 'http://127.0.0.1:5175', 'http://127.0.0.1:5176', 'http://127.0.0.1:5177']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26672, "thread_name": "MainThread", "process": 24744, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T17:00:03.540596", "level": "INFO", "logger": "whysper.app.main", "message": "Real-time log broadcasting enabled - connect to GET /api/v1/logs/stream", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26672, "thread_name": "MainThread", "process": 24744, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T17:00:03.545576", "level": "INFO", "logger": "whysper.app.main", "message": "FastMCP server integration initialized", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26672, "thread_name": "MainThread", "process": 24744, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T17:00:03.549584", "level": "INFO", "logger": "whysper.app.main", "message": "MCP endpoints available at /mcp/*", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26672, "thread_name": "MainThread", "process": 24744, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T17:00:03.554337", "level": "INFO", "logger": "whysper.app.main", "message": "MCP tools: generate_diagram, render_diagram, generate_and_render", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26672, "thread_name": "MainThread", "process": 24744, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T17:00:03.563223", "level": "INFO", "logger": "whysper.app.main", "message": "MCP WebSocket endpoint: /mcp/ws", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26672, "thread_name": "MainThread", "process": 24744, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T18:44:28.112972", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 34828, "thread_name": "MainThread", "process": 28416, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:44:29.210447", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 34828, "thread_name": "MainThread", "process": 28416, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:44:29.210447", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 34828, "thread_name": "MainThread", "process": 28416, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T18:44:29.258817", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 34828, "thread_name": "MainThread", "process": 28416, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T18:44:29.259805", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 34828, "thread_name": "MainThread", "process": 28416, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:44:29.260781", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 34828, "thread_name": "MainThread", "process": 28416, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:44:36.830347", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 34828, "thread_name": "MainThread", "process": 28416, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:44:37.260671", "level": "INFO", "logger": "whysper.app.main", "message": "Static files directory: C:\\Code2025\\Whysper\\backend\\static", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 34828, "thread_name": "MainThread", "process": 28416, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:44:56.805025", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36752, "thread_name": "MainThread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:44:57.810940", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36752, "thread_name": "MainThread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:44:57.811931", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36752, "thread_name": "MainThread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T18:44:57.848696", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36752, "thread_name": "MainThread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T18:44:57.849701", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36752, "thread_name": "MainThread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:44:57.850699", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36752, "thread_name": "MainThread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:07.348293", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36752, "thread_name": "MainThread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:08.085559", "level": "INFO", "logger": "whysper.app.main", "message": "Static files directory: C:\\Code2025\\Whysper\\backend\\static", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36752, "thread_name": "MainThread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:09.161149", "level": "INFO", "logger": "whysper.app.main", "message": "Starting Whysper Web2 Backend v2.0.0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36752, "thread_name": "MainThread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T18:45:09.164150", "level": "INFO", "logger": "whysper.app.main", "message": "Server running on 0.0.0.0:8003", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36752, "thread_name": "MainThread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T18:45:09.166205", "level": "INFO", "logger": "whysper.app.main", "message": "Debug mode: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36752, "thread_name": "MainThread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T18:45:09.168680", "level": "INFO", "logger": "whysper.app.main", "message": "CORS origins: ['http://localhost:3000', 'http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:5176', 'http://localhost:5177', 'http://localhost:5178', 'http://127.0.0.1:3000', 'http://127.0.0.1:5173', 'http://127.0.0.1:5174', 'http://127.0.0.1:5175', 'http://127.0.0.1:5176', 'http://127.0.0.1:5177']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36752, "thread_name": "MainThread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T18:45:09.171127", "level": "INFO", "logger": "whysper.app.main", "message": "Real-time log broadcasting enabled - connect to GET /api/v1/logs/stream", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36752, "thread_name": "MainThread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T18:45:09.172450", "level": "INFO", "logger": "whysper.app.main", "message": "FastMCP server integration initialized", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36752, "thread_name": "MainThread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T18:45:09.174571", "level": "INFO", "logger": "whysper.app.main", "message": "MCP endpoints available at /mcp/*", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36752, "thread_name": "MainThread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T18:45:09.175914", "level": "INFO", "logger": "whysper.app.main", "message": "MCP tools: generate_diagram, render_diagram, generate_and_render", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36752, "thread_name": "MainThread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T18:45:09.177453", "level": "INFO", "logger": "whysper.app.main", "message": "MCP WebSocket endpoint: /mcp/ws", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36752, "thread_name": "MainThread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T18:45:32.312024", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:32.314023", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:32.326587", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:32.329200", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:32.393292", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:32.418498", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:32.439075", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:32.479128", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:33.872532", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:33.875533", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:33.886599", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:33.889596", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:38.652721", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36752, "thread_name": "MainThread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-17"}}
{"timestamp": "2025-10-20T18:45:45.125623", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.131656", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'hello', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.137646", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: hello", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.143193", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.146295", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.148320", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.166898", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Creating new conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.174899", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Creating conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.177176", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T18:45:45.214565", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T18:45:45.216582", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.225032", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initializing conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.228031", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Set default model: qwen/qwen3-coder-30b-a3b-instruct", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.230044", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initialized session logger for: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.230556", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Created new conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.239390", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Conversation session conv-1 initialized successfully", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.241506", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Setting API key for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.244506", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "API key updated for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.247046", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Session created", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.251170", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.254169", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Provider update skipped - same or empty provider: 'openrouter'", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.258163", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating model to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.260696", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Model updated", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.263705", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Model changed to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.265697", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.266709", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Using agent prompt: You are a helpful AI assistant specialized in code analysis and development....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.267887", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.271617", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.272832", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.273864", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.275270", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.277290", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is first message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.278288", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "First question has no file context in session conv-1 - proceeding without code context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.281392", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.282714", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.284724", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.286070", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.287313", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=True)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.288839", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.291351", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.293370", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: True, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.294369", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.297838", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.299364", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "⚠️ First message but NO SELECTED FILES", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.302841", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:45.304849", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:45:49.156213", "level": "ERROR", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Error processing chat message: OpenRouter API key is invalid or expired", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 36936, "thread_name": "AnyIO worker thread", "process": 35608, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:24.254789", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 24556, "thread_name": "MainThread", "process": 31384, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:25.136950", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 24556, "thread_name": "MainThread", "process": 31384, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:25.143942", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 24556, "thread_name": "MainThread", "process": 31384, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T18:48:25.215001", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 24556, "thread_name": "MainThread", "process": 31384, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T18:48:25.216002", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 24556, "thread_name": "MainThread", "process": 31384, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:25.220448", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 24556, "thread_name": "MainThread", "process": 31384, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:33.984267", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 24556, "thread_name": "MainThread", "process": 31384, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:34.440044", "level": "INFO", "logger": "whysper.app.main", "message": "Static files directory: C:\\Code2025\\Whysper\\backend\\static", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 24556, "thread_name": "MainThread", "process": 31384, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:45.155661", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:45.790879", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:45.791889", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T18:48:45.812900", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T18:48:45.813900", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:45.815017", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:52.731405", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:53.265311", "level": "INFO", "logger": "whysper.app.main", "message": "Static files directory: C:\\Code2025\\Whysper\\backend\\static", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:53.644598", "level": "INFO", "logger": "whysper.app.main", "message": "Starting Whysper Web2 Backend v2.0.0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T18:48:53.646610", "level": "INFO", "logger": "whysper.app.main", "message": "Server running on 0.0.0.0:8003", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T18:48:53.647636", "level": "INFO", "logger": "whysper.app.main", "message": "Debug mode: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T18:48:53.648609", "level": "INFO", "logger": "whysper.app.main", "message": "CORS origins: ['http://localhost:3000', 'http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:5176', 'http://localhost:5177', 'http://localhost:5178', 'http://127.0.0.1:3000', 'http://127.0.0.1:5173', 'http://127.0.0.1:5174', 'http://127.0.0.1:5175', 'http://127.0.0.1:5176', 'http://127.0.0.1:5177']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T18:48:53.650611", "level": "INFO", "logger": "whysper.app.main", "message": "Real-time log broadcasting enabled - connect to GET /api/v1/logs/stream", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T18:48:53.651747", "level": "INFO", "logger": "whysper.app.main", "message": "FastMCP server integration initialized", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T18:48:53.652762", "level": "INFO", "logger": "whysper.app.main", "message": "MCP endpoints available at /mcp/*", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T18:48:53.653762", "level": "INFO", "logger": "whysper.app.main", "message": "MCP tools: generate_diagram, render_diagram, generate_and_render", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T18:48:53.656217", "level": "INFO", "logger": "whysper.app.main", "message": "MCP WebSocket endpoint: /mcp/ws", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T18:48:54.220128", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-4"}}
{"timestamp": "2025-10-20T18:48:57.275538", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:57.301461", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'hello', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:57.313562", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: hello", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:57.325582", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:57.330637", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:57.332755", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:57.347228", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Creating new conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:57.361753", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Creating conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:57.367872", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T18:48:57.453293", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T18:48:57.459533", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:57.468685", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initializing conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:57.477966", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Set default model: qwen/qwen3-coder-30b-a3b-instruct", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:57.487121", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initialized session logger for: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:57.491908", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Created new conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:57.501147", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Conversation session conv-1 initialized successfully", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:57.508973", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Setting API key for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:57.510998", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "API key updated for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:57.512425", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Session created", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:57.519856", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:57.521854", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:57.524277", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:57.526558", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:57.530077", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:57.532074", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:57.533079", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:57.537079", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is first message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:57.539079", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "First question has no file context in session conv-1 - proceeding without code context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:57.540078", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:57.541708", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:57.542724", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:57.546726", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:57.547964", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=True)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:57.548977", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:57.556386", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:57.558408", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: True, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:57.560642", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:57.562655", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:57.569743", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "⚠️ First message but NO SELECTED FILES", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:57.572743", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:57.574201", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:59.474034", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761004138-EHQ12Z6qEnw6cmSMDrr6\",\n  \"provider\": \"SiliconFlow\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761004138,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"Hello! I'm ready to help you with code analysis. Could you please share the codebase or specific code you'd like me to examine? I can help with things like:\\n\\n- Code review and suggestions\\n- Bug identification\\n- Performance optimization\\n- Code structure analysis\\n- Best practices recommendations\\n- Explanation of specific code sections\\n\\nPlease paste the code or describe what you'd like help with, and I'll assist you accordingly!\",\n        \"refusal\": null,\n        \"reasoning\": null\n      }\n    }\n  ],\n  \"system_fingerprint\": \"\",\n  \"usage\": {\n    \"prompt_tokens\": 35,\n    \"completion_tokens\": 87,\n    \"total_t", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:59.478036", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 429 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:59.480397", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: Hello! I'm ready to help you with code analysis. Could you please share the codebase or specific code you'd like me to examine? I can help with things like:\n\n- Code review and suggestions\n- Bug identi", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:59.482414", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 429 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:59.488418", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No D2 diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:59.490771", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 429 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:59.496842", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No Mermaid diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:59.498862", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After Mermaid validation/fix: 429 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:59.501292", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] No agent prompt provided for question: hello...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:59.504737", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 1.958s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:59.519938", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:59.537822", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:59.693579", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 1.96s using 122 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:59.696598", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:59.697620", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "Created new GUID abab54e4-f675-493d-8080-554155708779 for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:59.699634", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "No history file found for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:59.704813", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251020-184859_abab54e4-f675-493d-8080-554155708779.json (2 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:59.707812", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (2 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:59.708812", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:48:59.770989", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:25.088234", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:25.089233", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'create a mermaid diagram on a crm software', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:25.090236", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: create a mermaid diagram on a crm software", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:25.091238", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:25.092237", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:25.092237", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:25.094441", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Retrieved existing session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:25.095439", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:25.096442", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:25.097450", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:25.098444", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:25.099439", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:25.100439", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:25.103640", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:25.104952", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is follow-up message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:25.106969", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:25.108297", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:25.109308", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:25.110310", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:25.114796", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: False (first_message=False)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:25.117844", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Detected Mermaid diagram request, loading mermaid-architecture.md prompt", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:25.121792", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Auto-detected diagram request, using agent prompt: ---\ntitle: \"Mermaid Diagram Generation Expert (Rei...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:25.122794", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:25.123796", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:25.125115", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: False, needs_context: False", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:25.126172", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:25.129188", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:25.130185", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "❌ No codebase context needed, returning empty", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:25.131186", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:25.132497", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:29.271157", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761004165-Ua7oZddfemjxwP2wW1LN\",\n  \"provider\": \"SiliconFlow\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761004165,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```mermaid\\ngraph TD\\n    A[CRM Software System] --> B[User Management]\\n    A --> C[Contact Management]\\n    A --> D[Sales Pipeline]\\n    A --> E[Marketing Automation]\\n    A --> F[Reporting & Analytics]\\n    A --> G[Integrations]\\n\\n    B --> B1[User Authentication]\\n    B --> B2[Role Management]\\n    B --> B3[Permission Control]\\n    B --> B4[User Profiles]\\n\\n    C --> C1[Contact Database]\\n    C --> C2[Contact Import/Export]\\n    C --> C3[Contact Segmentation]\\n    C --> C4[Contact History]\\n\\n    D --> D1[Lead Management]\\n    D --> D2[Opportunity Tracking]\\n    D --> D3[Pipeline Visualization]\\n    D -->", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:29.273137", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 1497 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:29.274416", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```mermaid\ngraph TD\n    A[CRM Software System] --> B[User Management]\n    A --> C[Contact Management]\n    A --> D[Sales Pipeline]\n    A --> E[Marketing Automation]\n    A --> F[Reporting & Analytics]\n ", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:29.276210", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 1497 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:29.277479", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No D2 diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:29.278314", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 1497 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:29.279422", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 [MERMAID PROGRESS] Found 1 Mermaid diagram(s) - validating syntax...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:29.282366", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "[MERMAID PROGRESS] Validation attempt 1/5", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:36.102108", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [MERMAID PROGRESS] All Mermaid diagrams validated successfully!", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:36.103574", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After Mermaid validation/fix: 1497 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:36.105590", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Using agent prompt for question: create a mermaid diagram on a crm software...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:36.106591", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt length: 7435 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:36.109130", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt preview: ---\ntitle: \"Mermaid Diagram Generation Expert (Reinforced)\"\ndescription: \"Generate Mermaid Diagrams\"\ncategory: [\"Code Review\", \"Software Development\", \"Quality Assurance\"]\nauthor: \"Eric M\"\ncreated: \"2...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:36.111125", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Question contains diagram keywords", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:36.112135", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response preview: ```mermaid\ngraph TD\n    A[CRM Software System] --> B[User Management]\n    A --> C[Contact Management]\n    A --> D[Sales Pipeline]\n    A --> E[Marketing Automation]\n    A --> F[Reporting & Analytics]\n    A --> G[Integrations]\n\n    B --> B1[User Authentication]\n    B --> B2[Role Management]\n    B --> B3[Permission Control]\n    B --> B4[User Profiles]\n\n    C --> C1[Contact Database]\n    C --> C2[Contact Import/Export]\n    C --> C3[Contact Segmentation]\n    C --> C4[Contact History]\n\n    D --> D1[Le...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:36.114118", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response contains Mermaid code block", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:36.116552", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 11.006s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:36.118551", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:36.121145", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:36.253150", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 11.01s using 608 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:36.254153", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:36.276791", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Loaded conversation history: C:\\Code2025\\Whysper\\history\\20251020-184859_abab54e4-f675-493d-8080-554155708779.json", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:36.280791", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251020-184859_abab54e4-f675-493d-8080-554155708779.json (4 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:36.282789", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (4 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:36.282789", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:36.313858", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:49:36.750339", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-20"}}
{"timestamp": "2025-10-20T18:49:36.763273", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-21"}}
{"timestamp": "2025-10-20T18:49:36.771713", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-22"}}
{"timestamp": "2025-10-20T18:49:36.937047", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-23"}}
{"timestamp": "2025-10-20T18:49:36.978174", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-24"}}
{"timestamp": "2025-10-20T18:49:36.998446", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-28"}}
{"timestamp": "2025-10-20T18:49:37.015899", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-29"}}
{"timestamp": "2025-10-20T18:49:37.035691", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-30"}}
{"timestamp": "2025-10-20T18:49:37.046703", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-31"}}
{"timestamp": "2025-10-20T18:49:37.061496", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-32"}}
{"timestamp": "2025-10-20T18:49:37.080526", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-33"}}
{"timestamp": "2025-10-20T18:49:37.097558", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-34"}}
{"timestamp": "2025-10-20T18:49:37.128640", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-35"}}
{"timestamp": "2025-10-20T18:49:37.142058", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-36"}}
{"timestamp": "2025-10-20T18:49:37.154164", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-37"}}
{"timestamp": "2025-10-20T18:49:37.163689", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-38"}}
{"timestamp": "2025-10-20T18:49:37.174233", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-39"}}
{"timestamp": "2025-10-20T18:49:37.184886", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-40"}}
{"timestamp": "2025-10-20T18:49:37.194018", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41"}}
{"timestamp": "2025-10-20T18:49:37.207259", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-42"}}
{"timestamp": "2025-10-20T18:49:58.832736", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 Log stream client disconnected (cancelled, session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap"}}
{"timestamp": "2025-10-20T18:50:02.271033", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:02.322952", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-54"}}
{"timestamp": "2025-10-20T18:50:02.411499", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:02.413558", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:02.425587", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:02.610085", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:02.610085", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:02.633837", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:02.641163", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:02.756904", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:02.760226", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:02.765513", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39224, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:02.766746", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:24.405029", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:24.415867", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'create a mermaid diagram of an iphone app', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:24.424247", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: create a mermaid diagram of an iphone app", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:24.428461", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:24.431252", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:24.440011", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:24.446301", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Retrieved existing session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:24.448298", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:24.449301", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:24.450301", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:24.452304", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:24.460441", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:24.475666", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:24.479670", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:24.481686", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is follow-up message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:24.482683", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:24.483692", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:24.486024", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:24.489338", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:24.492336", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=False)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:24.494333", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Detected Mermaid diagram request, loading mermaid-architecture.md prompt", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:24.496739", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Auto-detected diagram request, using agent prompt: ---\ntitle: \"Mermaid Diagram Generation Expert (Rei...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:24.498759", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:24.501754", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:24.506223", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: False, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:24.508224", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:24.512542", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:24.513542", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:24.514547", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:28.903092", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761004224-FhFZB030TRbUVHS91hxt\",\n  \"provider\": \"Nebius\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761004224,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```mermaid\\ngraph TD\\n    A[iPhone App Architecture] --> B[UI Layer]\\n    A --> C[Business Logic Layer]\\n    A --> D[Data Layer]\\n    A --> E[Network Layer]\\n\\n    B --> B1[Main Screen]\\n    B --> B2[Navigation Controller]\\n    B --> B3[View Controllers]\\n    B --> B4[UI Components]\\n    B --> B5[Storyboard/XIB Files]\\n\\n    C --> C1[App Delegate]\\n    C --> C2[View Models]\\n    C --> C3[Business Rules]\\n    C --> C4[Service Managers]\\n    C --> C5[Core Data Manager]\\n\\n    D --> D1[Local Storage]\\n    D --> D2[Core Data]\\n    D --> D3[UserDefaults]\\n    D --> D4[File System]\\n    D --> D5[Cache Management]\\n\\n    E", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:28.904071", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 1618 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:28.905071", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```mermaid\ngraph TD\n    A[iPhone App Architecture] --> B[UI Layer]\n    A --> C[Business Logic Layer]\n    A --> D[Data Layer]\n    A --> E[Network Layer]\n\n    B --> B1[Main Screen]\n    B --> B2[Navigati", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:28.906075", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 1618 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:28.907092", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No D2 diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:28.908089", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 1618 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:28.909095", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 [MERMAID PROGRESS] Found 1 Mermaid diagram(s) - validating syntax...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:28.910086", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "[MERMAID PROGRESS] Validation attempt 1/5", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:35.631379", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [MERMAID PROGRESS] All Mermaid diagrams validated successfully!", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:35.632384", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After Mermaid validation/fix: 1618 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:35.633900", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Using agent prompt for question: create a mermaid diagram of an iphone app...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:35.635761", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt length: 7435 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:35.637977", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt preview: ---\ntitle: \"Mermaid Diagram Generation Expert (Reinforced)\"\ndescription: \"Generate Mermaid Diagrams\"\ncategory: [\"Code Review\", \"Software Development\", \"Quality Assurance\"]\nauthor: \"Eric M\"\ncreated: \"2...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:35.640515", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Question contains diagram keywords", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:35.644504", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response preview: ```mermaid\ngraph TD\n    A[iPhone App Architecture] --> B[UI Layer]\n    A --> C[Business Logic Layer]\n    A --> D[Data Layer]\n    A --> E[Network Layer]\n\n    B --> B1[Main Screen]\n    B --> B2[Navigation Controller]\n    B --> B3[View Controllers]\n    B --> B4[UI Components]\n    B --> B5[Storyboard/XIB Files]\n\n    C --> C1[App Delegate]\n    C --> C2[View Models]\n    C --> C3[Business Rules]\n    C --> C4[Service Managers]\n    C --> C5[Core Data Manager]\n\n    D --> D1[Local Storage]\n    D --> D2[Cor...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:35.647033", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response contains Mermaid code block", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:35.649034", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 11.161s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:35.650447", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:35.656883", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:35.848686", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 11.16s using 1179 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:35.849679", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:35.901707", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Loaded conversation history: C:\\Code2025\\Whysper\\history\\20251020-184859_abab54e4-f675-493d-8080-554155708779.json", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:35.906857", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251020-184859_abab54e4-f675-493d-8080-554155708779.json (6 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:35.908877", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (6 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:35.913411", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:35.952756", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:50:36.254924", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-64"}}
{"timestamp": "2025-10-20T18:50:36.263116", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-65"}}
{"timestamp": "2025-10-20T18:50:36.269681", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-66"}}
{"timestamp": "2025-10-20T18:50:36.276550", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-67"}}
{"timestamp": "2025-10-20T18:50:36.288167", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-68"}}
{"timestamp": "2025-10-20T18:50:36.296104", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-69"}}
{"timestamp": "2025-10-20T18:50:36.304638", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70"}}
{"timestamp": "2025-10-20T18:50:36.322108", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-71"}}
{"timestamp": "2025-10-20T18:50:36.347227", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-72"}}
{"timestamp": "2025-10-20T18:50:36.369775", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-73"}}
{"timestamp": "2025-10-20T18:50:36.388595", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-74"}}
{"timestamp": "2025-10-20T18:50:36.401596", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-75"}}
{"timestamp": "2025-10-20T18:50:36.457636", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-76"}}
{"timestamp": "2025-10-20T18:50:36.465534", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-77"}}
{"timestamp": "2025-10-20T18:50:36.476144", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-78"}}
{"timestamp": "2025-10-20T18:50:36.489869", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-79"}}
{"timestamp": "2025-10-20T18:50:36.501868", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-80"}}
{"timestamp": "2025-10-20T18:50:36.509403", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-81"}}
{"timestamp": "2025-10-20T18:50:36.522182", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-82"}}
{"timestamp": "2025-10-20T18:50:36.540745", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-83"}}
{"timestamp": "2025-10-20T18:50:53.443555", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-87"}}
{"timestamp": "2025-10-20T18:50:53.450554", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-88"}}
{"timestamp": "2025-10-20T18:50:53.460567", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-89"}}
{"timestamp": "2025-10-20T18:50:53.476589", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-90"}}
{"timestamp": "2025-10-20T18:50:53.482604", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-91"}}
{"timestamp": "2025-10-20T18:50:53.491602", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-92"}}
{"timestamp": "2025-10-20T18:50:53.497136", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-93"}}
{"timestamp": "2025-10-20T18:50:53.504380", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-94"}}
{"timestamp": "2025-10-20T18:50:53.513380", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-95"}}
{"timestamp": "2025-10-20T18:50:53.525860", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-96"}}
{"timestamp": "2025-10-20T18:50:53.533321", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-97"}}
{"timestamp": "2025-10-20T18:50:53.547864", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-98"}}
{"timestamp": "2025-10-20T18:51:30.532461", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-101"}}
{"timestamp": "2025-10-20T18:51:30.560159", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-102"}}
{"timestamp": "2025-10-20T18:51:30.579644", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-103"}}
{"timestamp": "2025-10-20T18:51:30.701211", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-104"}}
{"timestamp": "2025-10-20T18:51:30.779242", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-105"}}
{"timestamp": "2025-10-20T18:51:30.818686", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-106"}}
{"timestamp": "2025-10-20T18:51:30.837534", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-107"}}
{"timestamp": "2025-10-20T18:51:30.888066", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-111"}}
{"timestamp": "2025-10-20T18:51:30.922005", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-112"}}
{"timestamp": "2025-10-20T18:51:30.936526", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-113"}}
{"timestamp": "2025-10-20T18:51:31.072963", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-114"}}
{"timestamp": "2025-10-20T18:51:31.089165", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-115"}}
{"timestamp": "2025-10-20T18:51:51.157492", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:51:51.158491", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'create a D2 diagramn of an iphone app', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:51:51.160505", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: create a D2 diagramn of an iphone app", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:51:51.161500", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:51:51.162494", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:51:51.167022", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:51:51.173837", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Retrieved existing session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:51:51.175833", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:51:51.180340", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:51:51.181358", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:51:51.183879", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:51:51.184890", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:51:51.186880", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:51:51.188899", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:51:51.190904", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is follow-up message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:51:51.195226", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 3", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:51:51.200852", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:51:51.209438", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:51:51.221205", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:51:51.233637", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=False)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:51:51.242440", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Detected D2 diagram request, loading d2-architecture.md prompt", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:51:51.245968", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Auto-detected diagram request, using agent prompt: ---\ntitle: \"D2 Diagram Generation Expert (Reinforc...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:51:51.251224", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:51:51.260911", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:51:51.261912", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: False, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:51:51.262913", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:51:51.263911", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:51:51.265910", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:51:51.268504", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:51:59.233264", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761004311-3H4TmR9QPSwMhR8SnfjR\",\n  \"provider\": \"SiliconFlow\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761004311,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```d2\\n// iPhone App Architecture Diagram\\n\\n// Main App Container\\n\\\"iPhone App\\\" {\\n  style: filled\\n  fill: \\\"#4CAF50\\\"\\n  stroke: \\\"#333\\\"\\n  \\\"Main Screen\\\" {\\n    style: filled\\n    fill: \\\"#2196F3\\\"\\n    stroke: \\\"#333\\\"\\n    \\\"Navigation Controller\\\" {\\n      style: filled\\n      fill: \\\"#FF9800\\\"\\n      stroke: \\\"#333\\\"\\n    }\\n    \\\"View Controllers\\\" {\\n      style: filled\\n      fill: \\\"#9C27B0\\\"\\n      stroke: \\\"#333\\\"\\n    }\\n    \\\"UI Components\\\" {\\n      style: filled\\n      fill: \\\"#F44336\\\"\\n      stroke: \\\"#333\\\"\\n    }\\n  }\\n  \\n  \\\"Business Logic\\\" {\\n    style: filled\\n    fill: \\\"#FF5722\\", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:51:59.234249", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 2629 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:51:59.235249", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```d2\n// iPhone App Architecture Diagram\n\n// Main App Container\n\"iPhone App\" {\n  style: filled\n  fill: \"#4CAF50\"\n  stroke: \"#333\"\n  \"Main Screen\" {\n    style: filled\n    fill: \"#2196F3\"\n    stroke: \"#", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:51:59.236248", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 2629 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:51:59.237250", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 [D2 PROGRESS] Found 1 D2 diagram(s) - validating syntax...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:51:59.595856", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Validation attempt 1/8", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:51:59.977657", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "D2 diagram #1 validation failed: debug: using theme Neutral Default (ID: 0)\nerr: failed to compile ..\\..\\..\\Users\\Hack\\AppData\\Local\\Temp\\tmpvvhjtzhu.d2: C:\\Users\\Hack\\AppData\\Local\\Temp\\tmpvvhjtzhu.d2:5:3: \"style\" expected to be set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:51:59.981659", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔧 [D2 PROGRESS] Validation errors found - requesting AI auto-fix (attempt 1/8)...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:05.516492", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761004320-1vDTx4GPryNw09mP9eDm\",\n  \"provider\": \"Novita\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761004320,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```d2\\ngraph TD\\n    A[CRM Software System] --> B[User Management]\\n    A --> C[Contact Management]\\n    A --> D[Sales Pipeline]\\n    A --> E[Marketing Automation]\\n    A --> F[Reporting & Analytics]\\n    A --> G[Integrations]\\n\\n    B --> B1[User Authentication]\\n    B --> B2[Role Management]\\n    B --> B3[Permission Control]\\n    B --> B4[User Profiles]\\n\\n    C --> C1[Contact Database]\\n    C --> C2[Contact Import/Export]\\n    C --> C3[Contact Segmentation]\\n    C --> C4[Contact History]\\n\\n    D --> D1[Lead Management]\\n    D --> D2[Opportunity Tracking]\\n    D --> D3[Pipeline Visualization]\\n    D --> D4[Foreca", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:05.522789", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 1492 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:05.524789", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```d2\ngraph TD\n    A[CRM Software System] --> B[User Management]\n    A --> C[Contact Management]\n    A --> D[Sales Pipeline]\n    A --> E[Marketing Automation]\n    A --> F[Reporting & Analytics]\n    A ", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:05.526304", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [D2 PROGRESS] Received corrected D2 code (1492 chars) - re-validating...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:05.528325", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Validation attempt 2/8", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:05.825089", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "D2 diagram #1 validation failed: debug: using theme Neutral Default (ID: 0)\nerr: failed to compile ..\\..\\..\\Users\\Hack\\AppData\\Local\\Temp\\tmpns1qi207.d2: C:\\Users\\Hack\\AppData\\Local\\Temp\\tmpns1qi207.d2:2:6: unexpected text after map ", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:05.826094", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔧 [D2 PROGRESS] Validation errors found - requesting AI auto-fix (attempt 2/8)...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:09.336745", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761004326-tm0ptV298ODf92BLCeIM\",\n  \"provider\": \"DeepInfra\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761004326,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```d2\\n// iPhone App Architecture\\n{\\n  \\\"iPhone App Architecture\\\": {\\n    shape: rectangle\\n    \\\"UI Layer\\\": {\\n      shape: rectangle\\n      \\\"Main Screen\\\": {shape: rectangle}\\n      \\\"Navigation Controller\\\": {shape: rectangle}\\n      \\\"View Controllers\\\": {shape: rectangle}\\n      \\\"UI Components\\\": {shape: rectangle}\\n      \\\"Storyboard/XIB Files\\\": {shape: rectangle}\\n    }\\n    \\\"Business Logic Layer\\\": {\\n      shape: rectangle\\n      \\\"App Delegate\\\": {shape: rectangle}\\n      \\\"View Models\\\": {shape: rectangle}\\n      \\\"Business Rules\\\": {shape: rectangle}\\n      \\\"Service Managers\\\": {shape: rectang", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:09.338735", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 1779 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:09.339712", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```d2\n// iPhone App Architecture\n{\n  \"iPhone App Architecture\": {\n    shape: rectangle\n    \"UI Layer\": {\n      shape: rectangle\n      \"Main Screen\": {shape: rectangle}\n      \"Navigation Controller\": {", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:09.340732", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [D2 PROGRESS] Received corrected D2 code (1779 chars) - re-validating...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:09.343781", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Validation attempt 3/8", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:09.685001", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "D2 diagram #1 validation failed: debug: using theme Neutral Default (ID: 0)\nerr: failed to compile ..\\..\\..\\Users\\Hack\\AppData\\Local\\Temp\\tmp5kfe32kp.d2: C:\\Users\\Hack\\AppData\\Local\\Temp\\tmp5kfe32kp.d2:2:1: invalid text beginning unq", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:09.693536", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔧 [D2 PROGRESS] Validation errors found - requesting AI auto-fix (attempt 3/8)...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:12.125878", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761004330-I0vYP6MULJsqvmPU4NQI\",\n  \"provider\": \"SiliconFlow\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761004330,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```d2\\n{\\n  \\\"database\\\": {\\n    \\\"shape\\\": \\\"cylinder\\\"\\n  },\\n  \\\"web_app\\\": {\\n    \\\"shape\\\": \\\"rectangle\\\"\\n  },\\n  \\\"user\\\": {\\n    \\\"shape\\\": \\\"person\\\"\\n  },\\n  \\\"cloud\\\": {\\n    \\\"shape\\\": \\\"cloud\\\"\\n  }\\n}\\n\\n\\\"User\\\" {\\n  \\\"shape\\\": \\\"person\\\"\\n}\\n\\n\\\"CRM Database\\\" {\\n  \\\"shape\\\": \\\"cylinder\\\"\\n}\\n\\n\\\"Web Application\\\" {\\n  \\\"shape\\\": \\\"rectangle\\\"\\n}\\n\\n\\\"Cloud Service\\\" {\\n  \\\"shape\\\": \\\"cloud\\\"\\n}\\n\\n\\\"User\\\" -> \\\"CRM Database\\\"\\n\\\"Web Application\\\" -> \\\"CRM Database\\\"\\n\\\"Cloud Service\\\" -> \\\"CRM Database\\\"\\n```\",\n        \"refusal\": null,\n        \"reasoning\": null\n      }\n    }\n  ],\n  \"system_fing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:12.129884", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 436 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:12.131881", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```d2\n{\n  \"database\": {\n    \"shape\": \"cylinder\"\n  },\n  \"web_app\": {\n    \"shape\": \"rectangle\"\n  },\n  \"user\": {\n    \"shape\": \"person\"\n  },\n  \"cloud\": {\n    \"shape\": \"cloud\"\n  }\n}\n\n\"User\" {\n  \"shape\": \"p", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:12.134878", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [D2 PROGRESS] Received corrected D2 code (436 chars) - re-validating...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:12.138513", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Validation attempt 4/8", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:12.465326", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "D2 diagram #1 validation failed: debug: using theme Neutral Default (ID: 0)\nerr: failed to compile ..\\..\\..\\Users\\Hack\\AppData\\Local\\Temp\\tmpevx4jk_u.d2: C:\\Users\\Hack\\AppData\\Local\\Temp\\tmpevx4jk_u.d2:1:1: invalid text beginning unq", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:12.467302", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔧 [D2 PROGRESS] Validation errors found - requesting AI auto-fix (attempt 4/8)...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:13.875724", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761004332-u8SRUeQVO9dQ9yykkNvA\",\n  \"provider\": \"Nebius\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761004332,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```d2\\n{\\n  \\\"database\\\": {\\n    \\\"shape\\\": \\\"cylinder\\\"\\n  },\\n  \\\"web_app\\\": {\\n    \\\"shape\\\": \\\"rectangle\\\"\\n  },\\n  \\\"user\\\": {\\n    \\\"shape\\\": \\\"person\\\"\\n  },\\n  \\\"cloud\\\": {\\n    \\\"shape\\\": \\\"cloud\\\"\\n  }\\n}\\n```\",\n        \"refusal\": null,\n        \"reasoning\": null\n      }\n    }\n  ],\n  \"usage\": {\n    \"prompt_tokens\": 1461,\n    \"completion_tokens\": 66,\n    \"total_tokens\": 1527\n  }\n}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:13.877726", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 180 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:13.879455", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```d2\n{\n  \"database\": {\n    \"shape\": \"cylinder\"\n  },\n  \"web_app\": {\n    \"shape\": \"rectangle\"\n  },\n  \"user\": {\n    \"shape\": \"person\"\n  },\n  \"cloud\": {\n    \"shape\": \"cloud\"\n  }\n}\n```", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:13.881466", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [D2 PROGRESS] Received corrected D2 code (180 chars) - re-validating...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:13.882473", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Validation attempt 5/8", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:14.218088", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "D2 diagram #1 validation failed: debug: using theme Neutral Default (ID: 0)\nerr: failed to compile ..\\..\\..\\Users\\Hack\\AppData\\Local\\Temp\\tmpuhhuw_i9.d2: C:\\Users\\Hack\\AppData\\Local\\Temp\\tmpuhhuw_i9.d2:1:1: invalid text beginning unq", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:14.221260", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔧 [D2 PROGRESS] Validation errors found - requesting AI auto-fix (attempt 5/8)...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:15.592921", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761004334-e9ggJZuzBcBeGextOQvM\",\n  \"provider\": \"Novita\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761004334,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```d2\\n// D2 Diagram #1\\n{\\n  \\\"Databases\\\": {\\n    \\\"shape\\\": \\\"cylinder\\\"\\n  },\\n  \\\"Web/Apps\\\": {\\n    \\\"shape\\\": \\\"rectangle\\\"\\n  },\\n  \\\"Users\\\": {\\n    \\\"shape\\\": \\\"person\\\"\\n  },\\n  \\\"Cloud\\\": {\\n    \\\"shape\\\": \\\"cloud\\\"\\n  }\\n}\\n```\",\n        \"refusal\": null,\n        \"reasoning\": null\n      }\n    }\n  ],\n  \"system_fingerprint\": \"\",\n  \"usage\": {\n    \"prompt_tokens\": 1461,\n    \"completion_tokens\": 75,\n    \"total_tokens\": 1536,\n    \"prompt_tokens_details\": null,\n    \"completion_tokens_details\": null\n  }\n}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:15.596918", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 200 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:15.597915", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```d2\n// D2 Diagram #1\n{\n  \"Databases\": {\n    \"shape\": \"cylinder\"\n  },\n  \"Web/Apps\": {\n    \"shape\": \"rectangle\"\n  },\n  \"Users\": {\n    \"shape\": \"person\"\n  },\n  \"Cloud\": {\n    \"shape\": \"cloud\"\n  }\n}\n```", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:15.599916", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [D2 PROGRESS] Received corrected D2 code (200 chars) - re-validating...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:15.609357", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Validation attempt 6/8", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:15.914669", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "D2 diagram #1 validation failed: debug: using theme Neutral Default (ID: 0)\nerr: failed to compile ..\\..\\..\\Users\\Hack\\AppData\\Local\\Temp\\tmpw1n5wsxi.d2: C:\\Users\\Hack\\AppData\\Local\\Temp\\tmpw1n5wsxi.d2:2:1: invalid text beginning unq", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:15.915650", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔧 [D2 PROGRESS] Validation errors found - requesting AI auto-fix (attempt 6/8)...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:18.121221", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761004336-Cvqw1Ko8TIAxWJJZLRH9\",\n  \"provider\": \"DeepInfra\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761004336,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```d2\\n// D2 Diagram - CRM Software Architecture\\n{\\n  // Database nodes\\n  customer_database: {\\n    shape: cylinder\\n    label: \\\"Customer Database\\\"\\n  }\\n  \\n  product_database: {\\n    shape: cylinder\\n    label: \\\"Product Database\\\"\\n  }\\n  \\n  order_database: {\\n    shape: cylinder\\n    label: \\\"Order Database\\\"\\n  }\\n  \\n  // Web/App nodes\\n  web_portal: {\\n    shape: rectangle\\n    label: \\\"Web Portal\\\"\\n  }\\n  \\n  mobile_app: {\\n    shape: rectangle\\n    label: \\\"Mobile App\\\"\\n  }\\n  \\n  admin_panel: {\\n    shape: rectangle\\n    label: \\\"Admin Panel\\\"\\n  }\\n  \\n  // User nodes\\n  sales_rep: {\\n    shape:", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:18.124244", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 1051 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:18.126239", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```d2\n// D2 Diagram - CRM Software Architecture\n{\n  // Database nodes\n  customer_database: {\n    shape: cylinder\n    label: \"Customer Database\"\n  }\n  \n  product_database: {\n    shape: cylinder\n    lab", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:18.128477", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [D2 PROGRESS] Received corrected D2 code (1051 chars) - re-validating...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:18.130404", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Validation attempt 7/8", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:18.449636", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "D2 diagram #1 validation failed: debug: using theme Neutral Default (ID: 0)\nerr: failed to compile ..\\..\\..\\Users\\Hack\\AppData\\Local\\Temp\\tmpuc64_onf.d2: C:\\Users\\Hack\\AppData\\Local\\Temp\\tmpuc64_onf.d2:2:1: invalid text beginning unq", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:18.454151", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔧 [D2 PROGRESS] Validation errors found - requesting AI auto-fix (attempt 7/8)...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:23.012067", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761004338-DkDNzgG6U711aNQu26VS\",\n  \"provider\": \"SiliconFlow\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761004338,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```d2\\ntitle: iPhone App Architecture\\n\\n\\\"Main Screen\\\" -> \\\"Navigation Controller\\\"\\n\\\"Navigation Controller\\\" -> \\\"View Controllers\\\"\\n\\\"View Controllers\\\" -> \\\"UI Components\\\"\\n\\\"UI Components\\\" -> \\\"Storyboard/XIB Files\\\"\\n\\n\\\"App Delegate\\\" -> \\\"View Models\\\"\\n\\\"View Models\\\" -> \\\"Business Rules\\\"\\n\\\"Business Rules\\\" -> \\\"Service Managers\\\"\\n\\\"Service Managers\\\" -> \\\"Core Data Manager\\\"\\n\\n\\\"Local Storage\\\" -> \\\"Core Data\\\"\\n\\\"Core Data\\\" -> \\\"UserDefaults\\\"\\n\\\"UserDefaults\\\" -> \\\"File System\\\"\\n\\\"File System\\\" -> \\\"Cache Management\\\"\\n\\n\\\"API Manager\\\" -> \\\"Network Requests\\\"\\n\\\"Network Requests\\\" -> \\\"J", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:23.013064", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 1683 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:23.014059", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```d2\ntitle: iPhone App Architecture\n\n\"Main Screen\" -> \"Navigation Controller\"\n\"Navigation Controller\" -> \"View Controllers\"\n\"View Controllers\" -> \"UI Components\"\n\"UI Components\" -> \"Storyboard/XIB Fi", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:23.016232", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [D2 PROGRESS] Received corrected D2 code (1683 chars) - re-validating...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:23.017202", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Validation attempt 8/8", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:23.283031", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "D2 diagram #1 validation failed: debug: using theme Neutral Default (ID: 0)\nerr: failed to compile ..\\..\\..\\Users\\Hack\\AppData\\Local\\Temp\\tmpnbz70ofc.d2: C:\\Users\\Hack\\AppData\\Local\\Temp\\tmpnbz70ofc.d2:29:14: unexpected text after ma", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:23.288569", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔧 [D2 PROGRESS] Validation errors found - requesting AI auto-fix (attempt 8/8)...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:28.179653", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761004343-6vNSGruhnOgtF7dxb4um\",\n  \"provider\": \"SiliconFlow\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761004343,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```d2\\ntitle: iPhone App Architecture\\n\\n\\\"iPhone App Architecture\\\" -> \\\"UI Layer\\\"\\n\\\"iPhone App Architecture\\\" -> \\\"Business Logic Layer\\\"\\n\\\"iPhone App Architecture\\\" -> \\\"Data Layer\\\"\\n\\\"iPhone App Architecture\\\" -> \\\"Network Layer\\\"\\n\\n\\\"UI Layer\\\" -> \\\"Main Screen\\\"\\n\\\"UI Layer\\\" -> \\\"Navigation Controller\\\"\\n\\\"UI Layer\\\" -> \\\"View Controllers\\\"\\n\\\"UI Layer\\\" -> \\\"UI Components\\\"\\n\\\"UI Layer\\\" -> \\\"Storyboard/XIB Files\\\"\\n\\n\\\"Business Logic Layer\\\" -> \\\"App Delegate\\\"\\n\\\"Business Logic Layer\\\" -> \\\"View Models\\\"\\n\\\"Business Logic Layer\\\" -> \\\"Business Rules\\\"\\n\\\"Business Logic Layer\\\" -> \\\"Service Manage", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:28.182591", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 1443 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:28.184590", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```d2\ntitle: iPhone App Architecture\n\n\"iPhone App Architecture\" -> \"UI Layer\"\n\"iPhone App Architecture\" -> \"Business Logic Layer\"\n\"iPhone App Architecture\" -> \"Data Layer\"\n\"iPhone App Architecture\" ->", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:28.187589", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [D2 PROGRESS] Received corrected D2 code (1443 chars) - re-validating...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:28.189973", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "D2 validation failed after 8 retries", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:28.192003", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "Attempting pre-render despite validation errors...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:28.194008", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Pre-rendering D2 diagram #1 (1434 chars)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:29.673012", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Saved D2 diagram to: backend\\static\\d2_diagrams\\d2_diagram_20251020_185229_d0987f8f.svg", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:29.676184", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "D2 diagrams pre-rendered successfully", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:29.680192", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 40823 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:29.684325", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No Mermaid diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:29.690330", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After Mermaid validation/fix: 40823 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:29.692871", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Using agent prompt for question: create a D2 diagramn of an iphone app...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:29.693883", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt length: 5602 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:29.694900", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt preview: ---\ntitle: \"D2 Diagram Generation Expert (Reinforced)\"\ndescription: \"Generate D2 Diagrams\"\ncategory: [\"Code Review\", \"Software Development\", \"Quality Assurance\"]\nauthor: \"Eric M\"\ncreated: \"2025-09-27\"...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:29.696905", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Question contains diagram keywords", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:29.699426", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response preview: <div class=\"d2-diagram-container\" style=\"margin: 16px 0;\">\n<div style=\"display: inline-flex; align-items: center; gap: 6px; padding: 6px 12px; background: linear-gradient(135deg, #10b981 0%, #059669 100%); border-radius: 6px; margin-bottom: 12px; font-size: 12px; font-weight: 500; color: white;\">\n  <span style=\"font-size: 14px;\">✅</span>\n  <span>D2 Diagram Rendered Successfully</span>\n</div>\n  <div class=\"d2-rendered-diagram\">\n    <?xml version=\"1.0\" encoding=\"utf-8\"?><svg xmlns=\"http://www.w3.o...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:29.703369", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response does NOT contain Mermaid code block", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:29.709367", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 38.487s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:29.715875", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:29.726710", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:29.917992", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 38.49s using 2587 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:29.919990", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:29.963187", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Loaded conversation history: C:\\Code2025\\Whysper\\history\\20251020-184859_abab54e4-f675-493d-8080-554155708779.json", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:29.972212", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251020-184859_abab54e4-f675-493d-8080-554155708779.json (8 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:29.973307", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (8 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:29.975323", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:52:30.004686", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:15.655807", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:15.656806", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'create a mermaid diagram of an android app', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:15.657808", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: create a mermaid diagram of an android app", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:15.659284", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:15.660989", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:15.662239", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:15.666163", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Retrieved existing session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:15.669075", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:15.672086", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:15.676102", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:15.677609", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:15.678879", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:15.679390", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:15.682427", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:15.683425", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is follow-up message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:15.684425", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 4", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:15.689116", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:15.691687", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:15.692914", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:15.695430", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=False)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:15.698717", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Detected Mermaid diagram request, loading mermaid-architecture.md prompt", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:15.700910", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Auto-detected diagram request, using agent prompt: ---\ntitle: \"Mermaid Diagram Generation Expert (Rei...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:15.703599", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:15.707026", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:15.708029", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: False, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:15.709025", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:15.711035", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:15.712034", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:15.714077", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:22.503555", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761004457-njfsbt6TJQX5GOATB6D9\",\n  \"provider\": \"Nebius\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761004457,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```mermaid\\ngraph TD\\n    A[Android App Architecture] --> B[UI Layer]\\n    A --> C[Business Logic Layer]\\n    A --> D[Data Layer]\\n    A --> E[Dependencies]\\n\\n    B --> B1[Activities]\\n    B --> B2[Fragments]\\n    B --> B3[Views]\\n    B --> B4[Layouts]\\n    B --> B5[Resources]\\n\\n    C --> C1[ViewModel]\\n    C --> C2[Repository]\\n    C --> C3[Use Cases]\\n    C --> C4[Domain Layer]\\n    C --> C5[Interactors]\\n\\n    D --> D1[Local Database]\\n    D --> D2[Room Database]\\n    D --> D3[Shared Preferences]\\n    D --> D4[File Storage]\\n    D --> D5[Cache]\\n\\n    E --> E1[Networking]\\n    E --> E2[Dependency Injection]\\n  ", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:22.504556", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 1584 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:22.505556", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```mermaid\ngraph TD\n    A[Android App Architecture] --> B[UI Layer]\n    A --> C[Business Logic Layer]\n    A --> D[Data Layer]\n    A --> E[Dependencies]\n\n    B --> B1[Activities]\n    B --> B2[Fragments", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:22.506619", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 1584 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:22.507557", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No D2 diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:22.508558", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 1584 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:22.508558", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 [MERMAID PROGRESS] Found 1 Mermaid diagram(s) - validating syntax...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:22.509572", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "[MERMAID PROGRESS] Validation attempt 1/5", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:29.828069", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [MERMAID PROGRESS] All Mermaid diagrams validated successfully!", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:29.829444", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After Mermaid validation/fix: 1584 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:29.831473", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Using agent prompt for question: create a mermaid diagram of an android app...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:29.831473", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt length: 7435 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:29.833470", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt preview: ---\ntitle: \"Mermaid Diagram Generation Expert (Reinforced)\"\ndescription: \"Generate Mermaid Diagrams\"\ncategory: [\"Code Review\", \"Software Development\", \"Quality Assurance\"]\nauthor: \"Eric M\"\ncreated: \"2...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:29.836733", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Question contains diagram keywords", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:29.846216", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response preview: ```mermaid\ngraph TD\n    A[Android App Architecture] --> B[UI Layer]\n    A --> C[Business Logic Layer]\n    A --> D[Data Layer]\n    A --> E[Dependencies]\n\n    B --> B1[Activities]\n    B --> B2[Fragments]\n    B --> B3[Views]\n    B --> B4[Layouts]\n    B --> B5[Resources]\n\n    C --> C1[ViewModel]\n    C --> C2[Repository]\n    C --> C3[Use Cases]\n    C --> C4[Domain Layer]\n    C --> C5[Interactors]\n\n    D --> D1[Local Database]\n    D --> D2[Room Database]\n    D --> D3[Shared Preferences]\n    D --> D4[F...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:29.851787", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response contains Mermaid code block", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:29.859420", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 14.166s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:29.861428", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:29.864854", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:30.023496", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 14.17s using 23889 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:30.025512", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:30.137887", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Loaded conversation history: C:\\Code2025\\Whysper\\history\\20251020-184859_abab54e4-f675-493d-8080-554155708779.json", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:30.146935", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251020-184859_abab54e4-f675-493d-8080-554155708779.json (10 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:30.147910", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (10 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:30.149909", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:30.188245", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:54:30.599735", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-138"}}
{"timestamp": "2025-10-20T18:54:30.717448", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-139"}}
{"timestamp": "2025-10-20T18:54:30.748030", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-140"}}
{"timestamp": "2025-10-20T18:54:30.766227", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-141"}}
{"timestamp": "2025-10-20T18:54:30.776419", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-142"}}
{"timestamp": "2025-10-20T18:54:30.797761", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-143"}}
{"timestamp": "2025-10-20T18:54:30.811279", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-144"}}
{"timestamp": "2025-10-20T18:54:30.824592", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-145"}}
{"timestamp": "2025-10-20T18:54:30.847179", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-146"}}
{"timestamp": "2025-10-20T18:54:30.866663", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-147"}}
{"timestamp": "2025-10-20T18:54:30.890403", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-148"}}
{"timestamp": "2025-10-20T18:54:30.911417", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-152"}}
{"timestamp": "2025-10-20T18:54:30.973509", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-153"}}
{"timestamp": "2025-10-20T18:54:30.980864", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-154"}}
{"timestamp": "2025-10-20T18:54:30.993201", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-155"}}
{"timestamp": "2025-10-20T18:54:31.006425", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-156"}}
{"timestamp": "2025-10-20T18:54:31.022233", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-157"}}
{"timestamp": "2025-10-20T18:54:31.046124", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-158"}}
{"timestamp": "2025-10-20T18:54:31.062948", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-159"}}
{"timestamp": "2025-10-20T18:54:31.071455", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-160"}}
{"timestamp": "2025-10-20T18:56:48.229783", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-166"}}
{"timestamp": "2025-10-20T18:56:48.236356", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-168"}}
{"timestamp": "2025-10-20T18:56:48.242894", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-169"}}
{"timestamp": "2025-10-20T18:56:48.251327", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-170"}}
{"timestamp": "2025-10-20T18:56:48.263639", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-171"}}
{"timestamp": "2025-10-20T18:56:48.282664", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-172"}}
{"timestamp": "2025-10-20T18:56:48.293860", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-173"}}
{"timestamp": "2025-10-20T18:56:48.306802", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-174"}}
{"timestamp": "2025-10-20T18:56:48.339076", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:56:48.340598", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'create a mermaid diagram of an android app', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:56:48.341964", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: create a mermaid diagram of an android app", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:56:48.343990", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:56:48.345990", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:56:48.349413", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:56:48.352851", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Retrieved existing session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:56:48.354870", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:56:48.357259", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Provider update skipped - same or empty provider: 'openrouter'", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:56:48.358277", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating model to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:56:48.359637", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Model updated", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:56:48.362782", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Model changed to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:56:48.364794", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:56:48.365798", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Using agent prompt: You are a helpful AI assistant specialized in code analysis and development....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:56:48.366797", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:56:48.367825", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:56:48.369209", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:56:48.371917", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:56:48.372932", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:56:48.373933", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is follow-up message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:56:48.376089", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 5", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:56:48.379532", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:56:48.381644", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:56:48.382658", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:56:48.387633", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=False)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:56:48.390095", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:56:48.391093", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:56:48.392098", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: False, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:56:48.395114", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:56:48.397615", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:56:48.398618", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:56:48.399636", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:56:57.638885", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761004608-FfBeMeyp5Luwi2sqOoZz\",\n  \"provider\": \"Novita\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761004608,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```mermaid\\ngraph TD\\n    A[Android App Architecture] --> B[UI Layer]\\n    A --> C[Business Logic Layer]\\n    A --> D[Data Layer]\\n\\n    B --> B1[Activities]\\n    B --> B2[Fragments]\\n    B --> B3[Views]\\n    B --> B4[Layouts]\\n    B --> B5[Resources]\\n\\n    C --> C1[ViewModel]\\n    C --> C2[Repository]\\n    C --> C3[Use Cases]\\n    C --> C4[Domain Layer]\\n\\n    D --> D1[Local Database]\\n    D --> D2[Room]\\n    D --> D3[Shared Preferences]\\n    D --> D4[File Storage]\\n    D --> D5[Remote API]\\n\\n    style A fill:#4CAF50,stroke:#333,color:white\\n    style B fill:#2196F3,stroke:#333,color:white\\n    style C fill:#FF98", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:56:57.640929", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 1445 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:56:57.641946", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```mermaid\ngraph TD\n    A[Android App Architecture] --> B[UI Layer]\n    A --> C[Business Logic Layer]\n    A --> D[Data Layer]\n\n    B --> B1[Activities]\n    B --> B2[Fragments]\n    B --> B3[Views]\n    ", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:56:57.642948", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 1445 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:56:57.643943", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No D2 diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:56:57.644952", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 1445 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:56:57.645956", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 [MERMAID PROGRESS] Found 1 Mermaid diagram(s) - validating syntax...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:56:57.647947", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "[MERMAID PROGRESS] Validation attempt 1/5", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:57:04.046363", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [MERMAID PROGRESS] All Mermaid diagrams validated successfully!", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:57:04.047364", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After Mermaid validation/fix: 1445 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:57:04.049347", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Using agent prompt for question: create a mermaid diagram of an android app...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:57:04.051379", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt length: 76 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:57:04.052380", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt preview: You are a helpful AI assistant specialized in code analysis and development....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:57:04.055691", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Question contains diagram keywords", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:57:04.057689", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response preview: ```mermaid\ngraph TD\n    A[Android App Architecture] --> B[UI Layer]\n    A --> C[Business Logic Layer]\n    A --> D[Data Layer]\n\n    B --> B1[Activities]\n    B --> B2[Fragments]\n    B --> B3[Views]\n    B --> B4[Layouts]\n    B --> B5[Resources]\n\n    C --> C1[ViewModel]\n    C --> C2[Repository]\n    C --> C3[Use Cases]\n    C --> C4[Domain Layer]\n\n    D --> D1[Local Database]\n    D --> D2[Room]\n    D --> D3[Shared Preferences]\n    D --> D4[File Storage]\n    D --> D5[Remote API]\n\n    style A fill:#4CAF...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:57:04.061203", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response contains Mermaid code block", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:57:04.063331", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 15.681s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:57:04.066331", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:57:04.067328", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:57:04.169792", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 15.68s using 24416 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:57:04.170792", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:57:04.274032", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Loaded conversation history: C:\\Code2025\\Whysper\\history\\20251020-184859_abab54e4-f675-493d-8080-554155708779.json", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:57:04.283032", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251020-184859_abab54e4-f675-493d-8080-554155708779.json (12 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:57:04.284034", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (12 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:57:04.285032", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:57:04.327721", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T18:57:04.712073", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-179"}}
{"timestamp": "2025-10-20T18:57:04.722045", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-180"}}
{"timestamp": "2025-10-20T18:57:04.731255", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-181"}}
{"timestamp": "2025-10-20T18:57:04.745585", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-182"}}
{"timestamp": "2025-10-20T18:57:04.770625", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-183"}}
{"timestamp": "2025-10-20T18:57:04.786780", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-184"}}
{"timestamp": "2025-10-20T18:57:04.801512", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-185"}}
{"timestamp": "2025-10-20T18:57:04.822922", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-186"}}
{"timestamp": "2025-10-20T18:57:04.847809", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-187"}}
{"timestamp": "2025-10-20T18:57:04.863876", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-188"}}
{"timestamp": "2025-10-20T18:57:04.877785", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-189"}}
{"timestamp": "2025-10-20T18:57:04.913710", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-190"}}
{"timestamp": "2025-10-20T18:57:04.950182", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-191"}}
{"timestamp": "2025-10-20T18:57:04.981886", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-192"}}
{"timestamp": "2025-10-20T18:57:04.989572", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-193"}}
{"timestamp": "2025-10-20T18:57:04.999928", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-194"}}
{"timestamp": "2025-10-20T18:57:05.010599", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-195"}}
{"timestamp": "2025-10-20T18:57:05.026896", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-200"}}
{"timestamp": "2025-10-20T18:57:05.036996", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-201"}}
{"timestamp": "2025-10-20T18:57:05.044425", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-202"}}
{"timestamp": "2025-10-20T18:57:05.165671", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-203"}}
{"timestamp": "2025-10-20T18:57:05.172670", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-204"}}
{"timestamp": "2025-10-20T18:57:05.180202", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-205"}}
{"timestamp": "2025-10-20T18:57:05.187192", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-206"}}
{"timestamp": "2025-10-20T18:57:05.195192", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-207"}}
{"timestamp": "2025-10-20T18:57:05.209897", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-208"}}
{"timestamp": "2025-10-20T18:57:05.220660", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-209"}}
{"timestamp": "2025-10-20T18:57:05.231206", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-210"}}
{"timestamp": "2025-10-20T18:57:05.239667", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-211"}}
{"timestamp": "2025-10-20T18:57:05.337588", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-212"}}
{"timestamp": "2025-10-20T18:57:05.366491", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-213"}}
{"timestamp": "2025-10-20T18:57:05.398343", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-214"}}
{"timestamp": "2025-10-20T18:57:05.666615", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-215"}}
{"timestamp": "2025-10-20T18:57:05.894099", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-216"}}
{"timestamp": "2025-10-20T18:57:05.950704", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-217"}}
{"timestamp": "2025-10-20T18:57:05.969735", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-218"}}
{"timestamp": "2025-10-20T21:05:47.978429", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-240"}}
{"timestamp": "2025-10-20T21:05:47.992698", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-241"}}
{"timestamp": "2025-10-20T21:05:48.007092", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-242"}}
{"timestamp": "2025-10-20T21:05:48.018774", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-243"}}
{"timestamp": "2025-10-20T21:05:48.034637", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-244"}}
{"timestamp": "2025-10-20T21:05:48.065905", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-245"}}
{"timestamp": "2025-10-20T21:05:48.078415", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-246"}}
{"timestamp": "2025-10-20T21:05:48.085192", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-247"}}
{"timestamp": "2025-10-20T21:05:48.094436", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-248"}}
{"timestamp": "2025-10-20T21:05:48.103327", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-249"}}
{"timestamp": "2025-10-20T21:05:48.114126", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-250"}}
{"timestamp": "2025-10-20T21:05:48.123128", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-251"}}
{"timestamp": "2025-10-20T21:05:48.132424", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-252"}}
{"timestamp": "2025-10-20T21:05:48.143904", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-253"}}
{"timestamp": "2025-10-20T21:05:48.151088", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-254"}}
{"timestamp": "2025-10-20T21:05:48.159000", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-255"}}
{"timestamp": "2025-10-20T21:08:54.080807", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:08:54.082810", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'Show me a mermaid diagram of a iphone app', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:08:54.084810", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: Show me a mermaid diagram of a iphone app", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:08:54.085813", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:08:54.086826", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:08:54.087868", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:08:54.132366", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Retrieved existing session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:08:54.133380", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:08:54.134372", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:08:54.135367", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:08:54.136575", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:08:54.139169", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:08:54.140200", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:08:54.141454", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:08:54.143484", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is follow-up message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:08:54.147471", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 6", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:08:54.148472", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:08:54.150481", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:08:54.151472", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:08:54.155474", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=False)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:08:54.192496", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Detected Mermaid diagram request, loading mermaid-architecture.md prompt", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:08:54.195501", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Auto-detected diagram request, using agent prompt: ---\ntitle: \"Mermaid Diagram Generation Expert (Rei...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:08:54.198859", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:08:54.199861", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:08:54.204306", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: False, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:08:54.205335", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:08:54.206333", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:08:54.208520", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:08:54.209530", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:09:03.460393", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761012534-RLftWT7YBe1PEwBXL9n8\",\n  \"provider\": \"Novita\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761012534,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```mermaid\\ngraph TD\\n    A[iPhone App] --> B[UIKit Framework]\\n    A --> C[Foundation Framework]\\n    A --> D[Core Data]\\n    A --> E[Network Layer]\\n\\n    B --> B1[UIWindow]\\n    B --> B2[UIViewController]\\n    B --> B3[UIView]\\n    B --> B4[UIStoryboardSegue]\\n    B --> B5[UIStoryboard]\\n\\n    C --> C1[NSData]\\n    C --> C2[NSString]\\n    C --> C3[NSDate]\\n    C --> C4[NSNumber]\\n    C --> C5[NSFileManager]\\n\\n    D --> D1[NSManagedObject]\\n    D --> D2[NSManagedObjectContext]\\n    D --> D3[NSPersistentContainer]\\n    D --> D4[NSFetchRequest]\\n    D --> D5[NSPredicate]\\n\\n    E --> E1[URLSession]\\n    E --> E2[UR", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:09:03.462367", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 1596 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:09:03.463367", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```mermaid\ngraph TD\n    A[iPhone App] --> B[UIKit Framework]\n    A --> C[Foundation Framework]\n    A --> D[Core Data]\n    A --> E[Network Layer]\n\n    B --> B1[UIWindow]\n    B --> B2[UIViewController]\n", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:09:03.464370", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 1596 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:09:03.465368", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No D2 diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:09:03.466389", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 1596 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:09:03.467753", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 [MERMAID PROGRESS] Found 1 Mermaid diagram(s) - validating syntax...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:09:03.468766", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "[MERMAID PROGRESS] Validation attempt 1/5", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:09:33.466398", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [MERMAID PROGRESS] All Mermaid diagrams validated successfully!", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:09:33.467409", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After Mermaid validation/fix: 1596 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:09:33.468408", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Using agent prompt for question: Show me a mermaid diagram of a iphone app...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:09:33.469410", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt length: 7435 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:09:33.470408", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt preview: ---\ntitle: \"Mermaid Diagram Generation Expert (Reinforced)\"\ndescription: \"Generate Mermaid Diagrams\"\ncategory: [\"Code Review\", \"Software Development\", \"Quality Assurance\"]\nauthor: \"Eric M\"\ncreated: \"2...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:09:33.472411", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Question contains diagram keywords", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:09:33.474766", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response preview: ```mermaid\ngraph TD\n    A[iPhone App] --> B[UIKit Framework]\n    A --> C[Foundation Framework]\n    A --> D[Core Data]\n    A --> E[Network Layer]\n\n    B --> B1[UIWindow]\n    B --> B2[UIViewController]\n    B --> B3[UIView]\n    B --> B4[UIStoryboardSegue]\n    B --> B5[UIStoryboard]\n\n    C --> C1[NSData]\n    C --> C2[NSString]\n    C --> C3[NSDate]\n    C --> C4[NSNumber]\n    C --> C5[NSFileManager]\n\n    D --> D1[NSManagedObject]\n    D --> D2[NSManagedObjectContext]\n    D --> D3[NSPersistentContainer]...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:09:33.476779", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response contains Mermaid code block", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:09:33.476779", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 39.325s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:09:33.479265", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:09:33.480264", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:09:34.562832", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 39.33s using 24980 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:09:34.563843", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:09:34.655776", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Loaded conversation history: C:\\Code2025\\Whysper\\history\\20251020-184859_abab54e4-f675-493d-8080-554155708779.json", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:09:34.661756", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251020-184859_abab54e4-f675-493d-8080-554155708779.json (14 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:09:34.662759", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (14 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:09:34.663766", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:09:34.690970", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 39776, "thread_name": "AnyIO worker thread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:09:34.967488", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-266"}}
{"timestamp": "2025-10-20T21:09:34.974680", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-267"}}
{"timestamp": "2025-10-20T21:09:34.980954", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-268"}}
{"timestamp": "2025-10-20T21:09:34.988256", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-269"}}
{"timestamp": "2025-10-20T21:09:35.003686", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-270"}}
{"timestamp": "2025-10-20T21:09:35.016264", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-271"}}
{"timestamp": "2025-10-20T21:09:35.029268", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-272"}}
{"timestamp": "2025-10-20T21:09:35.041500", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-273"}}
{"timestamp": "2025-10-20T21:09:35.054206", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-274"}}
{"timestamp": "2025-10-20T21:09:35.067657", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-275"}}
{"timestamp": "2025-10-20T21:09:35.087219", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-276"}}
{"timestamp": "2025-10-20T21:09:35.115645", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-277"}}
{"timestamp": "2025-10-20T21:09:35.316823", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-279"}}
{"timestamp": "2025-10-20T21:09:35.392453", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-280"}}
{"timestamp": "2025-10-20T21:09:35.411601", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-281"}}
{"timestamp": "2025-10-20T21:09:35.421963", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-282"}}
{"timestamp": "2025-10-20T21:09:35.455662", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-283"}}
{"timestamp": "2025-10-20T21:09:35.468448", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-284"}}
{"timestamp": "2025-10-20T21:09:35.476326", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-285"}}
{"timestamp": "2025-10-20T21:09:35.483882", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-286"}}
{"timestamp": "2025-10-20T21:09:40.869878", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-292"}}
{"timestamp": "2025-10-20T21:09:40.874876", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-293"}}
{"timestamp": "2025-10-20T21:09:40.880280", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-294"}}
{"timestamp": "2025-10-20T21:09:40.890792", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-295"}}
{"timestamp": "2025-10-20T21:09:40.902552", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-296"}}
{"timestamp": "2025-10-20T21:09:40.909253", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-297"}}
{"timestamp": "2025-10-20T21:09:43.122397", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-298"}}
{"timestamp": "2025-10-20T21:09:43.128657", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-299"}}
{"timestamp": "2025-10-20T21:09:43.142467", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-300"}}
{"timestamp": "2025-10-20T21:09:43.153358", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-301"}}
{"timestamp": "2025-10-20T21:09:43.159327", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-302"}}
{"timestamp": "2025-10-20T21:09:43.180355", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-303"}}
{"timestamp": "2025-10-20T21:09:43.205460", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-304"}}
{"timestamp": "2025-10-20T21:09:43.225604", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-305"}}
{"timestamp": "2025-10-20T21:09:43.246653", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-306"}}
{"timestamp": "2025-10-20T21:09:43.380652", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37664, "thread_name": "MainThread", "process": 38832, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-307"}}
{"timestamp": "2025-10-20T21:10:43.361467", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 12396, "thread_name": "MainThread", "process": 39140, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:10:43.882712", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 12396, "thread_name": "MainThread", "process": 39140, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:10:43.882712", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 12396, "thread_name": "MainThread", "process": 39140, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T21:10:43.918739", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 12396, "thread_name": "MainThread", "process": 39140, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T21:10:43.918739", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 12396, "thread_name": "MainThread", "process": 39140, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:10:43.919719", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 12396, "thread_name": "MainThread", "process": 39140, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:10:56.736362", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 12396, "thread_name": "MainThread", "process": 39140, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:10:57.218797", "level": "INFO", "logger": "whysper.app.main", "message": "Static files directory: C:\\Code2025\\Whysper\\backend\\static", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 12396, "thread_name": "MainThread", "process": 39140, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:11:11.010282", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:11:12.659454", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:11:12.662863", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T21:11:12.732192", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T21:11:12.737267", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:11:12.738214", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:11:20.804046", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:11:21.374898", "level": "INFO", "logger": "whysper.app.main", "message": "Static files directory: C:\\Code2025\\Whysper\\backend\\static", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:11:22.084974", "level": "INFO", "logger": "whysper.app.main", "message": "Starting Whysper Web2 Backend v2.0.0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T21:11:22.087297", "level": "INFO", "logger": "whysper.app.main", "message": "Server running on 0.0.0.0:8003", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T21:11:22.088314", "level": "INFO", "logger": "whysper.app.main", "message": "Debug mode: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T21:11:22.089842", "level": "INFO", "logger": "whysper.app.main", "message": "CORS origins: ['http://localhost:3000', 'http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:5176', 'http://localhost:5177', 'http://localhost:5178', 'http://127.0.0.1:3000', 'http://127.0.0.1:5173', 'http://127.0.0.1:5174', 'http://127.0.0.1:5175', 'http://127.0.0.1:5176', 'http://127.0.0.1:5177']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T21:11:22.090862", "level": "INFO", "logger": "whysper.app.main", "message": "Real-time log broadcasting enabled - connect to GET /api/v1/logs/stream", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T21:11:22.091841", "level": "INFO", "logger": "whysper.app.main", "message": "FastMCP server integration initialized", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T21:11:22.093845", "level": "INFO", "logger": "whysper.app.main", "message": "MCP endpoints available at /mcp/*", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T21:11:22.094842", "level": "INFO", "logger": "whysper.app.main", "message": "MCP tools: generate_diagram, render_diagram, generate_and_render", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T21:11:22.096843", "level": "INFO", "logger": "whysper.app.main", "message": "MCP WebSocket endpoint: /mcp/ws", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-20T21:11:24.654900", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-4"}}
{"timestamp": "2025-10-20T21:11:30.696495", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 Log stream client disconnected (cancelled, session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap"}}
{"timestamp": "2025-10-20T21:12:05.624562", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:05.624562", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32948, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:05.628588", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:05.629596", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32948, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:05.654421", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-16"}}
{"timestamp": "2025-10-20T21:12:05.925965", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32948, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:05.934006", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:06.739048", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:06.740058", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32948, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:07.472174", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:07.473168", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32948, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:07.568777", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32948, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:07.569777", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.236506", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.303370", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'Create a mermaid gantt chart for a 3-month software development project with planning, development, testing, and deployment phases.', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.305369", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: Create a mermaid gantt chart for a 3-month software development project with planning, development, testing, and deployment phases.", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.307372", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.309674", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.310808", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.323018", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Creating new conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.330104", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Creating conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.333105", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-20T21:12:21.380728", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-20T21:12:21.383138", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.384151", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initializing conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.385182", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Set default model: qwen/qwen3-coder-30b-a3b-instruct", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.386693", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initialized session logger for: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.387709", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Created new conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.388708", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Conversation session conv-1 initialized successfully", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.389708", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Setting API key for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.390708", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "API key updated for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.391711", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Session created", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.392710", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.393707", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.394713", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.394713", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.396709", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.397710", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.399707", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.402710", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is first message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.404712", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "First question has no file context in session conv-1 - proceeding without code context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.406713", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.407716", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.410717", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.419252", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.422255", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=True)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.426254", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Detected Mermaid diagram request, loading mermaid-architecture.md prompt", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.428260", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Auto-detected diagram request, using agent prompt: ---\ntitle: \"Mermaid Diagram Generation Expert (Rei...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.430252", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.432253", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.437268", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: True, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.438254", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.439252", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.441261", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "⚠️ First message but NO SELECTED FILES", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.442464", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:21.443492", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:25.992227", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761012742-nngYT45oOYTITWtXSmcC\",\n  \"provider\": \"SiliconFlow\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761012742,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"Here's a Mermaid Gantt chart for a 3-month software development project with the specified phases:\\n\\n```mermaid\\ngantt\\n    title 3-Month Software Development Project\\n    dateFormat  YYYY-MM-DD\\n    section Planning\\n    Requirements Analysis    :done, des1, 2023-01-01, 10d\\n    Design                   :done, des2, 2023-01-11, 15d\\n    Project Setup            :des3, 2023-01-26, 5d\\n    section Development\\n    Backend Development      :dev1, 2023-02-01, 20d\\n    Frontend Development     :dev2, 2023-02-01, 20d\\n    Integration              :dev3, 2023-02-15, 10d\\n    section Testing\\n    Unit Testing        ", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:25.993235", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 1648 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:25.994257", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: Here's a Mermaid Gantt chart for a 3-month software development project with the specified phases:\n\n```mermaid\ngantt\n    title 3-Month Software Development Project\n    dateFormat  YYYY-MM-DD\n    secti", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:25.994257", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 1648 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:25.997785", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No D2 diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:25.997785", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 1648 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:26.000254", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 [MERMAID PROGRESS] Found 1 Mermaid diagram(s) - validating syntax...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:26.001290", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "[MERMAID PROGRESS] Validation attempt 1/5", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:32.467122", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [MERMAID PROGRESS] All Mermaid diagrams validated successfully!", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:32.469121", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After Mermaid validation/fix: 1648 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:32.470123", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Using agent prompt for question: Create a mermaid gantt chart for a 3-month software development project with planning, development, ...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:32.471476", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt length: 7435 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:32.473491", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt preview: ---\ntitle: \"Mermaid Diagram Generation Expert (Reinforced)\"\ndescription: \"Generate Mermaid Diagrams\"\ncategory: [\"Code Review\", \"Software Development\", \"Quality Assurance\"]\nauthor: \"Eric M\"\ncreated: \"2...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:32.474490", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Question contains diagram keywords", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:32.475510", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response preview: Here's a Mermaid Gantt chart for a 3-month software development project with the specified phases:\n\n```mermaid\ngantt\n    title 3-Month Software Development Project\n    dateFormat  YYYY-MM-DD\n    section Planning\n    Requirements Analysis    :done, des1, 2023-01-01, 10d\n    Design                   :done, des2, 2023-01-11, 15d\n    Project Setup            :des3, 2023-01-26, 5d\n    section Development\n    Backend Development      :dev1, 2023-02-01, 20d\n    Frontend Development     :dev2, 2023-02-0...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:32.478524", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response contains Mermaid code block", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:32.480591", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 11.061s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:32.481710", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:32.482980", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:32.662400", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 11.06s using 616 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:32.664883", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:32.666150", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "Created new GUID fecb9408-59eb-4ab4-8c09-5691b754ef65 for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:32.668194", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "No history file found for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:32.670177", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251020-211232_fecb9408-59eb-4ab4-8c09-5691b754ef65.json (2 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:32.672167", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (2 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:32.672167", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:32.705032", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:33.406174", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41"}}
{"timestamp": "2025-10-20T21:12:33.412538", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-42"}}
{"timestamp": "2025-10-20T21:12:33.423194", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-43"}}
{"timestamp": "2025-10-20T21:12:33.438825", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-44"}}
{"timestamp": "2025-10-20T21:12:33.447839", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-45"}}
{"timestamp": "2025-10-20T21:12:33.478819", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-46"}}
{"timestamp": "2025-10-20T21:12:33.503321", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-47"}}
{"timestamp": "2025-10-20T21:12:33.544819", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-48"}}
{"timestamp": "2025-10-20T21:12:33.558240", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-50"}}
{"timestamp": "2025-10-20T21:12:33.601393", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-51"}}
{"timestamp": "2025-10-20T21:12:33.607411", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-52"}}
{"timestamp": "2025-10-20T21:12:33.615406", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-53"}}
{"timestamp": "2025-10-20T21:12:33.625960", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-54"}}
{"timestamp": "2025-10-20T21:12:33.634519", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-55"}}
{"timestamp": "2025-10-20T21:12:33.640495", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-56"}}
{"timestamp": "2025-10-20T21:12:33.666566", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-57"}}
{"timestamp": "2025-10-20T21:12:33.681772", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-58"}}
{"timestamp": "2025-10-20T21:12:33.704036", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-59"}}
{"timestamp": "2025-10-20T21:12:33.717448", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-60"}}
{"timestamp": "2025-10-20T21:12:33.726447", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-61"}}
{"timestamp": "2025-10-20T21:12:33.744736", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-62"}}
{"timestamp": "2025-10-20T21:12:33.758105", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-63"}}
{"timestamp": "2025-10-20T21:12:33.770985", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-64"}}
{"timestamp": "2025-10-20T21:12:33.776020", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-65"}}
{"timestamp": "2025-10-20T21:12:33.791969", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-66"}}
{"timestamp": "2025-10-20T21:12:33.800636", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-67"}}
{"timestamp": "2025-10-20T21:12:33.917028", "level": "ERROR", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "❌ Error rendering MERMAID diagram: Invalid date:2023 --> +01: 01", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-68"}}
{"timestamp": "2025-10-20T21:12:33.929716", "level": "ERROR", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "❌ Error rendering MERMAID diagram: Invalid date:2023 --> +01: 01", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-69"}}
{"timestamp": "2025-10-20T21:12:33.940953", "level": "ERROR", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "❌ Error rendering MERMAID diagram: Invalid date:2023 --> +01: 01", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70"}}
{"timestamp": "2025-10-20T21:12:33.947726", "level": "ERROR", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "❌ Error rendering MERMAID diagram: Invalid date:2023 --> +01: 01", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-71"}}
{"timestamp": "2025-10-20T21:12:59.371311", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:59.372308", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'Create a mermaid state diagram showing the lifecycle of an order from creation to delivery', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:59.373417", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: Create a mermaid state diagram showing the lifecycle of an order from creation to delivery", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:59.373417", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:59.374799", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:59.376816", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:59.378815", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Retrieved existing session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:59.379814", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:59.380815", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:59.381812", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:59.383147", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:59.384164", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:59.385166", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:59.386180", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:59.387650", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is follow-up message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:59.387650", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:59.389081", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:59.390094", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:59.391094", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:59.395429", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: False (first_message=False)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:59.398545", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Detected Mermaid diagram request, loading mermaid-architecture.md prompt", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:59.400907", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Auto-detected diagram request, using agent prompt: ---\ntitle: \"Mermaid Diagram Generation Expert (Rei...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:59.403176", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:59.403176", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:59.405201", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: False, needs_context: False", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:59.406205", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:59.407196", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:59.408201", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "❌ No codebase context needed, returning empty", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:59.409199", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:12:59.410208", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:02.480827", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761012779-EiTeugLwyZQmdOCrUjiA\",\n  \"provider\": \"DeepInfra\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761012779,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```mermaid\\nstateDiagram-v2\\n    [*] --> Created\\n    Created --> Processing\\n    Processing --> Shipped\\n    Shipped --> InTransit\\n    InTransit --> Delivered\\n    InTransit --> Returned\\n    \\n    Created --> Cancelled\\n    Processing --> Cancelled\\n    Shipped --> Cancelled\\n    \\n    Cancelled --> [*]\\n    Delivered --> [*]\\n    Returned --> [*]\\n    \\n    note right of Processing\\n        Order is being prepared\\n        for shipment\\n    end note\\n    \\n    note right of Shipped\\n        Order has left\\n        the warehouse\\n    end note\\n    \\n    note right of InTransit\\n        Order is on its way\\n   ", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:02.482854", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 1700 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:02.482854", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```mermaid\nstateDiagram-v2\n    [*] --> Created\n    Created --> Processing\n    Processing --> Shipped\n    Shipped --> InTransit\n    InTransit --> Delivered\n    InTransit --> Returned\n    \n    Created -", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:02.484825", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 1700 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:02.484825", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No D2 diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:02.486191", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 1700 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:02.487662", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 [MERMAID PROGRESS] Found 1 Mermaid diagram(s) - validating syntax...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:02.488678", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "[MERMAID PROGRESS] Validation attempt 1/5", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:09.586429", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [MERMAID PROGRESS] All Mermaid diagrams validated successfully!", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:09.588910", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After Mermaid validation/fix: 1700 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:09.589914", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Using agent prompt for question: Create a mermaid state diagram showing the lifecycle of an order from creation to delivery...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:09.592298", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt length: 7435 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:09.595547", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt preview: ---\ntitle: \"Mermaid Diagram Generation Expert (Reinforced)\"\ndescription: \"Generate Mermaid Diagrams\"\ncategory: [\"Code Review\", \"Software Development\", \"Quality Assurance\"]\nauthor: \"Eric M\"\ncreated: \"2...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:09.597780", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Question contains diagram keywords", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:09.599092", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response preview: ```mermaid\nstateDiagram-v2\n    [*] --> Created\n    Created --> Processing\n    Processing --> Shipped\n    Shipped --> InTransit\n    InTransit --> Delivered\n    InTransit --> Returned\n    \n    Created --> Cancelled\n    Processing --> Cancelled\n    Shipped --> Cancelled\n    \n    Cancelled --> [*]\n    Delivered --> [*]\n    Returned --> [*]\n    \n    note right of Processing\n        Order is being prepared\n        for shipment\n    end note\n    \n    note right of Shipped\n        Order has left\n        ...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:09.603117", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response contains Mermaid code block", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:09.605139", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 10.214s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:09.606115", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:09.609509", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:09.775268", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 10.21s using 1000 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:09.776268", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:09.804214", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Loaded conversation history: C:\\Code2025\\Whysper\\history\\20251020-211232_fecb9408-59eb-4ab4-8c09-5691b754ef65.json", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:09.807209", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251020-211232_fecb9408-59eb-4ab4-8c09-5691b754ef65.json (4 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:09.808207", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (4 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:09.808207", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:09.832888", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:10.041241", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-77"}}
{"timestamp": "2025-10-20T21:13:10.047741", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-78"}}
{"timestamp": "2025-10-20T21:13:10.053781", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-79"}}
{"timestamp": "2025-10-20T21:13:10.060106", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-80"}}
{"timestamp": "2025-10-20T21:13:10.068102", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-81"}}
{"timestamp": "2025-10-20T21:13:10.080132", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-82"}}
{"timestamp": "2025-10-20T21:13:10.096564", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-83"}}
{"timestamp": "2025-10-20T21:13:10.256593", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-84"}}
{"timestamp": "2025-10-20T21:13:10.322861", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-85"}}
{"timestamp": "2025-10-20T21:13:10.394679", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-86"}}
{"timestamp": "2025-10-20T21:13:10.444268", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-87"}}
{"timestamp": "2025-10-20T21:13:10.458849", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-91"}}
{"timestamp": "2025-10-20T21:13:10.470922", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-92"}}
{"timestamp": "2025-10-20T21:13:10.488895", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-93"}}
{"timestamp": "2025-10-20T21:13:10.503037", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-94"}}
{"timestamp": "2025-10-20T21:13:10.520722", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-95"}}
{"timestamp": "2025-10-20T21:13:10.537451", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-96"}}
{"timestamp": "2025-10-20T21:13:10.552450", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-97"}}
{"timestamp": "2025-10-20T21:13:10.561448", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-98"}}
{"timestamp": "2025-10-20T21:13:10.572121", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-99"}}
{"timestamp": "2025-10-20T21:13:11.057561", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-100"}}
{"timestamp": "2025-10-20T21:13:11.306215", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-101"}}
{"timestamp": "2025-10-20T21:13:11.582406", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-102"}}
{"timestamp": "2025-10-20T21:13:11.860690", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-103"}}
{"timestamp": "2025-10-20T21:13:16.917078", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 Log stream client disconnected (cancelled, session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap"}}
{"timestamp": "2025-10-20T21:13:20.346135", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-114"}}
{"timestamp": "2025-10-20T21:13:20.347304", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:20.356954", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:20.360197", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:20.366897", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 5 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:20.476316", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:20.477318", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:20.519521", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35756, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:20.640214", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:20.866291", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:20.869627", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:20.890078", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:20.893142", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:32.434718", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:32.437227", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'Create a mermaid class diagram for an e-commerce system with User, Product, Order, and Payment classes.', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:32.439224", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: Create a mermaid class diagram for an e-commerce system with User, Product, Order, and Payment classes.", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:32.561855", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:32.564763", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:32.566771", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:32.569767", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Retrieved existing session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:32.572762", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:32.576119", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:32.636956", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:32.640194", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:32.641192", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:32.643191", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:32.648193", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:32.651194", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is follow-up message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:32.655254", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:32.656255", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:32.658252", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:32.661254", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:32.665690", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=False)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:32.667709", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Detected Mermaid diagram request, loading mermaid-architecture.md prompt", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:32.683192", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Auto-detected diagram request, using agent prompt: ---\ntitle: \"Mermaid Diagram Generation Expert (Rei...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:32.686007", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:32.690042", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:32.693039", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: False, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:32.694501", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:32.727804", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:32.729802", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:32.737262", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:38.103965", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761012813-reopFEsSRC678cpuGWOZ\",\n  \"provider\": \"DeepInfra\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761012813,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```mermaid\\nclassDiagram\\n    class User {\\n        -userId: String\\n        -username: String\\n        -email: String\\n        -password: String\\n        -createdAt: Date\\n        +login(): Boolean\\n        +logout(): void\\n        +updateProfile(): void\\n    }\\n    \\n    class Product {\\n        -productId: String\\n        -name: String\\n        -description: String\\n        -price: Double\\n        -stockQuantity: Integer\\n        -category: String\\n        -createdAt: Date\\n        +getProductInfo(): String\\n        +updateStock(): void\\n        +checkAvailability(): Boolean\\n    }\\n    \\n    class Order {\\n  ", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:38.104964", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 3264 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:38.104964", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```mermaid\nclassDiagram\n    class User {\n        -userId: String\n        -username: String\n        -email: String\n        -password: String\n        -createdAt: Date\n        +login(): Boolean\n        +", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:38.105982", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 3264 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:38.106997", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No D2 diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:38.106997", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 3264 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:38.108969", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 [MERMAID PROGRESS] Found 1 Mermaid diagram(s) - validating syntax...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:38.109753", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "[MERMAID PROGRESS] Validation attempt 1/5", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:45.224304", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "[MERMAID PROGRESS] Diagram #1 validation failed: Mermaid Syntax Error:\nError: Parse error on line 62:\n...makes        note right of User      \n---------------------^\nExpecting 'STR', got 'ALPHA'\nParser3.parseError (C:\\ProgramData\\nvm\\v22.18.0\\node_m", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:45.227541", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔧 [MERMAID PROGRESS] Validation errors found - requesting AI auto-fix (attempt 1/5)...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:48.705642", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761012825-nPMr756ttOp1JOTJnBqr\",\n  \"provider\": \"Novita\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761012825,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```mermaid\\nflowchart TD\\n    A[User] --> B[Login]\\n    B --> C[Dashboard]\\n    C --> D[Order Placement]\\n    D --> E[Order Processing]\\n    E --> F[Payment Processing]\\n    F --> G[Order Confirmation]\\n    G --> H[Shipment]\\n    H --> I[Delivery]\\n    I --> J[Feedback]\\n    J --> K[Review]\\n    K --> L[Logout]\\n    L --> M[End]\\n    \\n    style A fill:#e1f5fe\\n    style B fill:#f3e5f5\\n    style C fill:#e8f5e9\\n    style D fill:#fff3e0\\n    style E fill:#fce4ec\\n    style F fill:#f1f8e9\\n    style G fill:#fff8e1\\n    style H fill:#e0f2f1\\n    style I fill:#f3e5f5\\n    style J fill:#e8f5e9\\n    style K fill:#fff3e0\\", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:48.707110", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 651 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:48.708124", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```mermaid\nflowchart TD\n    A[User] --> B[Login]\n    B --> C[Dashboard]\n    C --> D[Order Placement]\n    D --> E[Order Processing]\n    E --> F[Payment Processing]\n    F --> G[Order Confirmation]\n    G", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:48.709145", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [MERMAID PROGRESS] Received corrected Mermaid code (651 chars) - re-validating...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:48.710161", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "⚠️  Corrected response may be TRUNCATED! Model: qwen/qwen3-coder-30b-a3b-instruct", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:48.711160", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "⚠️  Try switching to a model that doesn't truncate", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:48.713887", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "[MERMAID PROGRESS] Validation attempt 2/5", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:55.473943", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [MERMAID PROGRESS] All Mermaid diagrams validated successfully!", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:55.475101", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After Mermaid validation/fix: 651 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:55.477117", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Using agent prompt for question: Create a mermaid class diagram for an e-commerce system with User, Product, Order, and Payment class...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:55.482660", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt length: 7435 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:55.484684", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt preview: ---\ntitle: \"Mermaid Diagram Generation Expert (Reinforced)\"\ndescription: \"Generate Mermaid Diagrams\"\ncategory: [\"Code Review\", \"Software Development\", \"Quality Assurance\"]\nauthor: \"Eric M\"\ncreated: \"2...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:55.489184", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Question contains diagram keywords", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:55.493185", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response preview: ```mermaid\nflowchart TD\n    A[User] --> B[Login]\n    B --> C[Dashboard]\n    C --> D[Order Placement]\n    D --> E[Order Processing]\n    E --> F[Payment Processing]\n    F --> G[Order Confirmation]\n    G --> H[Shipment]\n    H --> I[Delivery]\n    I --> J[Feedback]\n    J --> K[Review]\n    K --> L[Logout]\n    L --> M[End]\n    \n    style A fill:#e1f5fe\n    style B fill:#f3e5f5\n    style C fill:#e8f5e9\n    style D fill:#fff3e0\n    style E fill:#fce4ec\n    style F fill:#f1f8e9\n    style G fill:#fff8e1\n  ...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:55.500951", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response contains Mermaid code block", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:55.502954", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 22.843s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:55.507422", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:55.509686", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:55.671225", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 22.84s using 1466 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:55.673214", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:55.723021", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Loaded conversation history: C:\\Code2025\\Whysper\\history\\20251020-211232_fecb9408-59eb-4ab4-8c09-5691b754ef65.json", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:55.730384", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251020-211232_fecb9408-59eb-4ab4-8c09-5691b754ef65.json (6 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:55.733444", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (6 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:55.735801", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:55.759128", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:13:56.214099", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-125"}}
{"timestamp": "2025-10-20T21:13:56.218701", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-126"}}
{"timestamp": "2025-10-20T21:13:56.225531", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-127"}}
{"timestamp": "2025-10-20T21:13:56.231624", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-128"}}
{"timestamp": "2025-10-20T21:13:56.238240", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-129"}}
{"timestamp": "2025-10-20T21:13:56.243641", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-130"}}
{"timestamp": "2025-10-20T21:13:56.259559", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-131"}}
{"timestamp": "2025-10-20T21:13:56.276387", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-132"}}
{"timestamp": "2025-10-20T21:13:56.290486", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-133"}}
{"timestamp": "2025-10-20T21:13:56.306177", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-134"}}
{"timestamp": "2025-10-20T21:13:56.314110", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-135"}}
{"timestamp": "2025-10-20T21:13:56.321891", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-136"}}
{"timestamp": "2025-10-20T21:13:56.519612", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-137"}}
{"timestamp": "2025-10-20T21:13:56.525689", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-138"}}
{"timestamp": "2025-10-20T21:13:56.535025", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-142"}}
{"timestamp": "2025-10-20T21:13:56.547123", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-143"}}
{"timestamp": "2025-10-20T21:13:56.552462", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-144"}}
{"timestamp": "2025-10-20T21:13:56.558086", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-145"}}
{"timestamp": "2025-10-20T21:13:56.572177", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-146"}}
{"timestamp": "2025-10-20T21:13:56.589023", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-147"}}
{"timestamp": "2025-10-20T21:13:57.118718", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-148"}}
{"timestamp": "2025-10-20T21:13:57.393806", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-149"}}
{"timestamp": "2025-10-20T21:13:57.600724", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-150"}}
{"timestamp": "2025-10-20T21:13:57.766048", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-151"}}
{"timestamp": "2025-10-20T21:14:27.797983", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:27.798989", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'Create a mermaid sequence diagram showing how a payment transaction works between a customer, payment gateway, and bank.', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:27.800513", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: Create a mermaid sequence diagram showing how a payment transaction works between a customer, payment gateway, and bank.", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:27.801972", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:27.803332", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:27.804345", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:27.806348", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Retrieved existing session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:27.807359", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:27.808360", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:27.810361", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:27.811363", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:27.812754", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:27.814000", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:27.815021", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:27.817022", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is follow-up message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:27.818022", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 3", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:27.818022", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:27.820019", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:27.820019", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:27.824019", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: False (first_message=False)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:27.825545", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Detected Mermaid diagram request, loading mermaid-architecture.md prompt", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:27.826766", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Auto-detected diagram request, using agent prompt: ---\ntitle: \"Mermaid Diagram Generation Expert (Rei...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:27.828768", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:27.829968", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:27.831983", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: False, needs_context: False", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:27.834440", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:27.836479", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:27.840690", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "❌ No codebase context needed, returning empty", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:27.845359", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:27.848374", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:31.816465", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761012868-nPA9cb7tJ4d2IwxKdPGu\",\n  \"provider\": \"Novita\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761012868,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```mermaid\\nsequenceDiagram\\n    participant C as Customer\\n    participant PG as Payment Gateway\\n    participant B as Bank\\n    \\n    C->>PG: Initiate Payment (amount, details)\\n    PG->>B: Request Authorization (amount, card details)\\n    B->>PG: Authorization Response (approved/rejected)\\n    alt Payment Approved\\n        PG->>C: Payment Successful Notification\\n        PG->>B: Process Payment (transfer funds)\\n        B->>PG: Payment Confirmation\\n        PG->>C: Transaction Complete\\n    else Payment Rejected\\n        PG->>C: Payment Failed Notification\\n        PG->>B: Authorization Declined\\n        C->>C: R", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:31.817427", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 1646 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:31.818446", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```mermaid\nsequenceDiagram\n    participant C as Customer\n    participant PG as Payment Gateway\n    participant B as Bank\n    \n    C->>PG: Initiate Payment (amount, details)\n    PG->>B: Request Authori", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:31.819430", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 1646 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:31.820460", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No D2 diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:31.822431", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 1646 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:31.823430", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 [MERMAID PROGRESS] Found 1 Mermaid diagram(s) - validating syntax...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:31.824431", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "[MERMAID PROGRESS] Validation attempt 1/5", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:38.074132", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [MERMAID PROGRESS] All Mermaid diagrams validated successfully!", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:38.076130", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After Mermaid validation/fix: 1646 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:38.078129", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Using agent prompt for question: Create a mermaid sequence diagram showing how a payment transaction works between a customer, paymen...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:38.083654", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt length: 7435 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:38.084655", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt preview: ---\ntitle: \"Mermaid Diagram Generation Expert (Reinforced)\"\ndescription: \"Generate Mermaid Diagrams\"\ncategory: [\"Code Review\", \"Software Development\", \"Quality Assurance\"]\nauthor: \"Eric M\"\ncreated: \"2...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:38.086654", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Question contains diagram keywords", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:38.088653", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response preview: ```mermaid\nsequenceDiagram\n    participant C as Customer\n    participant PG as Payment Gateway\n    participant B as Bank\n    \n    C->>PG: Initiate Payment (amount, details)\n    PG->>B: Request Authorization (amount, card details)\n    B->>PG: Authorization Response (approved/rejected)\n    alt Payment Approved\n        PG->>C: Payment Successful Notification\n        PG->>B: Process Payment (transfer funds)\n        B->>PG: Payment Confirmation\n        PG->>C: Transaction Complete\n    else Payment Re...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:38.091187", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response contains Mermaid code block", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:38.092204", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 10.272s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:38.094186", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:38.098370", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:38.226616", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 10.27s using 1656 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:38.228616", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:38.259882", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Loaded conversation history: C:\\Code2025\\Whysper\\history\\20251020-211232_fecb9408-59eb-4ab4-8c09-5691b754ef65.json", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:38.265574", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251020-211232_fecb9408-59eb-4ab4-8c09-5691b754ef65.json (8 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:38.266687", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (8 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:38.267354", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:38.309439", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:38.723843", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-157"}}
{"timestamp": "2025-10-20T21:14:38.732796", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-158"}}
{"timestamp": "2025-10-20T21:14:38.741992", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-159"}}
{"timestamp": "2025-10-20T21:14:38.749522", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-160"}}
{"timestamp": "2025-10-20T21:14:38.758134", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-161"}}
{"timestamp": "2025-10-20T21:14:38.777587", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-162"}}
{"timestamp": "2025-10-20T21:14:38.849401", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-163"}}
{"timestamp": "2025-10-20T21:14:38.887962", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-164"}}
{"timestamp": "2025-10-20T21:14:38.899268", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-165"}}
{"timestamp": "2025-10-20T21:14:38.918570", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-166"}}
{"timestamp": "2025-10-20T21:14:38.933919", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-167"}}
{"timestamp": "2025-10-20T21:14:38.953937", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-168"}}
{"timestamp": "2025-10-20T21:14:39.180632", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-172"}}
{"timestamp": "2025-10-20T21:14:39.216281", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-173"}}
{"timestamp": "2025-10-20T21:14:39.225279", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-174"}}
{"timestamp": "2025-10-20T21:14:39.232292", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-175"}}
{"timestamp": "2025-10-20T21:14:39.242726", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-176"}}
{"timestamp": "2025-10-20T21:14:39.249740", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-177"}}
{"timestamp": "2025-10-20T21:14:39.256862", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-178"}}
{"timestamp": "2025-10-20T21:14:39.266162", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-179"}}
{"timestamp": "2025-10-20T21:14:39.775678", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-180"}}
{"timestamp": "2025-10-20T21:14:39.850285", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-181"}}
{"timestamp": "2025-10-20T21:14:39.913353", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-182"}}
{"timestamp": "2025-10-20T21:14:39.950068", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-183"}}
{"timestamp": "2025-10-20T21:14:46.509595", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:46.510610", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'Create a mermaid gantt chart for a 3-month software development project with planning, development, testing, and deployment phases.', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:46.512598", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: Create a mermaid gantt chart for a 3-month software development project with planning, development, testing, and deployment phases.", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:46.514601", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:46.515599", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:46.516601", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:46.521206", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Retrieved existing session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:46.522222", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:46.523291", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:46.525306", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:46.526305", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:46.527306", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:46.528305", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:46.530306", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:46.534305", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is follow-up message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:46.535345", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 4", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:46.537691", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:46.538689", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:46.539690", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:46.542701", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=False)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:46.543690", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Detected Mermaid diagram request, loading mermaid-architecture.md prompt", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:46.547059", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Auto-detected diagram request, using agent prompt: ---\ntitle: \"Mermaid Diagram Generation Expert (Rei...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:46.548127", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:46.550016", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:46.551040", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: False, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:46.552044", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:46.557034", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:46.560564", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:46.563028", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:53.020598", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761012886-RsyO59x7YqqwmNqOJUdm\",\n  \"provider\": \"SiliconFlow\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761012886,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```mermaid\\ngantt\\n    title 3-Month Software Development Project\\n    dateFormat  YYYY-MM-DD\\n    section Planning\\n    Requirements Analysis    :done, req1, 2023-01-01, 10d\\n    Design                   :done, des1, 2023-01-11, 15d\\n    Project Setup            :done, setup1, 2023-01-26, 5d\\n    section Development\\n    Backend Development      :dev1, 2023-02-01, 20d\\n    Frontend Development     :dev2, 2023-02-01, 20d\\n    API Integration          :dev3, 2023-02-15, 10d\\n    Database Implementation  :dev4, 2023-02-01, 15d\\n    section Testing\\n    Unit Testing             :test1, 2023-02-20, 10d\\n    Integra", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:53.021597", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 1821 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:53.022599", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```mermaid\ngantt\n    title 3-Month Software Development Project\n    dateFormat  YYYY-MM-DD\n    section Planning\n    Requirements Analysis    :done, req1, 2023-01-01, 10d\n    Design                   :", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:53.023601", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 1821 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:53.025018", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No D2 diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:53.025018", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 1821 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:53.026035", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 [MERMAID PROGRESS] Found 1 Mermaid diagram(s) - validating syntax...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:53.028043", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "[MERMAID PROGRESS] Validation attempt 1/5", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:58.759358", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [MERMAID PROGRESS] All Mermaid diagrams validated successfully!", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:58.761358", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After Mermaid validation/fix: 1821 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:58.762360", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Using agent prompt for question: Create a mermaid gantt chart for a 3-month software development project with planning, development, ...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:58.765573", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt length: 7435 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:58.767589", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt preview: ---\ntitle: \"Mermaid Diagram Generation Expert (Reinforced)\"\ndescription: \"Generate Mermaid Diagrams\"\ncategory: [\"Code Review\", \"Software Development\", \"Quality Assurance\"]\nauthor: \"Eric M\"\ncreated: \"2...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:58.769118", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Question contains diagram keywords", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:58.771117", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response preview: ```mermaid\ngantt\n    title 3-Month Software Development Project\n    dateFormat  YYYY-MM-DD\n    section Planning\n    Requirements Analysis    :done, req1, 2023-01-01, 10d\n    Design                   :done, des1, 2023-01-11, 15d\n    Project Setup            :done, setup1, 2023-01-26, 5d\n    section Development\n    Backend Development      :dev1, 2023-02-01, 20d\n    Frontend Development     :dev2, 2023-02-01, 20d\n    API Integration          :dev3, 2023-02-15, 10d\n    Database Implementation  :dev...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:58.773560", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response contains Mermaid code block", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:58.775577", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 12.236s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:58.776578", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:58.777577", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:58.916474", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 12.24s using 2294 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:58.917497", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:58.957648", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Loaded conversation history: C:\\Code2025\\Whysper\\history\\20251020-211232_fecb9408-59eb-4ab4-8c09-5691b754ef65.json", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:58.965915", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251020-211232_fecb9408-59eb-4ab4-8c09-5691b754ef65.json (10 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:58.969334", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (10 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:58.971355", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:59.014814", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37620, "thread_name": "AnyIO worker thread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-20T21:14:59.395622", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-189"}}
{"timestamp": "2025-10-20T21:14:59.406134", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-190"}}
{"timestamp": "2025-10-20T21:14:59.412881", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-191"}}
{"timestamp": "2025-10-20T21:14:59.420361", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-192"}}
{"timestamp": "2025-10-20T21:14:59.429785", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-193"}}
{"timestamp": "2025-10-20T21:14:59.437893", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-194"}}
{"timestamp": "2025-10-20T21:14:59.445414", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-195"}}
{"timestamp": "2025-10-20T21:14:59.454723", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-196"}}
{"timestamp": "2025-10-20T21:14:59.466778", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-197"}}
{"timestamp": "2025-10-20T21:14:59.484819", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-198"}}
{"timestamp": "2025-10-20T21:14:59.507406", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-199"}}
{"timestamp": "2025-10-20T21:14:59.526735", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-200"}}
{"timestamp": "2025-10-20T21:14:59.545601", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-201"}}
{"timestamp": "2025-10-20T21:14:59.559227", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-202"}}
{"timestamp": "2025-10-20T21:14:59.709392", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-203"}}
{"timestamp": "2025-10-20T21:14:59.719279", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-204"}}
{"timestamp": "2025-10-20T21:14:59.732245", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-208"}}
{"timestamp": "2025-10-20T21:14:59.740280", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-209"}}
{"timestamp": "2025-10-20T21:14:59.751345", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-210"}}
{"timestamp": "2025-10-20T21:14:59.756346", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-211"}}
{"timestamp": "2025-10-20T21:14:59.768390", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-212"}}
{"timestamp": "2025-10-20T21:14:59.782392", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-213"}}
{"timestamp": "2025-10-20T21:14:59.832073", "level": "ERROR", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "❌ Error rendering MERMAID diagram: Invalid date:2023 --> +01: 01", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-214"}}
{"timestamp": "2025-10-20T21:14:59.846297", "level": "ERROR", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "❌ Error rendering MERMAID diagram: Invalid date:2023 --> +01: 01", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-215"}}
{"timestamp": "2025-10-20T21:14:59.866186", "level": "ERROR", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "❌ Error rendering MERMAID diagram: Invalid date:2023 --> +01: 01", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-216"}}
{"timestamp": "2025-10-20T21:14:59.872190", "level": "ERROR", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "❌ Error rendering MERMAID diagram: Invalid date:2023 --> +01: 01", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29488, "thread_name": "MainThread", "process": 36300, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-217"}}
{"timestamp": "2025-10-21T13:03:31.554123", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29316, "thread_name": "MainThread", "process": 34052, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T13:03:32.821834", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29316, "thread_name": "MainThread", "process": 34052, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T13:03:32.822839", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29316, "thread_name": "MainThread", "process": 34052, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-21T13:03:32.912505", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29316, "thread_name": "MainThread", "process": 34052, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-21T13:03:32.913487", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29316, "thread_name": "MainThread", "process": 34052, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T13:03:32.913487", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29316, "thread_name": "MainThread", "process": 34052, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T13:03:52.233050", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29316, "thread_name": "MainThread", "process": 34052, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T13:03:53.258003", "level": "INFO", "logger": "whysper.app.main", "message": "Static files directory: C:\\Code2025\\Whysper\\backend\\static", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29316, "thread_name": "MainThread", "process": 34052, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T13:04:10.890033", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26748, "thread_name": "MainThread", "process": 28360, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T13:04:11.498403", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26748, "thread_name": "MainThread", "process": 28360, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T13:04:11.498937", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26748, "thread_name": "MainThread", "process": 28360, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-21T13:04:11.517171", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26748, "thread_name": "MainThread", "process": 28360, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-21T13:04:11.518302", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26748, "thread_name": "MainThread", "process": 28360, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T13:04:11.518302", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26748, "thread_name": "MainThread", "process": 28360, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T13:04:19.563336", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26748, "thread_name": "MainThread", "process": 28360, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T13:04:20.281641", "level": "INFO", "logger": "whysper.app.main", "message": "Static files directory: C:\\Code2025\\Whysper\\backend\\static", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26748, "thread_name": "MainThread", "process": 28360, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T13:04:21.290328", "level": "INFO", "logger": "whysper.app.main", "message": "Starting Whysper Web2 Backend v2.0.0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26748, "thread_name": "MainThread", "process": 28360, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T13:04:21.293333", "level": "INFO", "logger": "whysper.app.main", "message": "Server running on 0.0.0.0:8003", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26748, "thread_name": "MainThread", "process": 28360, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T13:04:21.301953", "level": "INFO", "logger": "whysper.app.main", "message": "Debug mode: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26748, "thread_name": "MainThread", "process": 28360, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T13:04:21.303339", "level": "INFO", "logger": "whysper.app.main", "message": "CORS origins: ['http://localhost:3000', 'http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:5176', 'http://localhost:5177', 'http://localhost:5178', 'http://127.0.0.1:3000', 'http://127.0.0.1:5173', 'http://127.0.0.1:5174', 'http://127.0.0.1:5175', 'http://127.0.0.1:5176', 'http://127.0.0.1:5177']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26748, "thread_name": "MainThread", "process": 28360, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T13:04:21.310544", "level": "INFO", "logger": "whysper.app.main", "message": "Real-time log broadcasting enabled - connect to GET /api/v1/logs/stream", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26748, "thread_name": "MainThread", "process": 28360, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T13:04:21.316565", "level": "INFO", "logger": "whysper.app.main", "message": "FastMCP server integration initialized", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26748, "thread_name": "MainThread", "process": 28360, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T13:04:21.320493", "level": "INFO", "logger": "whysper.app.main", "message": "MCP endpoints available at /mcp/*", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26748, "thread_name": "MainThread", "process": 28360, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T13:04:21.323495", "level": "INFO", "logger": "whysper.app.main", "message": "MCP tools: generate_diagram, render_diagram, generate_and_render", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26748, "thread_name": "MainThread", "process": 28360, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T13:04:21.325009", "level": "INFO", "logger": "whysper.app.main", "message": "MCP WebSocket endpoint: /mcp/ws", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26748, "thread_name": "MainThread", "process": 28360, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T16:13:44.871856", "level": "INFO", "logger": "whysper.app.main", "message": "Shutting down Whysper Web2 Backend", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 26748, "thread_name": "MainThread", "process": 28360, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T16:14:12.516375", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 34040, "thread_name": "MainThread", "process": 41864, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:14:13.652851", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 34040, "thread_name": "MainThread", "process": 41864, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:14:13.666489", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 34040, "thread_name": "MainThread", "process": 41864, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-21T16:14:13.734109", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 34040, "thread_name": "MainThread", "process": 41864, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-21T16:14:13.785863", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 34040, "thread_name": "MainThread", "process": 41864, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:14:13.806174", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 34040, "thread_name": "MainThread", "process": 41864, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:14:36.163653", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 34040, "thread_name": "MainThread", "process": 41864, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:14:36.699835", "level": "INFO", "logger": "whysper.app.main", "message": "Static files directory: C:\\Code2025\\Whysper\\backend\\static", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 34040, "thread_name": "MainThread", "process": 41864, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:14:37.394852", "level": "INFO", "logger": "whysper.app.main", "message": "Starting Whysper Web2 Backend v2.0.0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 34040, "thread_name": "MainThread", "process": 41864, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T16:14:37.398185", "level": "INFO", "logger": "whysper.app.main", "message": "Server running on 0.0.0.0:8003", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 34040, "thread_name": "MainThread", "process": 41864, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T16:14:37.400182", "level": "INFO", "logger": "whysper.app.main", "message": "Debug mode: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 34040, "thread_name": "MainThread", "process": 41864, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T16:14:37.401183", "level": "INFO", "logger": "whysper.app.main", "message": "CORS origins: ['http://localhost:3000', 'http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:5176', 'http://localhost:5177', 'http://localhost:5178', 'http://127.0.0.1:3000', 'http://127.0.0.1:5173', 'http://127.0.0.1:5174', 'http://127.0.0.1:5175', 'http://127.0.0.1:5176', 'http://127.0.0.1:5177']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 34040, "thread_name": "MainThread", "process": 41864, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T16:14:37.403421", "level": "INFO", "logger": "whysper.app.main", "message": "Real-time log broadcasting enabled - connect to GET /api/v1/logs/stream", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 34040, "thread_name": "MainThread", "process": 41864, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T16:14:37.405877", "level": "INFO", "logger": "whysper.app.main", "message": "FastMCP server integration initialized", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 34040, "thread_name": "MainThread", "process": 41864, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T16:14:37.408897", "level": "INFO", "logger": "whysper.app.main", "message": "MCP endpoints available at /mcp/*", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 34040, "thread_name": "MainThread", "process": 41864, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T16:14:37.409893", "level": "INFO", "logger": "whysper.app.main", "message": "MCP tools: generate_diagram, render_diagram, generate_and_render", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 34040, "thread_name": "MainThread", "process": 41864, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T16:14:37.411894", "level": "INFO", "logger": "whysper.app.main", "message": "MCP WebSocket endpoint: /mcp/ws", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 34040, "thread_name": "MainThread", "process": 41864, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T16:22:45.797853", "level": "INFO", "logger": "whysper.app.main", "message": "Shutting down Whysper Web2 Backend", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 34040, "thread_name": "MainThread", "process": 41864, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T16:23:04.770608", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 17668, "thread_name": "MainThread", "process": 43432, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:23:06.182502", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 17668, "thread_name": "MainThread", "process": 43432, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:23:06.187152", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 17668, "thread_name": "MainThread", "process": 43432, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-21T16:23:06.246164", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 17668, "thread_name": "MainThread", "process": 43432, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-21T16:23:06.255940", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 17668, "thread_name": "MainThread", "process": 43432, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:23:06.256957", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 17668, "thread_name": "MainThread", "process": 43432, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:23:19.851202", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 17668, "thread_name": "MainThread", "process": 43432, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:23:20.397527", "level": "INFO", "logger": "whysper.app.main", "message": "Static files directory: C:\\Code2025\\Whysper\\backend\\static", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 17668, "thread_name": "MainThread", "process": 43432, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:23:21.011166", "level": "INFO", "logger": "whysper.app.main", "message": "Starting Whysper Web2 Backend v2.0.0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 17668, "thread_name": "MainThread", "process": 43432, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T16:23:21.013150", "level": "INFO", "logger": "whysper.app.main", "message": "Server running on 0.0.0.0:8003", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 17668, "thread_name": "MainThread", "process": 43432, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T16:23:21.015687", "level": "INFO", "logger": "whysper.app.main", "message": "Debug mode: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 17668, "thread_name": "MainThread", "process": 43432, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T16:23:21.017682", "level": "INFO", "logger": "whysper.app.main", "message": "CORS origins: ['http://localhost:3000', 'http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:5176', 'http://localhost:5177', 'http://localhost:5178', 'http://127.0.0.1:3000', 'http://127.0.0.1:5173', 'http://127.0.0.1:5174', 'http://127.0.0.1:5175', 'http://127.0.0.1:5176', 'http://127.0.0.1:5177']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 17668, "thread_name": "MainThread", "process": 43432, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T16:23:21.018682", "level": "INFO", "logger": "whysper.app.main", "message": "Real-time log broadcasting enabled - connect to GET /api/v1/logs/stream", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 17668, "thread_name": "MainThread", "process": 43432, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T16:23:21.021754", "level": "INFO", "logger": "whysper.app.main", "message": "FastMCP server integration initialized", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 17668, "thread_name": "MainThread", "process": 43432, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T16:23:21.022754", "level": "INFO", "logger": "whysper.app.main", "message": "MCP endpoints available at /mcp/*", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 17668, "thread_name": "MainThread", "process": 43432, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T16:23:21.024267", "level": "INFO", "logger": "whysper.app.main", "message": "MCP tools: generate_diagram, render_diagram, generate_and_render", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 17668, "thread_name": "MainThread", "process": 43432, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T16:23:21.025288", "level": "INFO", "logger": "whysper.app.main", "message": "MCP WebSocket endpoint: /mcp/ws", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 17668, "thread_name": "MainThread", "process": 43432, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T16:39:22.460703", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14260, "thread_name": "MainThread", "process": 35604, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:39:23.144868", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14260, "thread_name": "MainThread", "process": 35604, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:39:23.145859", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14260, "thread_name": "MainThread", "process": 35604, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-21T16:39:23.194384", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14260, "thread_name": "MainThread", "process": 35604, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-21T16:39:23.195411", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14260, "thread_name": "MainThread", "process": 35604, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:39:23.196396", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14260, "thread_name": "MainThread", "process": 35604, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:39:32.228780", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14260, "thread_name": "MainThread", "process": 35604, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:39:32.678380", "level": "INFO", "logger": "whysper.app.main", "message": "Static files directory: C:\\Code2025\\Whysper\\backend\\static", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 14260, "thread_name": "MainThread", "process": 35604, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:39:44.383589", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 30840, "thread_name": "MainThread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:39:45.089625", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 30840, "thread_name": "MainThread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:39:45.090616", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 30840, "thread_name": "MainThread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-21T16:39:45.122952", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 30840, "thread_name": "MainThread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-21T16:39:45.123984", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 30840, "thread_name": "MainThread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:39:45.124965", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 30840, "thread_name": "MainThread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:39:53.458881", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 30840, "thread_name": "MainThread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:39:53.958462", "level": "INFO", "logger": "whysper.app.main", "message": "Static files directory: C:\\Code2025\\Whysper\\backend\\static", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 30840, "thread_name": "MainThread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:39:54.401034", "level": "INFO", "logger": "whysper.app.main", "message": "Starting Whysper Web2 Backend v2.0.0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 30840, "thread_name": "MainThread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T16:39:54.404378", "level": "INFO", "logger": "whysper.app.main", "message": "Server running on 0.0.0.0:8003", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 30840, "thread_name": "MainThread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T16:39:54.406850", "level": "INFO", "logger": "whysper.app.main", "message": "Debug mode: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 30840, "thread_name": "MainThread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T16:39:54.408854", "level": "INFO", "logger": "whysper.app.main", "message": "CORS origins: ['http://localhost:3000', 'http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:5176', 'http://localhost:5177', 'http://localhost:5178', 'http://127.0.0.1:3000', 'http://127.0.0.1:5173', 'http://127.0.0.1:5174', 'http://127.0.0.1:5175', 'http://127.0.0.1:5176', 'http://127.0.0.1:5177']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 30840, "thread_name": "MainThread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T16:39:54.411852", "level": "INFO", "logger": "whysper.app.main", "message": "Real-time log broadcasting enabled - connect to GET /api/v1/logs/stream", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 30840, "thread_name": "MainThread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T16:39:54.413850", "level": "INFO", "logger": "whysper.app.main", "message": "FastMCP server integration initialized", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 30840, "thread_name": "MainThread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T16:39:54.414853", "level": "INFO", "logger": "whysper.app.main", "message": "MCP endpoints available at /mcp/*", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 30840, "thread_name": "MainThread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T16:39:54.416866", "level": "INFO", "logger": "whysper.app.main", "message": "MCP tools: generate_diagram, render_diagram, generate_and_render", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 30840, "thread_name": "MainThread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T16:39:54.416866", "level": "INFO", "logger": "whysper.app.main", "message": "MCP WebSocket endpoint: /mcp/ws", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 30840, "thread_name": "MainThread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T16:42:10.524083", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35268, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:10.561954", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40596, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:10.622384", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35268, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:10.644428", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40596, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:11.100829", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:11.157140", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:11.179794", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:11.203805", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:11.369571", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:11.373502", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:11.394727", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:11.407233", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:16.803289", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 30840, "thread_name": "MainThread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-20"}}
{"timestamp": "2025-10-21T16:42:55.317555", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.321558", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'generate a d2 diagram of an iphone app', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'timeout': 120, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.324553", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: generate a d2 diagram of an iphone app", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.325556", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.327554", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.329726", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'timeout': 120, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.335150", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Creating new conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.336149", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Creating conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.337149", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-21T16:42:55.376480", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-21T16:42:55.377478", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.378481", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initializing conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.379663", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Set default model: qwen/qwen3-coder-30b-a3b-instruct", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.383895", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initialized session logger for: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.387218", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Created new conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.390610", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Conversation session conv-1 initialized successfully", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.393615", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Setting API key for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.393615", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "API key updated for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.395610", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Session created", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.396609", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.397610", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Provider update skipped - same or empty provider: 'openrouter'", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.397610", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating model to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.398872", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Model updated", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.400885", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Model changed to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.401887", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.402931", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Using agent prompt: You are a helpful AI assistant specialized in code analysis and development....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.404031", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.405053", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.407054", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.408056", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.409482", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.410506", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is first message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.413707", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "First question has no file context in session conv-1 - proceeding without code context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.417006", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.421023", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.422019", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.423024", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.424022", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=True)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.429024", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.430024", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.433369", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: True, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.435370", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.437374", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.440371", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "⚠️ First message but NO SELECTED FILES", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.441374", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:42:55.443370", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:01.863642", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761082982-GGptUFgioJeVMO90R13j\",\n  \"provider\": \"SiliconFlow\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761082982,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"Here's a D2 diagram representing an iPhone app architecture with key components and their relationships:\\n\\n```d2\\n// iPhone App Architecture Diagram\\n\\n// App Container\\n\\\"iPhone App\\\" {\\n  style: \\\"filled\\\"\\n  color: \\\"#f0f0f0\\\"\\n  stroke: \\\"#333\\\"\\n  \\\"App Delegate\\\" {\\n    style: \\\"filled\\\"\\n    color: \\\"#4CAF50\\\"\\n    shape: \\\"rectangle\\\"\\n  }\\n  \\\"Main View Controller\\\" {\\n    style: \\\"filled\\\"\\n    color: \\\"#2196F3\\\"\\n    shape: \\\"rectangle\\\"\\n  }\\n  \\\"Navigation Controller\\\" {\\n    style: \\\"filled\\\"\\n    color: \\\"#FF9800\\\"\\n    shape: \\\"rectangle\\\"\\n  }\\n  \\\"Tab Bar Controller\\\" {\\n    style: \\\"filled\\\"", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:01.864644", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 2910 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:01.865643", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: Here's a D2 diagram representing an iPhone app architecture with key components and their relationships:\n\n```d2\n// iPhone App Architecture Diagram\n\n// App Container\n\"iPhone App\" {\n  style: \"filled\"\n  ", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:01.867643", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 2910 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:01.871653", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 [D2 PROGRESS] Found 1 D2 diagram(s) - validating syntax...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:02.610981", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Validation attempt 1/8", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:02.978698", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "D2 diagram #1 validation failed: debug: using theme Neutral Default (ID: 0)\nerr: failed to compile ..\\..\\..\\Users\\Hack\\AppData\\Local\\Temp\\tmpm4wgtmk7.d2: C:\\Users\\Hack\\AppData\\Local\\Temp\\tmpm4wgtmk7.d2:79:34: unexpected text after ma", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:02.979819", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔧 [D2 PROGRESS] Validation errors found - requesting AI auto-fix (attempt 1/8)...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:04.326155", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761082989-ZSZfl4Bkg8JIUaNdNMIF\",\n  \"provider\": \"Nebius\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761082989,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```d2\\n// Define shapes for different elements\\nDatabase1: {\\n  shape: cylinder\\n}\\n\\nWebApp1: {\\n  shape: rectangle\\n}\\n\\nUser1: {\\n  shape: person\\n}\\n\\nCloud1: {\\n  shape: cloud\\n}\\n\\n// Example usage with proper string quoting\\nDatabase1.label: \\\"Database\\\"\\nWebApp1.label: \\\"Web Application\\\"\\nUser1.label: \\\"User\\\"\\nCloud1.label: \\\"Cloud Service\\\"\\n\\n// Connections (example)\\nUser1 -> WebApp1\\nWebApp1 -> Database1\\nWebApp1 -> Cloud1\\n```\",\n        \"refusal\": null,\n        \"reasoning\": null\n      }\n    }\n  ],\n  \"usage\": {\n    \"prompt_tokens\": 355,\n    \"completion_tokens\": 119,\n    \"total_tokens\": 474\n  }\n}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:04.334019", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 409 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:04.336038", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```d2\n// Define shapes for different elements\nDatabase1: {\n  shape: cylinder\n}\n\nWebApp1: {\n  shape: rectangle\n}\n\nUser1: {\n  shape: person\n}\n\nCloud1: {\n  shape: cloud\n}\n\n// Example usage with proper st", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:04.338037", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [D2 PROGRESS] Received corrected D2 code (409 chars) - re-validating...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:04.339036", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Validation attempt 2/8", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:05.237378", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [D2 PROGRESS] All D2 diagrams validated successfully!", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:05.243833", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [D2 PROGRESS] Rendering diagrams to SVG...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:05.247832", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Pre-rendering D2 diagram #1 (400 chars)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:05.949349", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Saved D2 diagram to: backend\\static\\d2_diagrams\\d2_diagram_20251021_164305_eef6d054.svg", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:05.950647", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "D2 diagrams pre-rendered successfully", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:05.952747", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [D2 PROGRESS] D2 diagrams rendered and ready for display!", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:05.953746", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 17675 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:05.957746", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No Mermaid diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:05.958744", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After Mermaid validation/fix: 17675 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:05.959749", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Using agent prompt for question: generate a d2 diagram of an iphone app...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:05.961343", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt length: 76 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:05.963594", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt preview: You are a helpful AI assistant specialized in code analysis and development....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:05.964612", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Question contains diagram keywords", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:05.966618", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response preview: <div class=\"d2-diagram-container\" style=\"margin: 16px 0;\">\n<div style=\"display: inline-flex; align-items: center; gap: 6px; padding: 6px 12px; background: linear-gradient(135deg, #10b981 0%, #059669 100%); border-radius: 6px; margin-bottom: 12px; font-size: 12px; font-weight: 500; color: white;\">\n  <span style=\"font-size: 14px;\">✅</span>\n  <span>D2 Diagram Rendered Successfully</span>\n</div>\n  <div class=\"d2-rendered-diagram\">\n    <?xml version=\"1.0\" encoding=\"utf-8\"?><svg xmlns=\"http://www.w3.o...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:05.969883", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response does NOT contain Mermaid code block", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:05.970892", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 10.548s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:05.972885", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:05.974880", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Inserted new system message with current context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:05.975888", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:06.137596", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 10.55s using 474 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:06.141526", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:06.144433", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "Created new GUID 43ded770-54bc-4630-99c8-802ddc64e31d for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:06.147430", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "No history file found for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:06.156786", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251021-164306_43ded770-54bc-4630-99c8-802ddc64e31d.json (2 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:06.159816", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (2 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:06.161814", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:06.210067", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42824, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:43:06.707113", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 30840, "thread_name": "MainThread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-35"}}
{"timestamp": "2025-10-21T16:43:06.719633", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 30840, "thread_name": "MainThread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-36"}}
{"timestamp": "2025-10-21T16:43:10.183509", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 30840, "thread_name": "MainThread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-39"}}
{"timestamp": "2025-10-21T16:43:10.191328", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 30840, "thread_name": "MainThread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41"}}
{"timestamp": "2025-10-21T16:43:16.685691", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 30840, "thread_name": "MainThread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-42"}}
{"timestamp": "2025-10-21T16:43:16.695330", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 30840, "thread_name": "MainThread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-43"}}
{"timestamp": "2025-10-21T16:43:45.175888", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 30840, "thread_name": "MainThread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-53"}}
{"timestamp": "2025-10-21T16:43:45.181033", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 30840, "thread_name": "MainThread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-54"}}
{"timestamp": "2025-10-21T16:44:02.432249", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:02.433248", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'what does base_ai.py do?', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'timeout': 120, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:02.436772", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: what does base_ai.py do?", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:02.440970", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:02.442985", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:02.443989", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'timeout': 120, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:02.449263", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Retrieved existing session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:02.451279", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:02.453769", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Provider update skipped - same or empty provider: 'openrouter'", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:02.454771", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating model to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:02.455789", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Model updated", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:02.456769", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Model changed to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:02.457947", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:02.459228", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Using agent prompt: You are a helpful AI assistant specialized in code analysis and development....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:02.460746", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:02.461765", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:02.463760", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:02.464762", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:02.468302", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:02.470454", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is follow-up message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:02.472474", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:02.476893", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:02.483890", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:02.491200", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:02.495189", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=False)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:02.499641", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:02.502648", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:02.508360", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: False, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:02.530827", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:02.537539", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:02.539734", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:02.544734", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:04.794633", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761083049-nfnvfvqy0vbOYexRAUbO\",\n  \"provider\": \"Novita\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761083049,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"I don't have access to a file named `base_ai.py` in the context of our conversation. This could be a file from a specific project or codebase that you're referring to.\\n\\nCould you provide more context about where this file is from? For example:\\n\\n1. Is it part of a specific project or framework?\\n2. What's the project structure or codebase you're working with?\\n3. Are there any specific functions or classes you'd like me to explain?\\n\\nIf you can share the contents of the file or describe what it's supposed to do, I'd be happy to help explain its functionality. Alternatively, if you're asking about a general conce", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:04.796937", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 838 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:04.797933", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: I don't have access to a file named `base_ai.py` in the context of our conversation. This could be a file from a specific project or codebase that you're referring to.\n\nCould you provide more context ", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:04.799502", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 838 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:04.801516", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No D2 diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:04.803611", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 838 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:04.804615", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No Mermaid diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:04.805609", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After Mermaid validation/fix: 838 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:04.807753", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Using agent prompt for question: what does base_ai.py do?...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:04.809080", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt length: 76 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:04.811576", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt preview: You are a helpful AI assistant specialized in code analysis and development....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:04.813074", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 2.322s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:04.814090", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:04.815478", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updated existing system message with current context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:04.816494", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:04.865961", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 2.32s using 10279 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:04.867983", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:04.935912", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Loaded conversation history: C:\\Code2025\\Whysper\\history\\20251021-164306_43ded770-54bc-4630-99c8-802ddc64e31d.json", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:04.951205", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251021-164306_43ded770-54bc-4630-99c8-802ddc64e31d.json (4 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:04.953736", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (4 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:04.955030", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:04.989306", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:34.961394", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "clear_conversation endpoint called for: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:35.003623", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Clearing conversation for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:35.035477", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Conversation cleared", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:35.057253", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Conversation cleared for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:35.068916", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Conversation cleared for session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:57.995723", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:57.997736", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'what does the code do', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'timeout': 120, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:57.998740", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: what does the code do", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:57.998740", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:58.000959", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:58.002959", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'timeout': 120, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:58.006437", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Retrieved existing session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:58.007887", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:58.009320", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Provider update skipped - same or empty provider: 'openrouter'", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:58.009320", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating model to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:58.011336", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Model updated", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:58.012336", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Model changed to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:58.014347", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:58.015813", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Using agent prompt: You are a helpful AI assistant specialized in code analysis and development....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:58.016836", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:58.018837", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:58.022356", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:58.023695", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:58.024942", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:58.025959", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is first message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:58.027434", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "First question has no file context in session conv-1 - proceeding without code context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:58.033061", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:58.034056", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:58.035059", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:58.040833", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:58.044479", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=True)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:58.047520", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:58.051855", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:58.053855", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: True, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:58.057275", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:58.058330", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:58.060352", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "⚠️ First message but NO SELECTED FILES", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:58.061353", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:44:58.063354", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:04.919636", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761083107-BXvNH3y5uNQ9YJCJ9QUR\",\n  \"provider\": \"Novita\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761083107,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"I'd be happy to help you understand what the code does! However, I don't see any code provided in your message. Could you please share the code you'd like me to analyze?\\n\\nOnce you provide the code, I'll be able to explain:\\n- What the code does overall\\n- Key functions and their purposes\\n- The logic flow\\n- Any important patterns or techniques used\\n- Potential use cases or applications\\n\\nPlease paste the code and I'll give you a detailed explanation.\",\n        \"refusal\": null,\n        \"reasoning\": null\n      }\n    }\n  ],\n  \"system_fingerprint\": \"\",\n  \"usage\": {\n    \"prompt_tokens\": 39,\n    \"completion_tokens\": ", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:04.922658", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 450 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:04.923696", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: I'd be happy to help you understand what the code does! However, I don't see any code provided in your message. Could you please share the code you'd like me to analyze?\n\nOnce you provide the code, I'", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:04.923696", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 450 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:04.925696", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No D2 diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:04.926697", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 450 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:04.928695", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No Mermaid diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:04.929698", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After Mermaid validation/fix: 450 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:04.931704", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Using agent prompt for question: what does the code do...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:04.932707", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt length: 76 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:04.934221", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt preview: You are a helpful AI assistant specialized in code analysis and development....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:04.936249", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 6.895s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:04.937243", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:04.939240", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Inserted new system message with current context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:04.941250", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:04.944240", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 6.90s using 139 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:04.945243", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:05.055932", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Loaded conversation history: C:\\Code2025\\Whysper\\history\\20251021-164306_43ded770-54bc-4630-99c8-802ddc64e31d.json", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:05.127418", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251021-164306_43ded770-54bc-4630-99c8-802ddc64e31d.json (6 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:05.133174", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (6 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:05.145704", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:05.178101", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:54.109601", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:54.112619", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'what is 1 plus 1', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'timeout': 120, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:54.115625", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: what is 1 plus 1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:54.119624", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:54.120622", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:54.123126", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'timeout': 120, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:54.126320", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Retrieved existing session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:54.128338", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:54.129340", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Provider update skipped - same or empty provider: 'openrouter'", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:54.132069", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating model to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:54.133083", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Model updated", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:54.135088", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Model changed to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:54.138083", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:54.144356", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Using agent prompt: You are a helpful AI assistant specialized in code analysis and development....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:54.145355", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:54.147354", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:54.153931", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:54.156268", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:54.160566", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:54.161566", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is follow-up message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:54.163058", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:54.164071", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:54.166576", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:54.171956", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:54.182710", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: False (first_message=False)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:54.184971", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:54.193157", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:54.194679", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: False, needs_context: False", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:54.195681", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:54.196691", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:54.198057", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "❌ No codebase context needed, returning empty", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:54.199082", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:54.203593", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:57.539966", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761083160-reh6rNSQ6iTMpwCcIxAc\",\n  \"provider\": \"Novita\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761083160,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"1 plus 1 equals 2.\\n\\nThis is a basic arithmetic operation: 1 + 1 = 2.\",\n        \"refusal\": null,\n        \"reasoning\": null\n      }\n    }\n  ],\n  \"system_fingerprint\": \"\",\n  \"usage\": {\n    \"prompt_tokens\": 129,\n    \"completion_tokens\": 24,\n    \"total_tokens\": 153,\n    \"prompt_tokens_details\": null,\n    \"completion_tokens_details\": null\n  }\n}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:57.543376", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 68 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:57.544629", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: 1 plus 1 equals 2.\n\nThis is a basic arithmetic operation: 1 + 1 = 2.", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:57.545647", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 68 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:57.548145", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No D2 diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:57.557251", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 68 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:57.559255", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No Mermaid diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:57.560270", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After Mermaid validation/fix: 68 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:57.561521", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Using agent prompt for question: what is 1 plus 1...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:57.564189", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt length: 76 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:57.565213", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt preview: You are a helpful AI assistant specialized in code analysis and development....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:57.568214", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 3.396s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:57.569209", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:57.572212", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updated existing system message with current context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:57.573213", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:57.579837", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 3.40s using 153 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:57.586760", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:57.667393", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Loaded conversation history: C:\\Code2025\\Whysper\\history\\20251021-164306_43ded770-54bc-4630-99c8-802ddc64e31d.json", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:57.682307", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251021-164306_43ded770-54bc-4630-99c8-802ddc64e31d.json (8 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:57.684775", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (8 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:57.685882", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:45:57.722288", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:38.356606", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:38.358608", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'what makes a good AI Application', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'timeout': 120, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:38.359607", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: what makes a good AI Application", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:38.367430", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:38.369900", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:38.372899", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'timeout': 120, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:38.377172", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Retrieved existing session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:38.382244", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:38.384261", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Provider update skipped - same or empty provider: 'openrouter'", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:38.386261", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating model to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:38.391368", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Model updated", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:38.394748", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Model changed to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:38.397911", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:38.398915", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Using agent prompt: You are a helpful AI assistant specialized in code analysis and development....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:38.401449", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:38.402552", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:38.404858", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:38.413890", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:38.415884", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:38.419205", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is follow-up message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:38.420209", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:38.438568", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:38.463456", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:38.467965", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:38.511554", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: False (first_message=False)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:38.523403", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:38.525402", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:38.533758", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: False, needs_context: False", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:38.538060", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:38.544538", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:38.553524", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "❌ No codebase context needed, returning empty", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:38.558526", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:38.560611", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:41.918123", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761083205-TUIYLCTkKs8cf4Q9wGwl\",\n  \"provider\": \"Novita\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761083205,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"A good AI application typically has several key characteristics:\\n\\n## **Clear Problem Solving**\\n- Addresses a genuine need or pain point\\n- Provides measurable value to users\\n- Solves problems that are difficult or time-consuming for humans\\n\\n## **Technical Excellence**\\n- **Data quality**: Uses relevant, clean, and sufficient training data\\n- **Model selection**: Chooses appropriate AI techniques for the task\\n- **Performance**: Delivers accurate, reliable results consistently\\n- **Scalability**: Handles increasing demand efficiently\\n\\n## **User Experience**\\n- **Intuitive interface**: Easy to use and understa", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:41.920123", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 1456 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:41.921122", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: A good AI application typically has several key characteristics:\n\n## **Clear Problem Solving**\n- Addresses a genuine need or pain point\n- Provides measurable value to users\n- Solves problems that are ", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:41.922289", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 1456 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:41.923307", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No D2 diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:41.924307", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 1456 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:41.925308", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No Mermaid diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:41.926820", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After Mermaid validation/fix: 1456 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:41.928129", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Using agent prompt for question: what makes a good AI Application...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:41.929266", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt length: 76 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:41.931294", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt preview: You are a helpful AI assistant specialized in code analysis and development....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:41.932283", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 3.464s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:41.934286", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:41.936284", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updated existing system message with current context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:41.939351", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:41.985340", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 3.46s using 450 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:41.990833", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:42.065939", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Loaded conversation history: C:\\Code2025\\Whysper\\history\\20251021-164306_43ded770-54bc-4630-99c8-802ddc64e31d.json", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:42.074510", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251021-164306_43ded770-54bc-4630-99c8-802ddc64e31d.json (10 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:42.075771", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (10 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:42.079297", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:46:42.110476", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29088, "thread_name": "AnyIO worker thread", "process": 27996, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:51:51.211906", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 21648, "thread_name": "MainThread", "process": 28344, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:51:51.995555", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 21648, "thread_name": "MainThread", "process": 28344, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:51:51.997559", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 21648, "thread_name": "MainThread", "process": 28344, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-21T16:51:52.071892", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 21648, "thread_name": "MainThread", "process": 28344, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-21T16:51:52.083083", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 21648, "thread_name": "MainThread", "process": 28344, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:51:52.088911", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 21648, "thread_name": "MainThread", "process": 28344, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:51:59.976094", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 21648, "thread_name": "MainThread", "process": 28344, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:52:00.509967", "level": "INFO", "logger": "whysper.app.main", "message": "Static files directory: C:\\Code2025\\Whysper\\backend\\static", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 21648, "thread_name": "MainThread", "process": 28344, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:52:10.322357", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:52:10.958309", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:52:10.959299", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-21T16:52:10.980872", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-21T16:52:10.981857", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:52:10.982861", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:52:20.151028", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:52:21.431427", "level": "INFO", "logger": "whysper.app.main", "message": "Static files directory: C:\\Code2025\\Whysper\\backend\\static", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:52:22.496145", "level": "INFO", "logger": "whysper.app.main", "message": "Starting Whysper Web2 Backend v2.0.0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T16:52:22.524099", "level": "INFO", "logger": "whysper.app.main", "message": "Server running on 0.0.0.0:8003", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T16:52:22.555326", "level": "INFO", "logger": "whysper.app.main", "message": "Debug mode: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T16:52:22.573598", "level": "INFO", "logger": "whysper.app.main", "message": "CORS origins: ['http://localhost:3000', 'http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:5176', 'http://localhost:5177', 'http://localhost:5178', 'http://127.0.0.1:3000', 'http://127.0.0.1:5173', 'http://127.0.0.1:5174', 'http://127.0.0.1:5175', 'http://127.0.0.1:5176', 'http://127.0.0.1:5177']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T16:52:22.669965", "level": "INFO", "logger": "whysper.app.main", "message": "Real-time log broadcasting enabled - connect to GET /api/v1/logs/stream", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T16:52:22.703921", "level": "INFO", "logger": "whysper.app.main", "message": "FastMCP server integration initialized", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T16:52:22.718542", "level": "INFO", "logger": "whysper.app.main", "message": "MCP endpoints available at /mcp/*", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T16:52:22.768639", "level": "INFO", "logger": "whysper.app.main", "message": "MCP tools: generate_diagram, render_diagram, generate_and_render", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T16:52:22.773697", "level": "INFO", "logger": "whysper.app.main", "message": "MCP WebSocket endpoint: /mcp/ws", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T16:52:30.869038", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 4448, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:52:30.869038", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:52:30.873049", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 4448, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:52:30.875051", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:52:30.904319", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-14"}}
{"timestamp": "2025-10-21T16:52:31.136852", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:52:31.145884", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 4448, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:52:31.183767", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:52:31.193613", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 4448, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:52:32.361291", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 4448, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:52:32.362289", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:52:32.367299", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 4448, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:52:32.381034", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:04.724082", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:04.791342", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'create a d2 diagram for an iphone app', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:04.793345", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: create a d2 diagram for an iphone app", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:04.795342", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:04.816862", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:04.832147", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:04.840097", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Creating new conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:04.844114", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Creating conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:04.848120", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-21T16:53:04.933154", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-21T16:53:04.936170", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:04.958062", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initializing conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:04.962376", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Set default model: qwen/qwen3-coder-30b-a3b-instruct", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:05.011554", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initialized session logger for: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:05.015779", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Created new conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:05.018778", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Conversation session conv-1 initialized successfully", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:05.020784", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Setting API key for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:05.022862", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "API key updated for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:05.023882", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Session created", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:05.027397", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:05.031420", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:05.035831", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:05.039369", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:05.041371", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:05.043372", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:05.050424", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:05.051415", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is first message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:05.057966", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "First question has no file context in session conv-1 - proceeding without code context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:05.060115", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:05.063575", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:05.064595", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:05.066610", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:05.067609", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=True)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:05.070104", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Detected D2 diagram request, loading d2-architecture.md prompt", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:05.071104", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Auto-detected diagram request, using agent prompt: ---\ntitle: \"D2 Diagram Generation Expert (Reinforc...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:05.073109", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:05.075128", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:05.076124", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: True, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:05.077630", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:05.082325", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:05.086128", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "⚠️ First message but NO SELECTED FILES", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:05.087132", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:05.089663", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Injecting/updating system message with current context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:05.090660", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Inserted new system message with current context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:05.091663", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:13.024981", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761083593-nbTIFo0PcRO4N27O8uEw\",\n  \"provider\": \"Novita\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761083593,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"Here's a D2 diagram representing an iPhone app architecture with key components and their relationships:\\n\\n```d2\\n// iPhone App Architecture Diagram\\n\\n// Core Components\\napp: {\\n  label: \\\"iPhone App\\\"\\n  style: filled\\n  color: \\\"#007AFF\\\"\\n  icon: \\\"\\ud83d\\udcf1\\\"\\n}\\n\\n// UI Layer\\nui_layer: {\\n  label: \\\"UI Layer\\\"\\n  style: filled\\n  color: \\\"#F5F5F7\\\"\\n  icon: \\\"\\ud83d\\udcf1\\\"\\n  \\n  // UI Elements\\n  home_screen: {\\n    label: \\\"Home Screen\\\"\\n    style: filled\\n    color: \\\"#FFFFFF\\\"\\n    icon: \\\"\\ud83c\\udfe0\\\"\\n  }\\n  \\n  settings_screen: {\\n    label: \\\"Settings Screen\\\"\\n    style: filled\\n    color: \\", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:13.026406", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 3610 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:13.027417", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: Here's a D2 diagram representing an iPhone app architecture with key components and their relationships:\n\n```d2\n// iPhone App Architecture Diagram\n\n// Core Components\napp: {\n  label: \"iPhone App\"\n  st", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:13.029418", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 3610 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:13.032424", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 [D2 PROGRESS] Found 1 D2 diagram(s) - validating syntax...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:13.258368", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Validation attempt 1/8", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:13.267460", "level": "ERROR", "logger": "whysper.app.services.conversation_service", "message": "Error during D2 validation/fix: 'charmap' codec can't encode character '\\U0001f4f1' in position 135: character maps to <undefined>", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:13.282470", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 3610 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:13.285765", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No Mermaid diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:13.287781", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After Mermaid validation/fix: 3610 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:13.290781", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Using agent prompt for question: create a d2 diagram for an iphone app...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:13.292790", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt length: 5602 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:13.295997", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt preview: ---\ntitle: \"D2 Diagram Generation Expert (Reinforced)\"\ndescription: \"Generate D2 Diagrams\"\ncategory: [\"Code Review\", \"Software Development\", \"Quality Assurance\"]\nauthor: \"Eric M\"\ncreated: \"2025-09-27\"...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:13.299015", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Question contains diagram keywords", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:13.301298", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response preview: Here's a D2 diagram representing an iPhone app architecture with key components and their relationships:\n\n```d2\n// iPhone App Architecture Diagram\n\n// Core Components\napp: {\n  label: \"iPhone App\"\n  style: filled\n  color: \"#007AFF\"\n  icon: \"📱\"\n}\n\n// UI Layer\nui_layer: {\n  label: \"UI Layer\"\n  style: filled\n  color: \"#F5F5F7\"\n  icon: \"📱\"\n  \n  // UI Elements\n  home_screen: {\n    label: \"Home Screen\"\n    style: filled\n    color: \"#FFFFFF\"\n    icon: \"🏠\"\n  }\n  \n  settings_screen: {\n    label: \"Settings...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:13.306330", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response does NOT contain Mermaid code block", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:13.310350", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 8.244s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:13.313669", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:13.319674", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:13.852559", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 8.24s using 1017 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:13.854978", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:13.855978", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "Created new GUID 9ac9b5bc-9a1b-4e97-88a7-2ceb2eebecf0 for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:13.857358", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "No history file found for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:13.862676", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251021-165313_9ac9b5bc-9a1b-4e97-88a7-2ceb2eebecf0.json (2 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:13.874631", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (2 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:13.880679", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:13.950460", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32740, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:53:14.428977", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-34"}}
{"timestamp": "2025-10-21T16:53:14.471033", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-37"}}
{"timestamp": "2025-10-21T16:53:14.506802", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-40"}}
{"timestamp": "2025-10-21T16:53:14.573161", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41"}}
{"timestamp": "2025-10-21T16:53:14.931385", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-43"}}
{"timestamp": "2025-10-21T16:53:15.077929", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-44"}}
{"timestamp": "2025-10-21T16:53:15.105413", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-47"}}
{"timestamp": "2025-10-21T16:53:15.251078", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-48"}}
{"timestamp": "2025-10-21T16:53:15.361467", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-51"}}
{"timestamp": "2025-10-21T16:53:15.378797", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-52"}}
{"timestamp": "2025-10-21T16:53:15.498879", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-53"}}
{"timestamp": "2025-10-21T16:53:15.522611", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-54"}}
{"timestamp": "2025-10-21T16:53:36.905509", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-62"}}
{"timestamp": "2025-10-21T16:53:36.914156", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-63"}}
{"timestamp": "2025-10-21T16:53:36.947209", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-64"}}
{"timestamp": "2025-10-21T16:53:36.958281", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-65"}}
{"timestamp": "2025-10-21T16:53:36.964813", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-66"}}
{"timestamp": "2025-10-21T16:53:36.975611", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-67"}}
{"timestamp": "2025-10-21T16:53:45.441142", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-69"}}
{"timestamp": "2025-10-21T16:53:45.448163", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70"}}
{"timestamp": "2025-10-21T16:53:45.457265", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-71"}}
{"timestamp": "2025-10-21T16:53:45.468351", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-72"}}
{"timestamp": "2025-10-21T16:53:45.475806", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-73"}}
{"timestamp": "2025-10-21T16:53:45.485552", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-74"}}
{"timestamp": "2025-10-21T16:54:22.265134", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:22.292175", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'create a d2 diagram for an iphone app', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:22.301998", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: create a d2 diagram for an iphone app", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:22.307233", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:22.310252", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:22.315337", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:22.321719", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Retrieved existing session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:22.361502", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:22.397367", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:22.431739", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:22.434746", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:22.439796", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:22.446213", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:22.452209", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:22.456207", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is follow-up message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:22.461212", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:22.467298", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:22.471300", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:22.477594", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:22.498070", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=False)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:22.501997", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Detected D2 diagram request, loading d2-architecture.md prompt", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:22.503083", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Auto-detected diagram request, using agent prompt: ---\ntitle: \"D2 Diagram Generation Expert (Reinforc...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:22.505059", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:22.506472", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:22.508144", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: False, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:22.510312", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:22.511844", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:22.516418", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:22.519407", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Injecting/updating system message with current context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:22.523444", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updated existing system message with current context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:22.525582", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:30.596224", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761083669-T39omX65lCnFdCDB3X6I\",\n  \"provider\": \"SiliconFlow\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761083669,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"Here's a D2 diagram for an iPhone app showing its core components and data flow:\\n\\n```d2\\n// iPhone App Architecture\\n\\n// Main App Container\\napp: {\\n  label: \\\"iPhone App\\\"\\n  style: filled\\n  color: \\\"#007AFF\\\"\\n  shape: rectangle\\n  icon: \\\"\\ud83d\\udcf1\\\"\\n}\\n\\n// UI Layer\\nui: {\\n  label: \\\"UI Layer\\\"\\n  style: filled\\n  color: \\\"#F5F5F7\\\"\\n  shape: rectangle\\n  icon: \\\"\\ud83d\\udcf1\\\"\\n  \\n  // Screens\\n  home_screen: {\\n    label: \\\"Home Screen\\\"\\n    style: filled\\n    color: \\\"#FFFFFF\\\"\\n    shape: rectangle\\n    icon: \\\"\\ud83c\\udfe0\\\"\\n  }\\n  \\n  profile_screen: {\\n    label: \\\"Profile Screen\\\"\\n    s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:30.598225", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 3399 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:30.599226", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: Here's a D2 diagram for an iPhone app showing its core components and data flow:\n\n```d2\n// iPhone App Architecture\n\n// Main App Container\napp: {\n  label: \"iPhone App\"\n  style: filled\n  color: \"#007AFF", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:30.601233", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 3399 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:30.602226", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 [D2 PROGRESS] Found 1 D2 diagram(s) - validating syntax...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:30.603243", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Validation attempt 1/8", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:30.607233", "level": "ERROR", "logger": "whysper.app.services.conversation_service", "message": "Error during D2 validation/fix: 'charmap' codec can't encode character '\\U0001f4f1' in position 150: character maps to <undefined>", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:30.608256", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 3399 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:30.609270", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No Mermaid diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:30.609270", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After Mermaid validation/fix: 3399 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:30.610783", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Using agent prompt for question: create a d2 diagram for an iphone app...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:30.612797", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt length: 5602 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:30.613797", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt preview: ---\ntitle: \"D2 Diagram Generation Expert (Reinforced)\"\ndescription: \"Generate D2 Diagrams\"\ncategory: [\"Code Review\", \"Software Development\", \"Quality Assurance\"]\nauthor: \"Eric M\"\ncreated: \"2025-09-27\"...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:30.614798", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Question contains diagram keywords", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:30.616798", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response preview: Here's a D2 diagram for an iPhone app showing its core components and data flow:\n\n```d2\n// iPhone App Architecture\n\n// Main App Container\napp: {\n  label: \"iPhone App\"\n  style: filled\n  color: \"#007AFF\"\n  shape: rectangle\n  icon: \"📱\"\n}\n\n// UI Layer\nui: {\n  label: \"UI Layer\"\n  style: filled\n  color: \"#F5F5F7\"\n  shape: rectangle\n  icon: \"📱\"\n  \n  // Screens\n  home_screen: {\n    label: \"Home Screen\"\n    style: filled\n    color: \"#FFFFFF\"\n    shape: rectangle\n    icon: \"🏠\"\n  }\n  \n  profile_screen: {\n ...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:30.618795", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response does NOT contain Mermaid code block", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:30.620800", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 8.142s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:30.621803", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:30.622797", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:30.829804", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 8.14s using 1969 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:30.832170", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:30.951616", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Loaded conversation history: C:\\Code2025\\Whysper\\history\\20251021-165313_9ac9b5bc-9a1b-4e97-88a7-2ceb2eebecf0.json", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:30.959112", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251021-165313_9ac9b5bc-9a1b-4e97-88a7-2ceb2eebecf0.json (4 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:30.960836", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (4 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:30.965872", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:30.985859", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43712, "thread_name": "AnyIO worker thread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T16:54:31.253025", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-82"}}
{"timestamp": "2025-10-21T16:54:31.261272", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-83"}}
{"timestamp": "2025-10-21T16:54:31.266293", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-84"}}
{"timestamp": "2025-10-21T16:54:31.273292", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-85"}}
{"timestamp": "2025-10-21T16:54:31.281682", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-86"}}
{"timestamp": "2025-10-21T16:54:31.293877", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-88"}}
{"timestamp": "2025-10-21T16:54:31.562982", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-92"}}
{"timestamp": "2025-10-21T16:54:31.640252", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-95"}}
{"timestamp": "2025-10-21T16:54:31.759573", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-96"}}
{"timestamp": "2025-10-21T16:54:31.893223", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-97"}}
{"timestamp": "2025-10-21T16:54:31.936286", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-98"}}
{"timestamp": "2025-10-21T16:54:31.948813", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 41744, "thread_name": "MainThread", "process": 7356, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-99"}}
{"timestamp": "2025-10-21T17:01:22.073486", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27796, "thread_name": "MainThread", "process": 41664, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:01:23.201872", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27796, "thread_name": "MainThread", "process": 41664, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:01:23.204890", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27796, "thread_name": "MainThread", "process": 41664, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-21T17:01:23.291656", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27796, "thread_name": "MainThread", "process": 41664, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-21T17:01:23.292660", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27796, "thread_name": "MainThread", "process": 41664, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:01:23.292660", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27796, "thread_name": "MainThread", "process": 41664, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:01:34.979295", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27796, "thread_name": "MainThread", "process": 41664, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:01:35.425677", "level": "INFO", "logger": "whysper.app.main", "message": "Static files directory: C:\\Code2025\\Whysper\\backend\\static", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27796, "thread_name": "MainThread", "process": 41664, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:01:44.922525", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:01:45.435292", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:01:45.436307", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-21T17:01:45.459360", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-21T17:01:45.460359", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:01:45.461362", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:01:53.889176", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:01:54.558987", "level": "INFO", "logger": "whysper.app.main", "message": "Static files directory: C:\\Code2025\\Whysper\\backend\\static", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:01:54.972600", "level": "INFO", "logger": "whysper.app.main", "message": "Starting Whysper Web2 Backend v2.0.0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T17:01:54.978620", "level": "INFO", "logger": "whysper.app.main", "message": "Server running on 0.0.0.0:8003", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T17:01:54.981004", "level": "INFO", "logger": "whysper.app.main", "message": "Debug mode: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T17:01:54.984145", "level": "INFO", "logger": "whysper.app.main", "message": "CORS origins: ['http://localhost:3000', 'http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:5176', 'http://localhost:5177', 'http://localhost:5178', 'http://127.0.0.1:3000', 'http://127.0.0.1:5173', 'http://127.0.0.1:5174', 'http://127.0.0.1:5175', 'http://127.0.0.1:5176', 'http://127.0.0.1:5177']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T17:01:54.986665", "level": "INFO", "logger": "whysper.app.main", "message": "Real-time log broadcasting enabled - connect to GET /api/v1/logs/stream", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T17:01:54.998222", "level": "INFO", "logger": "whysper.app.main", "message": "FastMCP server integration initialized", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T17:01:55.000609", "level": "INFO", "logger": "whysper.app.main", "message": "MCP endpoints available at /mcp/*", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T17:01:55.003634", "level": "INFO", "logger": "whysper.app.main", "message": "MCP tools: generate_diagram, render_diagram, generate_and_render", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T17:01:55.009656", "level": "INFO", "logger": "whysper.app.main", "message": "MCP WebSocket endpoint: /mcp/ws", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T17:01:55.136396", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-4"}}
{"timestamp": "2025-10-21T17:02:15.261851", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 Log stream client disconnected (cancelled, session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap"}}
{"timestamp": "2025-10-21T17:02:27.527559", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-14"}}
{"timestamp": "2025-10-21T17:02:27.537505", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35832, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:27.537505", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:27.542172", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35832, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:27.545660", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:27.762290", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:27.770346", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35832, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:27.789460", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:27.809912", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35832, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:29.404830", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35832, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:29.406250", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:29.409425", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35832, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:29.421790", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:35.563958", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_agent_prompt endpoint called for file: d2-architecture.md", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:35.566288", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Successfully retrieved agent prompt 'd2-architecture.md' with 5602 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:58.844987", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:58.845982", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'Create a mermaid diagram of a web application', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:58.846983", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: Create a mermaid diagram of a web application", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:58.847999", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:58.848983", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:58.850005", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:58.856987", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Creating new conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:58.859464", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Creating conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:58.861701", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-21T17:02:58.905122", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-21T17:02:58.912117", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:58.927213", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initializing conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:58.931750", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Set default model: qwen/qwen3-coder-30b-a3b-instruct", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:58.934747", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initialized session logger for: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:58.944821", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Created new conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:58.948264", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Conversation session conv-1 initialized successfully", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:58.950269", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Setting API key for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:58.951499", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "API key updated for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:58.952519", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Session created", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:58.956208", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:58.957204", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:58.959490", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:58.964018", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:58.965245", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:58.967271", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:58.973609", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:58.979053", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is first message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:58.983626", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "First question has no file context in session conv-1 - proceeding without code context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:58.986213", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:58.992432", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:58.994435", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:58.996430", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:58.999431", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=True)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:59.002862", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Detected Mermaid diagram request, loading mermaid-architecture.md prompt", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:59.008338", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Auto-detected diagram request, using agent prompt: ---\ntitle: \"Mermaid Diagram Generation Expert (Rei...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:59.018699", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:59.019701", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:59.021719", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: True, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:59.024725", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:59.032204", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:59.040742", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "⚠️ First message but NO SELECTED FILES", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:59.051124", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:59.060463", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Injecting/updating system message with current context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:59.075480", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Inserted new system message with current context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:02:59.089322", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:03:05.146173", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761084187-v8UTTPBoji15ZHgWgOuT\",\n  \"provider\": \"DeepInfra\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761084187,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"Here's a Mermaid diagram representing a typical web application architecture:\\n\\n```mermaid\\ngraph TD\\n    A[User] --> B[Client-Side (Browser)]\\n    B --> C[Web Server]\\n    C --> D[Application Server]\\n    D --> E[Database]\\n    D --> F[External APIs]\\n    C --> G[Load Balancer]\\n    G --> H[Web Server Cluster]\\n    H --> D\\n    D --> I[Cache Layer]\\n    I --> E\\n    F --> D\\n\\n    style A fill:#ffe4b5,stroke:#333\\n    style B fill:#add8e6,stroke:#333\\n    style C fill:#90ee90,stroke:#333\\n    style D fill:#ffa500,stroke:#333\\n    style E fill:#ff6347,stroke:#333\\n    style F fill:#9370db,stroke:#333\\n    style ", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:03:05.148057", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 2136 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:03:05.149074", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: Here's a Mermaid diagram representing a typical web application architecture:\n\n```mermaid\ngraph TD\n    A[User] --> B[Client-Side (Browser)]\n    B --> C[Web Server]\n    C --> D[Application Server]\n    ", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:03:05.150337", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 2136 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:03:05.154871", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No D2 diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:03:05.156790", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 2136 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:03:05.159326", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 [MERMAID PROGRESS] Found 1 Mermaid diagram(s) - validating syntax...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:03:05.161323", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "[MERMAID PROGRESS] Validation attempt 1/5", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:03:52.532247", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "[MERMAID PROGRESS] Diagram #1 validation failed: Mermaid validation timed out (10s limit)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:03:52.540614", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔧 [MERMAID PROGRESS] Validation errors found - requesting AI auto-fix (attempt 1/5)...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:03:53.344283", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761084239-U6Mz1WOK1RioUKHZACTq\",\n  \"provider\": \"DeepInfra\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761084239,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```mermaid\\nflowchart TD\\n    A[\\\"Start Process\\\"] --> B[\\\"Process Data\\\"]\\n    B --> C[\\\"End Process\\\"]\\n```\",\n        \"refusal\": null,\n        \"reasoning\": null\n      }\n    }\n  ],\n  \"usage\": {\n    \"prompt_tokens\": 168,\n    \"completion_tokens\": 29,\n    \"total_tokens\": 197,\n    \"prompt_tokens_details\": null\n  }\n}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:03:53.346295", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 99 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:03:53.348296", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```mermaid\nflowchart TD\n    A[\"Start Process\"] --> B[\"Process Data\"]\n    B --> C[\"End Process\"]\n```", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:03:53.349296", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [MERMAID PROGRESS] Received corrected Mermaid code (99 chars) - re-validating...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:03:53.350814", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "⚠️  Corrected response may be TRUNCATED! Model: qwen/qwen3-coder-30b-a3b-instruct", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:03:53.350814", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "⚠️  Try switching to a model that doesn't truncate", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:03:53.352829", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "[MERMAID PROGRESS] Validation attempt 2/5", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:02.321143", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [MERMAID PROGRESS] All Mermaid diagrams validated successfully!", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:02.326910", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After Mermaid validation/fix: 99 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:02.346529", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Using agent prompt for question: Create a mermaid diagram of a web application...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:02.359546", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt length: 7435 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:02.366750", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt preview: ---\ntitle: \"Mermaid Diagram Generation Expert (Reinforced)\"\ndescription: \"Generate Mermaid Diagrams\"\ncategory: [\"Code Review\", \"Software Development\", \"Quality Assurance\"]\nauthor: \"Eric M\"\ncreated: \"2...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:02.373885", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Question contains diagram keywords", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:02.383498", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response preview: ```mermaid\nflowchart TD\n    A[\"Start Process\"] --> B[\"Process Data\"]\n    B --> C[\"End Process\"]\n```...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:02.393731", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response contains Mermaid code block", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:02.397540", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 63.401s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:02.401561", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:02.403558", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:02.674023", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 63.40s using 197 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:02.678113", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:02.684247", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "Created new GUID c6883771-4b73-44ae-b68c-38d469c2dfc5 for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:02.688113", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "No history file found for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:02.693483", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251021-170402_c6883771-4b73-44ae-b68c-38d469c2dfc5.json (2 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:02.696689", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (2 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:02.702011", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:02.761281", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:03.467724", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-34"}}
{"timestamp": "2025-10-21T17:04:03.500148", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-35"}}
{"timestamp": "2025-10-21T17:04:03.523346", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-36"}}
{"timestamp": "2025-10-21T17:04:03.575630", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-37"}}
{"timestamp": "2025-10-21T17:04:03.698112", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-41"}}
{"timestamp": "2025-10-21T17:04:03.709596", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-42"}}
{"timestamp": "2025-10-21T17:04:03.745754", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-43"}}
{"timestamp": "2025-10-21T17:04:03.760769", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-44"}}
{"timestamp": "2025-10-21T17:04:03.768583", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-45"}}
{"timestamp": "2025-10-21T17:04:03.784002", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-46"}}
{"timestamp": "2025-10-21T17:04:03.802624", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-47"}}
{"timestamp": "2025-10-21T17:04:03.878939", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🎨 Rendering MERMAID diagram...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-48"}}
{"timestamp": "2025-10-21T17:04:03.926270", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-49"}}
{"timestamp": "2025-10-21T17:04:03.941927", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-50"}}
{"timestamp": "2025-10-21T17:04:03.954286", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-51"}}
{"timestamp": "2025-10-21T17:04:03.978052", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-52"}}
{"timestamp": "2025-10-21T17:04:03.996707", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-53"}}
{"timestamp": "2025-10-21T17:04:04.006022", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-54"}}
{"timestamp": "2025-10-21T17:04:04.018913", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-55"}}
{"timestamp": "2025-10-21T17:04:04.035044", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: MERMAID", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-56"}}
{"timestamp": "2025-10-21T17:04:04.495188", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-57"}}
{"timestamp": "2025-10-21T17:04:04.635021", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-58"}}
{"timestamp": "2025-10-21T17:04:04.792484", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-59"}}
{"timestamp": "2025-10-21T17:04:04.963829", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "✅ Successfully rendered MERMAID diagram", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-60"}}
{"timestamp": "2025-10-21T17:04:32.171234", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:32.172594", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'Create a D2 Diagram of a Iphone App', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:32.173620", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: Create a D2 Diagram of a Iphone App", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:32.175092", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:32.176154", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:32.177165", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:32.180814", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Retrieved existing session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:32.182838", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:32.184830", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:32.185832", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:32.186836", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:32.187913", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:32.188930", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:32.191132", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:32.192325", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is follow-up message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:32.193364", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:32.194860", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:32.196872", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:32.198498", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:32.202700", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=False)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:32.204697", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Detected D2 diagram request, loading d2-architecture.md prompt", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:32.206698", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Auto-detected diagram request, using agent prompt: ---\ntitle: \"D2 Diagram Generation Expert (Reinforc...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:32.208713", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:32.209701", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:32.210701", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: False, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:32.215060", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:32.216061", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:32.218059", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:32.222689", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Injecting/updating system message with current context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:32.225711", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updated existing system message with current context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:32.226711", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:34.415245", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761084278-yNkpW3XzQZUL0k1bV3DZ\",\n  \"provider\": \"Nebius\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761084278,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```d2\\n// iPhone App Architecture Diagram\\n\\n// UI Layer\\nUI[User Interface]\\nHomeScreen[Home Screen]\\nProfileScreen[Profile Screen]\\nSettingsScreen[Settings Screen]\\n\\n// Business Logic Layer\\nAuthManager[Authentication Manager]\\nDataManager[Data Manager]\\nNotificationManager[Notification Manager]\\n\\n// Data Layer\\nLocalDB[Local Database]\\nCloudAPI[Cloud API]\\nCache[Cache Layer]\\n\\n// Services\\nPushService[Push Notifications]\\nAnalyticsService[Analytics]\\nPaymentService[Payment Processing]\\n\\n// External Services\\nPaymentGateway[Payment Gateway]\\nSocialMedia[Social Media APIs]\\nMapsService[Maps Service]\\n\\n// Conne", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:34.417246", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 1108 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:34.419659", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```d2\n// iPhone App Architecture Diagram\n\n// UI Layer\nUI[User Interface]\nHomeScreen[Home Screen]\nProfileScreen[Profile Screen]\nSettingsScreen[Settings Screen]\n\n// Business Logic Layer\nAuthManager[Auth", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:34.420894", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 1108 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:34.422910", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 [D2 PROGRESS] Found 1 D2 diagram(s) - validating syntax...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:34.706587", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Validation attempt 1/8", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:34.994955", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "D2 diagram #1 validation failed: debug: using theme Neutral Default (ID: 0)\nerr: failed to compile ..\\..\\..\\Users\\Hack\\AppData\\Local\\Temp\\tmp7qxnwcle.d2: C:\\Users\\Hack\\AppData\\Local\\Temp\\tmp7qxnwcle.d2:4:3: unexpected text after map ", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:34.995952", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔧 [D2 PROGRESS] Validation errors found - requesting AI auto-fix (attempt 1/8)...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:36.859999", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761084281-BnvqFsdnkIvwR09V8b0N\",\n  \"provider\": \"DeepInfra\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761084281,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```d2\\n// Web Application Architecture\\n\\\"Frontend Web App\\\" {\\n  shape: rectangle\\n  style: filled\\n  fill: \\\"#4A90E2\\\"\\n  color: \\\"#FFFFFF\\\"\\n}\\n\\n\\\"Backend API\\\" {\\n  shape: rectangle\\n  style: filled\\n  fill: \\\"#50C878\\\"\\n  color: \\\"#FFFFFF\\\"\\n}\\n\\n\\\"Database\\\" {\\n  shape: cylinder\\n  style: filled\\n  fill: \\\"#FF6B6B\\\"\\n  color: \\\"#FFFFFF\\\"\\n}\\n\\n\\\"User\\\" {\\n  shape: person\\n  style: filled\\n  fill: \\\"#FFD93D\\\"\\n  color: \\\"#000000\\\"\\n}\\n\\n\\\"Cloud Service\\\" {\\n  shape: cloud\\n  style: filled\\n  fill: \\\"#B19CD9\\\"\\n  color: \\\"#000000\\\"\\n}\\n\\n// Connections\\nUser --> \\\"Frontend Web App\\\"\\n\\\"Frontend Web App\\\" -->", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:36.861001", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 628 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:36.862510", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```d2\n// Web Application Architecture\n\"Frontend Web App\" {\n  shape: rectangle\n  style: filled\n  fill: \"#4A90E2\"\n  color: \"#FFFFFF\"\n}\n\n\"Backend API\" {\n  shape: rectangle\n  style: filled\n  fill: \"#50C87", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:36.863523", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [D2 PROGRESS] Received corrected D2 code (628 chars) - re-validating...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:36.864527", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Validation attempt 2/8", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:37.111155", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "D2 diagram #1 validation failed: debug: using theme Neutral Default (ID: 0)\nerr: failed to compile ..\\..\\..\\Users\\Hack\\AppData\\Local\\Temp\\tmp_pbhcmj8.d2: C:\\Users\\Hack\\AppData\\Local\\Temp\\tmp_pbhcmj8.d2:4:3: \"style\" expected to be set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:37.113145", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔧 [D2 PROGRESS] Validation errors found - requesting AI auto-fix (attempt 2/8)...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:38.675771", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761084283-TDaDSqpwbUaroLfnbXfv\",\n  \"provider\": \"DeepInfra\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761084283,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"```d2\\n// Web Application Architecture\\n\\\"User\\\" {\\n  shape: person\\n}\\n\\n\\\"Web Browser\\\" {\\n  shape: rectangle\\n  style.fill: \\\"#e1f5fe\\\"\\n}\\n\\n\\\"Frontend Server\\\" {\\n  shape: rectangle\\n  style.fill: \\\"#f3e5f5\\\"\\n}\\n\\n\\\"API Gateway\\\" {\\n  shape: rectangle\\n  style.fill: \\\"#e8f5e9\\\"\\n}\\n\\n\\\"Database\\\" {\\n  shape: cylinder\\n  style.fill: \\\"#ffebee\\\"\\n}\\n\\n\\\"Cloud Service\\\" {\\n  shape: cloud\\n  style.fill: \\\"#fff3e0\\\"\\n}\\n\\n// Connections\\n\\\"User\\\" --> \\\"Web Browser\\\"\\n\\\"Web Browser\\\" --> \\\"Frontend Server\\\"\\n\\\"Frontend Server\\\" --> \\\"API Gateway\\\"\\n\\\"API Gateway\\\" --> \\\"Database\\\"\\n\\\"API Gateway\\\" --> \\\"Cloud Ser", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:38.679141", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 552 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:38.681145", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: ```d2\n// Web Application Architecture\n\"User\" {\n  shape: person\n}\n\n\"Web Browser\" {\n  shape: rectangle\n  style.fill: \"#e1f5fe\"\n}\n\n\"Frontend Server\" {\n  shape: rectangle\n  style.fill: \"#f3e5f5\"\n}\n\n\"API G", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:38.685338", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [D2 PROGRESS] Received corrected D2 code (552 chars) - re-validating...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:38.686326", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Validation attempt 3/8", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:40.385863", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [D2 PROGRESS] All D2 diagrams validated successfully!", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:40.387447", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [D2 PROGRESS] Rendering diagrams to SVG...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:40.390911", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Pre-rendering D2 diagram #1 (543 chars)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:41.219534", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Saved D2 diagram to: backend\\static\\d2_diagrams\\d2_diagram_20251021_170441_6666cbfa.svg", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:41.220890", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "D2 diagrams pre-rendered successfully", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:41.224904", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ [D2 PROGRESS] D2 diagrams rendered and ready for display!", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:41.226903", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 18502 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:41.228909", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No Mermaid diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:41.229907", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After Mermaid validation/fix: 18502 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:41.230904", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Using agent prompt for question: Create a D2 Diagram of a Iphone App...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:41.233918", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt length: 5602 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:41.235919", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt preview: ---\ntitle: \"D2 Diagram Generation Expert (Reinforced)\"\ndescription: \"Generate D2 Diagrams\"\ncategory: [\"Code Review\", \"Software Development\", \"Quality Assurance\"]\nauthor: \"Eric M\"\ncreated: \"2025-09-27\"...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:41.238979", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Question contains diagram keywords", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:41.240979", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response preview: <div class=\"d2-diagram-container\" style=\"margin: 16px 0;\">\n<div style=\"display: inline-flex; align-items: center; gap: 6px; padding: 6px 12px; background: linear-gradient(135deg, #10b981 0%, #059669 100%); border-radius: 6px; margin-bottom: 12px; font-size: 12px; font-weight: 500; color: white;\">\n  <span style=\"font-size: 14px;\">✅</span>\n  <span>D2 Diagram Rendered Successfully</span>\n</div>\n  <div class=\"d2-rendered-diagram\">\n    <?xml version=\"1.0\" encoding=\"utf-8\"?><svg xmlns=\"http://www.w3.o...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:41.247868", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] AI response does NOT contain Mermaid code block", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:41.249448", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 9.051s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:41.253816", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:41.255343", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:41.269856", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 9.05s using 785 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:41.272860", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:41.315324", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Loaded conversation history: C:\\Code2025\\Whysper\\history\\20251021-170402_c6883771-4b73-44ae-b68c-38d469c2dfc5.json", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:41.321349", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251021-170402_c6883771-4b73-44ae-b68c-38d469c2dfc5.json (4 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:41.328739", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (4 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:41.334999", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:41.370721", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43292, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:04:41.592466", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-70"}}
{"timestamp": "2025-10-21T17:04:41.597712", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-71"}}
{"timestamp": "2025-10-21T17:04:45.435869", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-76"}}
{"timestamp": "2025-10-21T17:04:45.447334", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-77"}}
{"timestamp": "2025-10-21T17:05:07.737930", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-82"}}
{"timestamp": "2025-10-21T17:05:07.750576", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.diagram_events", "message": "🔍 Diagram detected: D2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-83"}}
{"timestamp": "2025-10-21T17:05:20.229036", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "clear_conversation endpoint called for: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5180, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:05:20.266211", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Clearing conversation for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5180, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:05:20.300693", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Conversation cleared", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5180, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:05:20.302734", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Conversation cleared for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5180, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:05:20.315032", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Conversation cleared for session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5180, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:02.709943", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:02.720664", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'what is base_ai.py do?', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:02.722363", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: what is base_ai.py do?", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:02.726396", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:02.740394", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:02.742412", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:02.745839", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Retrieved existing session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:02.752860", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:02.755861", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:02.757862", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:02.760561", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:02.761578", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:02.762576", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:02.769578", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:02.779389", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is first message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:02.786561", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "First question has no file context in session conv-1 - proceeding without code context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:02.797317", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:02.818596", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:02.828595", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:02.831110", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:02.843220", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=True)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:02.845219", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:02.846218", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:02.850215", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: True, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:02.866615", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:02.873635", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:02.876638", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "⚠️ First message but NO SELECTED FILES", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:02.883174", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:02.887166", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Injecting/updating system message with current context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:02.896554", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Inserted new system message with current context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:02.898574", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:04.711747", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761084369-Wt7OEoPwhxQfmCzTZLLx\",\n  \"provider\": \"SiliconFlow\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761084369,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"I don't see any code provided in your message. You've asked about `base_ai.py` but haven't included the actual code content to analyze.\\n\\nCould you please share the contents of the `base_ai.py` file? Once you provide the code, I'll be happy to explain what it does, including:\\n\\n- What the file is designed to accomplish\\n- The main classes or functions it contains\\n- The AI concepts or patterns it implements\\n- How it might be used in a larger system\\n\\nPlease paste the code and I'll give you a detailed analysis of its functionality.\",\n        \"refusal\": null,\n        \"reasoning\": null\n      }\n    }\n  ],\n  \"sy", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:04.714176", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 531 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:04.715655", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: I don't see any code provided in your message. You've asked about `base_ai.py` but haven't included the actual code content to analyze.\n\nCould you please share the contents of the `base_ai.py` file? O", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:04.718339", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 531 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:04.719360", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No D2 diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:04.720637", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 531 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:04.721656", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No Mermaid diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:04.722661", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After Mermaid validation/fix: 531 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:04.724659", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] No agent prompt provided for question: what is base_ai.py do?...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:04.727047", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 1.896s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:04.729049", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:04.730562", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:04.785118", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 1.90s using 159 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:04.787119", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:04.840401", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Loaded conversation history: C:\\Code2025\\Whysper\\history\\20251021-170402_c6883771-4b73-44ae-b68c-38d469c2dfc5.json", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:04.851538", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251021-170402_c6883771-4b73-44ae-b68c-38d469c2dfc5.json (6 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:04.852551", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (6 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:04.854537", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:06:04.888139", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:14:50.740958", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 Log stream client disconnected (cancelled, session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap"}}
{"timestamp": "2025-10-21T17:14:50.746263", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-108"}}
{"timestamp": "2025-10-21T17:14:51.058110", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:14:51.065662", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:14:51.101654", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:14:51.129570", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:14:51.155281", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:14:51.170640", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:14:51.250678", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:14:51.264795", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:14:51.283396", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:14:51.290093", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:14:51.407217", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:14:51.410876", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:15:04.448703", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 Log stream client disconnected (cancelled, session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap"}}
{"timestamp": "2025-10-21T17:15:04.456216", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8728, "thread_name": "MainThread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-123"}}
{"timestamp": "2025-10-21T17:15:04.465736", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:15:04.469070", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:15:04.480269", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:15:04.484271", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:15:04.599409", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:15:04.671983", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:15:04.729174", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:15:04.770262", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40516, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:15:04.848469", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31332, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:15:04.865230", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31332, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:15:04.900443", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31332, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:15:04.919064", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31332, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:15:25.186056", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31332, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:15:25.189056", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31332, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:15:25.204345", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31332, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:15:25.224399", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31332, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:15:25.354389", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31332, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:15:25.358781", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31332, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:15:52.022690", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31332, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:15:52.026975", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31332, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:15:52.056016", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31332, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:15:52.081824", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31332, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:15:52.177060", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31332, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:15:52.180071", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 31332, "thread_name": "AnyIO worker thread", "process": 32268, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:25:10.730960", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37228, "thread_name": "MainThread", "process": 4640, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:25:11.194562", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37228, "thread_name": "MainThread", "process": 4640, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:25:11.196573", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37228, "thread_name": "MainThread", "process": 4640, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-21T17:25:11.240600", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37228, "thread_name": "MainThread", "process": 4640, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-21T17:25:11.242002", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37228, "thread_name": "MainThread", "process": 4640, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:25:11.243050", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37228, "thread_name": "MainThread", "process": 4640, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:25:19.510233", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37228, "thread_name": "MainThread", "process": 4640, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:25:20.035967", "level": "INFO", "logger": "whysper.app.main", "message": "Static files directory: C:\\Code2025\\Whysper\\backend\\static", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37228, "thread_name": "MainThread", "process": 4640, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:25:33.979921", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43824, "thread_name": "MainThread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:25:35.115118", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43824, "thread_name": "MainThread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:25:35.116117", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43824, "thread_name": "MainThread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-21T17:25:35.142788", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43824, "thread_name": "MainThread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-21T17:25:35.144022", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43824, "thread_name": "MainThread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:25:35.145476", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43824, "thread_name": "MainThread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:25:43.042883", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43824, "thread_name": "MainThread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:25:43.387799", "level": "INFO", "logger": "whysper.app.main", "message": "Static files directory: C:\\Code2025\\Whysper\\backend\\static", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43824, "thread_name": "MainThread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:25:43.691639", "level": "INFO", "logger": "whysper.app.main", "message": "Starting Whysper Web2 Backend v2.0.0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43824, "thread_name": "MainThread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T17:25:43.693653", "level": "INFO", "logger": "whysper.app.main", "message": "Server running on 0.0.0.0:8003", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43824, "thread_name": "MainThread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T17:25:43.694663", "level": "INFO", "logger": "whysper.app.main", "message": "Debug mode: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43824, "thread_name": "MainThread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T17:25:43.695651", "level": "INFO", "logger": "whysper.app.main", "message": "CORS origins: ['http://localhost:3000', 'http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:5176', 'http://localhost:5177', 'http://localhost:5178', 'http://127.0.0.1:3000', 'http://127.0.0.1:5173', 'http://127.0.0.1:5174', 'http://127.0.0.1:5175', 'http://127.0.0.1:5176', 'http://127.0.0.1:5177']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43824, "thread_name": "MainThread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T17:25:43.697671", "level": "INFO", "logger": "whysper.app.main", "message": "Real-time log broadcasting enabled - connect to GET /api/v1/logs/stream", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43824, "thread_name": "MainThread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T17:25:43.698653", "level": "INFO", "logger": "whysper.app.main", "message": "FastMCP server integration initialized", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43824, "thread_name": "MainThread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T17:25:43.699654", "level": "INFO", "logger": "whysper.app.main", "message": "MCP endpoints available at /mcp/*", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43824, "thread_name": "MainThread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T17:25:43.700652", "level": "INFO", "logger": "whysper.app.main", "message": "MCP tools: generate_diagram, render_diagram, generate_and_render", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43824, "thread_name": "MainThread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T17:25:43.701653", "level": "INFO", "logger": "whysper.app.main", "message": "MCP WebSocket endpoint: /mcp/ws", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43824, "thread_name": "MainThread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T17:26:06.603933", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43824, "thread_name": "MainThread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-14"}}
{"timestamp": "2025-10-21T17:26:06.603933", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8756, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:26:06.613086", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:26:06.617396", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8756, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:26:06.619974", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:26:06.913336", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:26:06.914472", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8756, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:26:06.974407", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8756, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:26:07.147006", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8756, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:26:07.152868", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 8756, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:26:07.180206", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:26:07.348256", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:26:07.354255", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.161196", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.163201", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'what is the code doing', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.166708", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: what is the code doing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.169722", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.172224", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.173222", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.179751", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Creating new conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.181310", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Creating conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.183563", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-21T17:27:01.228963", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-21T17:27:01.241605", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.254255", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initializing conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.259369", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Set default model: qwen/qwen3-coder-30b-a3b-instruct", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.261370", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initialized session logger for: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.262372", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Created new conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.266906", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Conversation session conv-1 initialized successfully", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.269908", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Setting API key for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.273220", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "API key updated for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.275240", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Session created", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.278241", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.280237", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.282238", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.284236", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.285640", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.287663", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.288661", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.293819", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is first message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.294815", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "First question has no file context in session conv-1 - proceeding without code context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.296816", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.297827", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.299823", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.302866", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.305866", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=True)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.308120", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.313125", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.315567", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: True, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.317721", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.321740", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.324739", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "⚠️ First message but NO SELECTED FILES", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.326254", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.328268", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Injecting/updating system message with current context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.332518", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Inserted new system message with current context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:01.333519", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:02.680005", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761085628-NutgBAfgbI3ULe38UBFE\",\n  \"provider\": \"Nebius\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761085628,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"I'd be happy to help you understand what the code is doing! However, I don't see any code provided in your message. Could you please share the code you'd like me to analyze?\\n\\nOnce you provide the code, I can help explain:\\n- What the code does overall\\n- How it works step by step\\n- Key functions or methods\\n- Any important logic or algorithms\\n- Potential use cases or applications\\n\\nPlease paste the code and I'll give you a detailed explanation.\",\n        \"refusal\": null,\n        \"reasoning\": null\n      }\n    }\n  ],\n  \"usage\": {\n    \"prompt_tokens\": 39,\n    \"completion_tokens\": 100,\n    \"total_tokens\": 139\n  }\n}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:02.683281", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 444 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:02.684285", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: I'd be happy to help you understand what the code is doing! However, I don't see any code provided in your message. Could you please share the code you'd like me to analyze?\n\nOnce you provide the code", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:02.686282", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 444 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:02.692431", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No D2 diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:02.693451", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 444 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:02.696543", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No Mermaid diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:02.697546", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After Mermaid validation/fix: 444 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:02.699544", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] No agent prompt provided for question: what is the code doing...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:02.703442", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 1.401s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:02.704861", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:02.709326", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:02.767864", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 1.40s using 139 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:02.771248", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:02.774255", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "Created new GUID f3e6549e-024b-4271-966e-76352a2d3dd4 for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:02.778248", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "No history file found for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:02.783265", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251021-172702_f3e6549e-024b-4271-966e-76352a2d3dd4.json (2 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:02.787266", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (2 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:02.790266", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:27:02.837897", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:31:01.197895", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 Log stream client disconnected (cancelled, session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43824, "thread_name": "MainThread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap"}}
{"timestamp": "2025-10-21T17:31:01.211257", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43824, "thread_name": "MainThread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-39"}}
{"timestamp": "2025-10-21T17:31:01.515993", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:31:01.520432", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:31:01.543052", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:31:01.549173", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:31:01.572093", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:31:01.596142", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:31:01.690151", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:31:01.693356", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32560, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:31:01.699164", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 32560, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:31:01.716969", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:31:01.823786", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:31:01.826856", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:31:12.770559", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 Log stream client disconnected (cancelled, session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43824, "thread_name": "MainThread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap"}}
{"timestamp": "2025-10-21T17:31:12.867607", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43824, "thread_name": "MainThread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-51"}}
{"timestamp": "2025-10-21T17:31:13.103164", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:31:13.114530", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:31:13.175740", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:31:13.184828", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:31:13.243335", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:31:13.275661", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:31:13.352798", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:31:13.358798", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 220, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:31:13.366800", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 220, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:31:13.384801", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:31:13.450054", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:31:13.453069", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:22.851955", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:22.854445", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'what ai.py', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:22.856467", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: what ai.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:22.857470", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:22.859482", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:22.861997", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:22.865649", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Retrieved existing session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:22.866663", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:22.868651", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:22.869980", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:22.872542", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:22.873562", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:22.876012", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:22.878009", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:22.884016", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is follow-up message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:22.890031", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:22.891032", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:22.895341", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:22.898369", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:22.904250", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=False)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:22.907247", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:22.909250", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:22.911250", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: False, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:22.914435", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:22.917691", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:22.919692", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:22.925956", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Injecting/updating system message with current context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:22.927099", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updated existing system message with current context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:22.929436", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:24.498768", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761086369-kL2Q8eHVZGIbmumRx0DG\",\n  \"provider\": \"DeepInfra\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761086369,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"I don't see any code in your message. You've only mentioned \\\"what ai.py\\\" but haven't provided the actual code content.\\n\\nCould you please share the contents of the `ai.py` file? Once you provide the code, I can explain:\\n\\n- What the code does\\n- How it works\\n- What AI concepts or techniques it implements\\n- Any specific functions or classes it contains\\n- How it might be used\\n\\nPlease paste the actual code from your `ai.py` file and I'll be happy to analyze it for you!\",\n        \"refusal\": null,\n        \"reasoning\": null\n      }\n    }\n  ],\n  \"usage\": {\n    \"prompt_tokens\": 125,\n    \"completion_tokens\": 111,", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:24.501781", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 467 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:24.501781", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: I don't see any code in your message. You've only mentioned \"what ai.py\" but haven't provided the actual code content.\n\nCould you please share the contents of the `ai.py` file? Once you provide the co", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:24.503645", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 467 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:24.504659", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No D2 diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:24.505661", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 467 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:24.508029", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No Mermaid diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:24.510047", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After Mermaid validation/fix: 467 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:24.511047", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] No agent prompt provided for question: what ai.py...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:24.513047", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 1.614s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:24.514049", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:24.515048", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:24.600718", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 1.61s using 236 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:24.604719", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:24.663110", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Loaded conversation history: C:\\Code2025\\Whysper\\history\\20251021-172702_f3e6549e-024b-4271-966e-76352a2d3dd4.json", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:24.669110", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251021-172702_f3e6549e-024b-4271-966e-76352a2d3dd4.json (4 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:24.672107", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (4 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:24.675650", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:39:24.710660", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:40:36.381827", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 Log stream client disconnected (cancelled, session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43824, "thread_name": "MainThread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap"}}
{"timestamp": "2025-10-21T17:40:39.064244", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:40:39.069967", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:40:39.091868", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:40:39.103553", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:40:39.348768", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43824, "thread_name": "MainThread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-88"}}
{"timestamp": "2025-10-21T17:40:39.451223", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:40:39.473535", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:40:39.505468", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:40:39.570364", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:40:39.745708", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:40:39.750712", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:40:39.782116", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:40:39.789250", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42668, "thread_name": "AnyIO worker thread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:45:36.589957", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 Log stream client disconnected (cancelled, session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43824, "thread_name": "MainThread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap"}}
{"timestamp": "2025-10-21T17:45:36.690248", "level": "INFO", "logger": "whysper.app.main", "message": "Shutting down Whysper Web2 Backend", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 43824, "thread_name": "MainThread", "process": 17496, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T17:45:53.931043", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5884, "thread_name": "MainThread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:45:54.694871", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5884, "thread_name": "MainThread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:45:54.699274", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5884, "thread_name": "MainThread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-21T17:45:54.752129", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5884, "thread_name": "MainThread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-21T17:45:54.756126", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5884, "thread_name": "MainThread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:45:54.761593", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5884, "thread_name": "MainThread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:46:05.367563", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5884, "thread_name": "MainThread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:46:05.866012", "level": "INFO", "logger": "whysper.app.main", "message": "Static files directory: C:\\Code2025\\Whysper\\backend\\static", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5884, "thread_name": "MainThread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:46:06.338644", "level": "INFO", "logger": "whysper.app.main", "message": "Starting Whysper Web2 Backend v2.0.0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5884, "thread_name": "MainThread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T17:46:06.341152", "level": "INFO", "logger": "whysper.app.main", "message": "Server running on 0.0.0.0:8003", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5884, "thread_name": "MainThread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T17:46:06.343678", "level": "INFO", "logger": "whysper.app.main", "message": "Debug mode: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5884, "thread_name": "MainThread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T17:46:06.345782", "level": "INFO", "logger": "whysper.app.main", "message": "CORS origins: ['http://localhost:3000', 'http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:5176', 'http://localhost:5177', 'http://localhost:5178', 'http://127.0.0.1:3000', 'http://127.0.0.1:5173', 'http://127.0.0.1:5174', 'http://127.0.0.1:5175', 'http://127.0.0.1:5176', 'http://127.0.0.1:5177']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5884, "thread_name": "MainThread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T17:46:06.350251", "level": "INFO", "logger": "whysper.app.main", "message": "Real-time log broadcasting enabled - connect to GET /api/v1/logs/stream", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5884, "thread_name": "MainThread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T17:46:06.352311", "level": "INFO", "logger": "whysper.app.main", "message": "FastMCP server integration initialized", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5884, "thread_name": "MainThread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T17:46:06.353308", "level": "INFO", "logger": "whysper.app.main", "message": "MCP endpoints available at /mcp/*", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5884, "thread_name": "MainThread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T17:46:06.354820", "level": "INFO", "logger": "whysper.app.main", "message": "MCP tools: generate_diagram, render_diagram, generate_and_render", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5884, "thread_name": "MainThread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T17:46:06.357066", "level": "INFO", "logger": "whysper.app.main", "message": "MCP WebSocket endpoint: /mcp/ws", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5884, "thread_name": "MainThread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T17:46:06.425166", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5884, "thread_name": "MainThread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-12"}}
{"timestamp": "2025-10-21T17:46:06.455863", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 18236, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:46:06.475657", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27016, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:46:06.478046", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 18236, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:46:06.480639", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27016, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:46:06.507670", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 18236, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:46:06.508880", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27016, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:46:06.512412", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 18236, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:46:06.515942", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27016, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:46:06.534942", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27016, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:46:06.554793", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27016, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:46:06.678438", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 18236, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:46:06.679460", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27016, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:46:06.683246", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 18236, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:46:06.704222", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27016, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:46:06.812948", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27016, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:46:06.816948", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27016, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:46:23.941930", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27016, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:46:23.943924", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27016, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:46:23.958720", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27016, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:46:23.977853", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27016, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:46:24.163216", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27016, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:46:24.249182", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27016, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:46:46.601221", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27016, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:46:46.604218", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27016, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:46:46.619049", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27016, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:46:46.636287", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27016, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:46:46.733382", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27016, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:46:46.737451", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27016, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:46:46.886825", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "get_conversation_files endpoint called for: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27016, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:46:46.894575", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Conversation session not found: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27016, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:48:37.362514", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 Log stream client disconnected (cancelled, session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5884, "thread_name": "MainThread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap"}}
{"timestamp": "2025-10-21T17:48:40.661661", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5884, "thread_name": "MainThread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-42"}}
{"timestamp": "2025-10-21T17:48:40.661661", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:48:40.671413", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:48:40.689829", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:48:40.697193", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:48:40.786987", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 11428, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:48:40.786987", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:48:40.815279", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 11428, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:48:40.866323", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:48:41.047503", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:48:41.049701", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 11428, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:48:41.055208", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:48:41.058562", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 11428, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:48:42.721011", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "get_conversation_files endpoint called for: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 11428, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:48:42.721011", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "get_conversation_files endpoint called for: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:48:42.724990", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Conversation session not found: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 11428, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:48:42.741245", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Conversation session not found: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.274226", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.275211", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'what are the code doing', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.277247", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: what are the code doing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.281814", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.283346", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.284347", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.289749", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Creating new conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.290892", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Creating conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.292905", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-21T17:49:24.330145", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-21T17:49:24.332812", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.334858", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initializing conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.337734", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Set default model: qwen/qwen3-coder-30b-a3b-instruct", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.339987", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initialized session logger for: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.343914", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Created new conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.346193", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Conversation session conv-1 initialized successfully", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.350015", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Setting API key for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.352314", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "API key updated for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.358333", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Session created", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.364876", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.371066", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.375289", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.379927", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.385944", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.391291", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.394311", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.396307", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is first message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.398725", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "First question has no file context in session conv-1 - proceeding without code context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.402129", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.409476", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.411988", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.413988", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.422452", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=True)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.424467", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.427657", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.430104", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: True, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.433474", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.435770", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.438352", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "⚠️ First message but NO SELECTED FILES", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.439365", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.440473", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Injecting/updating system message with current context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.446487", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Inserted new system message with current context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:24.452561", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:27.380152", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761086972-hasbmSBNiw8yIhxyutQ7\",\n  \"provider\": \"DeepInfra\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761086972,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"I'd be happy to help you understand what the code is doing, but I don't see any code provided in your message. Could you please share the code you'd like me to analyze?\\n\\nOnce you provide the code, I'll be able to explain:\\n- What the code does overall\\n- The purpose of different functions or components\\n- How the logic flows\\n- Any key algorithms or patterns being used\\n- Potential issues or improvements\\n\\nPlease paste the code you'd like me to examine.\",\n        \"refusal\": null,\n        \"reasoning\": null\n      }\n    }\n  ],\n  \"usage\": {\n    \"prompt_tokens\": 39,\n    \"completion_tokens\": 100,\n    \"total_tokens\":", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:27.385700", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 451 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:27.386760", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: I'd be happy to help you understand what the code is doing, but I don't see any code provided in your message. Could you please share the code you'd like me to analyze?\n\nOnce you provide the code, I'l", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:27.394015", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 451 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:27.399811", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No D2 diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:27.407339", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 451 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:27.416401", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No Mermaid diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:27.419399", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After Mermaid validation/fix: 451 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:27.423307", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] No agent prompt provided for question: what are the code doing...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:27.433038", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 3.018s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:27.435036", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:27.446097", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:27.567622", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 3.02s using 139 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:27.569929", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:27.575948", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "Created new GUID dd8cece9-032c-4d89-b06f-5f76982304a6 for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:27.581474", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "No history file found for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:27.585663", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251021-174927_dd8cece9-032c-4d89-b06f-5f76982304a6.json (2 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:27.590203", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (2 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:27.596437", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:49:27.660347", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42460, "thread_name": "AnyIO worker thread", "process": 37568, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:50:33.087379", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 34836, "thread_name": "MainThread", "process": 28040, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:50:33.545262", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 34836, "thread_name": "MainThread", "process": 28040, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:50:33.546257", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 34836, "thread_name": "MainThread", "process": 28040, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-21T17:50:33.576347", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 34836, "thread_name": "MainThread", "process": 28040, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-21T17:50:33.576347", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 34836, "thread_name": "MainThread", "process": 28040, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:50:33.576347", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 34836, "thread_name": "MainThread", "process": 28040, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:50:39.842996", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 34836, "thread_name": "MainThread", "process": 28040, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:50:40.231025", "level": "INFO", "logger": "whysper.app.main", "message": "Static files directory: C:\\Code2025\\Whysper\\backend\\static", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 34836, "thread_name": "MainThread", "process": 28040, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:50:50.453254", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40568, "thread_name": "MainThread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:50:50.908150", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40568, "thread_name": "MainThread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:50:50.909150", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40568, "thread_name": "MainThread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-21T17:50:50.925285", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40568, "thread_name": "MainThread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-21T17:50:50.926278", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40568, "thread_name": "MainThread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:50:50.927281", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40568, "thread_name": "MainThread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:50:57.550133", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40568, "thread_name": "MainThread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:50:57.966909", "level": "INFO", "logger": "whysper.app.main", "message": "Static files directory: C:\\Code2025\\Whysper\\backend\\static", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40568, "thread_name": "MainThread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:50:58.302740", "level": "INFO", "logger": "whysper.app.main", "message": "Starting Whysper Web2 Backend v2.0.0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40568, "thread_name": "MainThread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T17:50:58.349438", "level": "INFO", "logger": "whysper.app.main", "message": "Server running on 0.0.0.0:8003", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40568, "thread_name": "MainThread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T17:50:58.369500", "level": "INFO", "logger": "whysper.app.main", "message": "Debug mode: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40568, "thread_name": "MainThread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T17:50:58.371503", "level": "INFO", "logger": "whysper.app.main", "message": "CORS origins: ['http://localhost:3000', 'http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:5176', 'http://localhost:5177', 'http://localhost:5178', 'http://127.0.0.1:3000', 'http://127.0.0.1:5173', 'http://127.0.0.1:5174', 'http://127.0.0.1:5175', 'http://127.0.0.1:5176', 'http://127.0.0.1:5177']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40568, "thread_name": "MainThread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T17:50:58.551077", "level": "INFO", "logger": "whysper.app.main", "message": "Real-time log broadcasting enabled - connect to GET /api/v1/logs/stream", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40568, "thread_name": "MainThread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T17:50:58.566700", "level": "INFO", "logger": "whysper.app.main", "message": "FastMCP server integration initialized", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40568, "thread_name": "MainThread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T17:50:58.570510", "level": "INFO", "logger": "whysper.app.main", "message": "MCP endpoints available at /mcp/*", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40568, "thread_name": "MainThread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T17:50:58.573143", "level": "INFO", "logger": "whysper.app.main", "message": "MCP tools: generate_diagram, render_diagram, generate_and_render", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40568, "thread_name": "MainThread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T17:50:58.574140", "level": "INFO", "logger": "whysper.app.main", "message": "MCP WebSocket endpoint: /mcp/ws", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40568, "thread_name": "MainThread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T17:51:28.227999", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5788, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:51:28.242879", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5788, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:51:28.258439", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5788, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:51:28.261697", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5788, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:51:28.519124", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5788, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:51:28.585971", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5788, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:51:28.802009", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5788, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:51:28.829196", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5788, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:51:28.941136", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5788, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:51:28.946393", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5788, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:51:29.046498", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5788, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:51:29.049982", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5788, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:51:29.152713", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "get_conversation_files endpoint called for: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5788, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:51:29.165038", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Conversation session not found: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5788, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:51:29.189224", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "get_conversation_files endpoint called for: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5788, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:51:29.193722", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Conversation session not found: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 5788, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:51:33.601398", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40568, "thread_name": "MainThread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-17"}}
{"timestamp": "2025-10-21T17:52:38.772331", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:38.783858", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'what code do you  have', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'timeout': 120, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:38.811057", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: what code do you  have", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:38.816061", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:38.822453", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:38.866086", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'timeout': 120, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:38.873493", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Creating new conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:38.890118", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Creating conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:38.905374", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-21T17:52:38.954123", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-21T17:52:38.956204", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:38.959224", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initializing conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:38.961239", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Set default model: qwen/qwen3-coder-30b-a3b-instruct", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:38.964105", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initialized session logger for: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:38.966204", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Created new conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:38.969548", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Conversation session conv-1 initialized successfully", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:38.971807", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Setting API key for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:38.974137", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "API key updated for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:38.991891", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Session created", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:38.996314", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:39.019174", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Provider update skipped - same or empty provider: 'openrouter'", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:39.054914", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating model to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:39.060468", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Model updated", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:39.073845", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Model changed to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:39.087538", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:39.101163", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Using agent prompt: You are a helpful AI assistant specialized in code analysis and development....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:39.103167", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:39.109159", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:39.117275", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:39.219158", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:39.228250", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:39.238802", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is first message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:39.242645", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "First question has no file context in session conv-1 - proceeding without code context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:39.248396", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:39.257876", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:39.258922", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:39.264975", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:39.287014", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=True)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:39.289015", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:39.290013", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:39.291013", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: True, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:39.295012", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:39.307056", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:39.314594", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "⚠️ First message but NO SELECTED FILES", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:39.315539", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:39.317190", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Injecting/updating system message with current context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:39.318205", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Inserted new system message with current context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:39.320513", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:41.609528", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761087166-MBHMVqu8AgEF5zy4qmye\",\n  \"provider\": \"Novita\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761087166,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"I don't see any code provided in your message. You've only written \\\"what code do you have\\\" which is a question rather than code content.\\n\\nCould you please share the code you'd like me to analyze or help with? Once you provide the code, I'll be happy to assist with:\\n\\n- Code review and analysis\\n- Finding bugs or issues\\n- Explaining how the code works\\n- Suggesting improvements\\n- Helping with debugging\\n- Answering specific questions about the code\\n\\nPlease paste the code you'd like me to examine.\",\n        \"refusal\": null,\n        \"reasoning\": null\n      }\n    }\n  ],\n  \"system_fingerprint\": \"\",\n  \"usage\": {\n", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:41.613669", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 496 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:41.615676", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: I don't see any code provided in your message. You've only written \"what code do you have\" which is a question rather than code content.\n\nCould you please share the code you'd like me to analyze or he", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:41.617022", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 496 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:41.622577", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No D2 diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:41.623594", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 496 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:41.628106", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No Mermaid diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:41.629105", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After Mermaid validation/fix: 496 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:41.631103", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Using agent prompt for question: what code do you  have...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:41.631631", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt length: 76 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:41.633644", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt preview: You are a helpful AI assistant specialized in code analysis and development....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:41.635180", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 2.370s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:41.636652", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:41.640048", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:41.789818", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 2.37s using 152 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:41.791834", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:41.793070", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "Created new GUID 2018f0a6-839a-486e-a6fe-b7900686ed21 for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:41.795088", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "No history file found for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:41.799089", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251021-175241_2018f0a6-839a-486e-a6fe-b7900686ed21.json (2 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:41.802611", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (2 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:41.803609", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:52:41.841045", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:53:55.367685", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:53:55.371169", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:53:55.417293", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:53:55.448927", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:53:55.752847", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:53:55.767144", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:54:29.324311", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:54:29.331793", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:54:29.464125", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:54:29.523138", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:54:29.654426", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:54:29.670964", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:54:55.556577", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:54:55.566013", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:54:55.642279", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:54:55.717455", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:54:55.887421", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:54:55.908291", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:29.032451", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:29.035455", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'what code is it?', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'timeout': 120, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:29.037453", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: what code is it?", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:29.039452", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:29.042454", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:29.045132", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'timeout': 120, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:29.052665", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Retrieved existing session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:29.055759", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:29.057932", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Provider update skipped - same or empty provider: 'openrouter'", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:29.058951", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating model to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:29.059950", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Model updated", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:29.061948", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Model changed to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:29.063162", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:29.064426", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Using agent prompt: You are a helpful AI assistant specialized in code analysis and development....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:29.070728", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:29.072893", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:29.075650", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:29.076979", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:29.078323", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:29.079339", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is follow-up message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:29.081973", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:29.084463", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:29.086766", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:29.088783", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:29.095052", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: False (first_message=False)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:29.098769", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:29.101232", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:29.106747", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: False, needs_context: False", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:29.111274", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:29.115307", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:29.166291", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "❌ No codebase context needed, returning empty", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:29.169698", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:29.170718", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Injecting/updating system message with current context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:29.175209", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updated existing system message with current context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:29.177684", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:30.823912", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761087335-pAp1Bjj8gF14jBn4WqBn\",\n  \"provider\": \"DeepInfra\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761087335,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"I don't see any code in our conversation so far. This is what I see from our exchange:\\n\\nYou asked: \\\"what code do you have\\\"\\nI responded: \\\"I don't see any code provided in your message. You've only written \\\"what code do you have\\\" which is a question rather than code content.\\\"\\n\\nSo there's no actual code for me to analyze or discuss. \\n\\nIf you'd like me to look at some code, please paste it in your next message and I'll be happy to help you with it.\",\n        \"refusal\": null,\n        \"reasoning\": null\n      }\n    }\n  ],\n  \"usage\": {\n    \"prompt_tokens\": 141,\n    \"completion_tokens\": 109,\n    \"total_tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:30.826902", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 448 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:30.827412", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: I don't see any code in our conversation so far. This is what I see from our exchange:\n\nYou asked: \"what code do you have\"\nI responded: \"I don't see any code provided in your message. You've only writ", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:30.828425", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 448 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:30.829956", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No D2 diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:30.830974", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 448 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:30.833364", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No Mermaid diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:30.834391", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After Mermaid validation/fix: 448 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:30.835388", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Using agent prompt for question: what code is it?...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:30.837392", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt length: 76 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:30.842763", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt preview: You are a helpful AI assistant specialized in code analysis and development....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:30.844067", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 1.755s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:30.846094", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:30.849609", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:30.858091", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 1.76s using 250 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:30.863389", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:30.940019", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Loaded conversation history: C:\\Code2025\\Whysper\\history\\20251021-175241_2018f0a6-839a-486e-a6fe-b7900686ed21.json", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:30.949628", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251021-175241_2018f0a6-839a-486e-a6fe-b7900686ed21.json (4 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:30.954903", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (4 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:30.958325", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:31.031288", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:42.137438", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 Log stream client disconnected (cancelled, session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40568, "thread_name": "MainThread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap"}}
{"timestamp": "2025-10-21T17:55:46.709931", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40568, "thread_name": "MainThread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-53"}}
{"timestamp": "2025-10-21T17:55:47.077693", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:47.106325", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:47.160043", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:47.164063", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:47.891853", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:48.022080", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:48.174134", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:48.284801", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:49.080819", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:49.132024", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:49.177902", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:55:49.223410", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:39.835336", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:39.848905", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'what code', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:39.854906", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: what code", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:39.907727", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:39.943923", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:39.987171", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:40.002192", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Retrieved existing session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:40.003194", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:40.005193", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:40.007192", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:40.008195", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:40.009193", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:40.010193", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:40.014204", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:40.016208", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is follow-up message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:40.018206", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:40.020486", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:40.022901", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:40.024910", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:40.030432", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: False (first_message=False)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:40.031431", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:40.033432", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:40.035432", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: False, needs_context: False", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:40.038941", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:40.043568", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:40.046585", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "❌ No codebase context needed, returning empty", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:40.049923", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:40.051923", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Injecting/updating system message with current context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:40.057286", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updated existing system message with current context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:40.059299", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:43.207771", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761087406-A4QJTvS3gQAJPenFNLIr\",\n  \"provider\": \"Novita\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761087406,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"I'm still not seeing any code in our conversation. Let me clarify what I can see:\\n\\n**What I see from our conversation:**\\n- Your message: \\\"what code do you have\\\"\\n- My response: \\\"I don't see any code provided in your message. You've only written \\\"what code do you have\\\" which is a question rather than code content.\\\"\\n\\n**What I'm looking for:**\\nTo help you with code, you need to actually provide the code you want me to examine. This could be:\\n- A code snippet you're working on\\n- Code that's giving you trouble\\n- Code you'd like me to review or explain\\n- Code you want me to help debug\\n\\nCould you please s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:43.209767", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 717 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:43.209767", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: I'm still not seeing any code in our conversation. Let me clarify what I can see:\n\n**What I see from our conversation:**\n- Your message: \"what code do you have\"\n- My response: \"I don't see any code pr", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:43.210765", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 717 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:43.211767", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No D2 diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:43.213022", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 717 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:43.214041", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No Mermaid diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:43.215036", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After Mermaid validation/fix: 717 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:43.216059", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] No agent prompt provided for question: what code...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:43.217663", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 3.193s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:43.222488", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:43.226781", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:43.229285", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 3.19s using 437 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:43.230302", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:43.276352", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Loaded conversation history: C:\\Code2025\\Whysper\\history\\20251021-175241_2018f0a6-839a-486e-a6fe-b7900686ed21.json", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:43.289088", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251021-175241_2018f0a6-839a-486e-a6fe-b7900686ed21.json (6 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:43.297117", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (6 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:43.303052", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:43.368740", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:43.795329", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "get_conversation_files endpoint called for: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:56:43.855138", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Retrieved 0 context files for session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:59:08.303989", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:59:08.316070", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:59:08.383802", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:59:08.418509", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:59:08.567046", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T17:59:08.573028", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:35:26.762096", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 Log stream client disconnected (cancelled, session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40568, "thread_name": "MainThread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap"}}
{"timestamp": "2025-10-21T19:35:31.924236", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40568, "thread_name": "MainThread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-88"}}
{"timestamp": "2025-10-21T19:35:32.984348", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 30160, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:35:32.984348", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:35:33.103745", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 30160, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:35:33.125377", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:35:33.288804", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:35:33.414187", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 30160, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:35:33.718539", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:35:33.769964", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 30160, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:35:34.695001", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 30160, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:35:34.713589", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:35:34.791035", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 30160, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:35:34.805588", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:27.372032", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:27.385850", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'what are is the code doing?', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:27.391854", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: what are is the code doing?", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:27.395907", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:27.398814", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:27.409439", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:27.413131", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Retrieved existing session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:27.430602", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:27.431602", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:27.443904", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:27.446390", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:27.460008", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:27.484370", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:27.493355", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:27.497772", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is follow-up message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:27.500793", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 3", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:27.504790", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:27.507798", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:27.510797", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:27.516201", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=False)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:27.526300", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:27.529451", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:27.534249", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: False, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:27.538496", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:27.543684", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:27.549883", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:27.556409", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Injecting/updating system message with current context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:27.567040", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updated existing system message with current context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:27.568064", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:30.897912", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761093389-8hsMdEJ8tQFOgZmw2fCJ\",\n  \"provider\": \"DeepInfra\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761093389,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"I still don't see any code in our conversation. I'm asking you to provide the code you want me to explain, but I don't see any code provided.\\n\\nTo help you understand what code is doing, I would need you to share:\\n\\n1. The actual code you're asking about\\n2. The specific part of the code you're confused about\\n\\nCould you please paste the code you'd like me to explain? Once you share it, I'll be happy to break down what it's doing step by step.\\n\\nIf you're asking about code that's not in our conversation, please share that code and I'll explain it to you.\",\n        \"refusal\": null,\n        \"reasoning\": null\n  ", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:30.899806", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 555 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:30.901154", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: I still don't see any code in our conversation. I'm asking you to provide the code you want me to explain, but I don't see any code provided.\n\nTo help you understand what code is doing, I would need y", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:30.903191", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 555 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:30.908813", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No D2 diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:30.910800", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 555 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:30.912205", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No Mermaid diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:30.914227", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After Mermaid validation/fix: 555 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:30.915226", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] No agent prompt provided for question: what are is the code doing?...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:30.916225", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 3.405s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:30.917226", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:30.919223", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:30.925932", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 3.41s using 584 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:30.928358", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:30.968792", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Loaded conversation history: C:\\Code2025\\Whysper\\history\\20251021-175241_2018f0a6-839a-486e-a6fe-b7900686ed21.json", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:30.976532", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251021-175241_2018f0a6-839a-486e-a6fe-b7900686ed21.json (8 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:30.980021", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (8 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:30.983031", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:31.057368", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:31.343876", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "get_conversation_files endpoint called for: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:36:31.345867", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Retrieved 0 context files for session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:31.792991", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:31.793992", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'Qhat is code doing?', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:31.794990", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: Qhat is code doing?", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:31.795994", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:31.797002", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:31.802310", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:31.806402", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Retrieved existing session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:31.807405", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:31.809405", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:31.810409", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:31.811410", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:31.812753", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:31.816833", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:31.818845", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:31.820845", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is follow-up message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:31.823846", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 4", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:31.826124", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:31.828124", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:31.831562", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:31.842034", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: False (first_message=False)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:31.845030", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:31.848047", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:31.849061", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: False, needs_context: False", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:31.854526", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:31.856057", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:31.857070", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "❌ No codebase context needed, returning empty", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:31.868994", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:31.873568", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Injecting/updating system message with current context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:31.879619", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updated existing system message with current context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:31.887352", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:33.962383", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761093452-zYfffJUUekgnOEalu9fq\",\n  \"provider\": \"DeepInfra\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761093452,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"I understand you're asking about what code does, but I still don't see any actual code in our conversation to explain.\\n\\nTo help you understand what code is doing, I would need you to provide:\\n\\n1. **The actual code** you want me to explain\\n2. **The specific part** you're confused about\\n\\nFor example, if you shared this code:\\n```python\\ndef greet(name):\\n    return f\\\"Hello, {name}!\\\"\\n```\\n\\nI could explain that it's a function that takes a name parameter and returns a greeting message.\\n\\nBut I don't see any code in our conversation so far. Could you please share the code you'd like me to explain? Once you", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:33.971993", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 715 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:33.979361", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: I understand you're asking about what code does, but I still don't see any actual code in our conversation to explain.\n\nTo help you understand what code is doing, I would need you to provide:\n\n1. **Th", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:33.985038", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 715 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:33.990038", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No D2 diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:33.993135", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 715 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:34.000067", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No Mermaid diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:34.008374", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After Mermaid validation/fix: 715 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:34.031441", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] No agent prompt provided for question: Qhat is code doing?...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:34.035455", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 2.204s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:34.036846", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:34.051031", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:35.078680", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 2.20s using 767 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:35.083969", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:35.202976", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Loaded conversation history: C:\\Code2025\\Whysper\\history\\20251021-175241_2018f0a6-839a-486e-a6fe-b7900686ed21.json", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:35.226240", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251021-175241_2018f0a6-839a-486e-a6fe-b7900686ed21.json (10 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:35.228743", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (10 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:35.237984", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:35.284089", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:35.604227", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "get_conversation_files endpoint called for: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:37:35.609701", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Retrieved 0 context files for session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:40:53.966995", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:40:53.976987", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:40:54.045593", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:40:54.070967", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:40:54.266452", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:40:54.274759", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:41:19.631941", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:41:19.644426", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:41:19.839144", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:41:19.871260", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:41:20.099523", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:41:20.147740", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:44:53.744430", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 Log stream client disconnected (cancelled, session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40568, "thread_name": "MainThread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap"}}
{"timestamp": "2025-10-21T19:44:58.617450", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:44:58.780213", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27128, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:44:58.782228", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:44:58.885881", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27128, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:44:59.016782", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40568, "thread_name": "MainThread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-141"}}
{"timestamp": "2025-10-21T19:44:59.919065", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:44:59.994107", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27128, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:45:00.286754", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27128, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:45:00.164790", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:45:01.571902", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 2640, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:45:01.576340", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 2640, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:45:01.598176", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27128, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:45:01.602673", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 27128, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:48:30.859276", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 Log stream client disconnected (cancelled, session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40568, "thread_name": "MainThread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap"}}
{"timestamp": "2025-10-21T19:49:45.808371", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:49:45.820178", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 40568, "thread_name": "MainThread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-157"}}
{"timestamp": "2025-10-21T19:49:45.825672", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:49:45.905011", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:49:45.911016", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:49:46.079299", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:49:46.107014", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:49:46.208464", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:49:46.224830", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:49:46.362629", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:49:46.373085", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:49:46.518143", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:49:46.521111", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.155635", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.159155", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'What Code', 'conversationId': 'conv-1', 'contextFiles': ['backend/common/__init__.py', 'backend/common/ai.py', 'backend/common/base_ai.py', 'backend/common/env_manager.py', 'backend/common/file_filters.py', 'backend/common/lazy_file_scanner.py', 'backend/common/log_broadcaster.py', 'backend/common/logger.py', 'backend/common/models.py', 'backend/common/system_message_manager.py'], 'settings': {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'timeout': 120, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.162157", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: What Code", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.166154", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.170163", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: ['backend/common/__init__.py', 'backend/common/ai.py', 'backend/common/base_ai.py', 'backend/common/env_manager.py', 'backend/common/file_filters.py', 'backend/common/lazy_file_scanner.py', 'backend/common/log_broadcaster.py', 'backend/common/logger.py', 'backend/common/models.py', 'backend/common/system_message_manager.py']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.172436", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': 'openrouter', 'model': 'qwen/qwen3-coder-30b-a3b-instruct', 'systemPrompt': 'You are a helpful AI assistant specialized in code analysis and development.', 'contextFiles': [], 'maxTokens': 14000, 'temperature': 0.1, 'timeout': 120, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.177155", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Retrieved existing session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.179169", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 ADDING 10 CONTEXT FILES TO SESSION conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.198080", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📋 Files to add: ['backend/common/__init__.py', 'backend/common/ai.py', 'backend/common/base_ai.py', 'backend/common/env_manager.py', 'backend/common/file_filters.py', 'backend/common/lazy_file_scanner.py', 'backend/common/log_broadcaster.py', 'backend/common/logger.py', 'backend/common/models.py', 'backend/common/system_message_manager.py']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.199744", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📄 Adding file 1/10: backend/common/__init__.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.201581", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 ADDING FILE TO SESSION conv-1: backend/common/__init__.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.244536", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📂 Using CODE_PATH: C:\\Code2025\\Whysper", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.265207", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 Resolving file path: backend/common/__init__.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.271703", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔐 Resolved safe_path: C:\\Code2025\\Whysper\\backend\\common\\__init__.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.275194", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ FILE ADDED SUCCESSFULLY! Total files: 1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.277194", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Current selected files: ['C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\__init__.py']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.279614", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "File added to selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.283632", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Successfully added file: backend/common/__init__.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.285631", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📄 Adding file 2/10: backend/common/ai.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.288634", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 ADDING FILE TO SESSION conv-1: backend/common/ai.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.322053", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📂 Using CODE_PATH: C:\\Code2025\\Whysper", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.350184", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 Resolving file path: backend/common/ai.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.372229", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔐 Resolved safe_path: C:\\Code2025\\Whysper\\backend\\common\\ai.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.379225", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ FILE ADDED SUCCESSFULLY! Total files: 2", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.383308", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Current selected files: ['C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\__init__.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\ai.py']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.385509", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "File added to selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.386525", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Successfully added file: backend/common/ai.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.387525", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📄 Adding file 3/10: backend/common/base_ai.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.388730", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 ADDING FILE TO SESSION conv-1: backend/common/base_ai.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.392617", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📂 Using CODE_PATH: C:\\Code2025\\Whysper", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.394688", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 Resolving file path: backend/common/base_ai.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.403003", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔐 Resolved safe_path: C:\\Code2025\\Whysper\\backend\\common\\base_ai.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.405006", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ FILE ADDED SUCCESSFULLY! Total files: 3", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.407100", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Current selected files: ['C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\__init__.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\ai.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\base_ai.py']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.408092", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "File added to selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.409605", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Successfully added file: backend/common/base_ai.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.411621", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📄 Adding file 4/10: backend/common/env_manager.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.413620", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 ADDING FILE TO SESSION conv-1: backend/common/env_manager.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.421363", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📂 Using CODE_PATH: C:\\Code2025\\Whysper", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.425661", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 Resolving file path: backend/common/env_manager.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.439507", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔐 Resolved safe_path: C:\\Code2025\\Whysper\\backend\\common\\env_manager.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.441503", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ FILE ADDED SUCCESSFULLY! Total files: 4", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.443520", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Current selected files: ['C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\__init__.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\ai.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\base_ai.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\env_manager.py']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.446519", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "File added to selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.450536", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Successfully added file: backend/common/env_manager.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.451984", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📄 Adding file 5/10: backend/common/file_filters.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.453004", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 ADDING FILE TO SESSION conv-1: backend/common/file_filters.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.462061", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📂 Using CODE_PATH: C:\\Code2025\\Whysper", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.471570", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 Resolving file path: backend/common/file_filters.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.476572", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔐 Resolved safe_path: C:\\Code2025\\Whysper\\backend\\common\\file_filters.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.480571", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ FILE ADDED SUCCESSFULLY! Total files: 5", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.484126", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Current selected files: ['C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\__init__.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\ai.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\base_ai.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\env_manager.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\file_filters.py']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.486608", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "File added to selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.487628", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Successfully added file: backend/common/file_filters.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.494693", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📄 Adding file 6/10: backend/common/lazy_file_scanner.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.495695", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 ADDING FILE TO SESSION conv-1: backend/common/lazy_file_scanner.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.499694", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📂 Using CODE_PATH: C:\\Code2025\\Whysper", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.502999", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 Resolving file path: backend/common/lazy_file_scanner.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.509697", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔐 Resolved safe_path: C:\\Code2025\\Whysper\\backend\\common\\lazy_file_scanner.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.513045", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ FILE ADDED SUCCESSFULLY! Total files: 6", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.515455", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Current selected files: ['C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\__init__.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\ai.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\base_ai.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\env_manager.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\file_filters.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\lazy_file_scanner.py']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.515455", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "File added to selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.516963", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Successfully added file: backend/common/lazy_file_scanner.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.517985", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📄 Adding file 7/10: backend/common/log_broadcaster.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.518975", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 ADDING FILE TO SESSION conv-1: backend/common/log_broadcaster.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.524428", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📂 Using CODE_PATH: C:\\Code2025\\Whysper", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.526427", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 Resolving file path: backend/common/log_broadcaster.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.531400", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔐 Resolved safe_path: C:\\Code2025\\Whysper\\backend\\common\\log_broadcaster.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.533418", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ FILE ADDED SUCCESSFULLY! Total files: 7", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.534414", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Current selected files: ['C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\__init__.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\ai.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\base_ai.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\env_manager.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\file_filters.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\lazy_file_scanner.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\log_broadcaster.py']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.536088", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "File added to selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.538107", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Successfully added file: backend/common/log_broadcaster.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.545721", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📄 Adding file 8/10: backend/common/logger.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.547733", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 ADDING FILE TO SESSION conv-1: backend/common/logger.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.550740", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📂 Using CODE_PATH: C:\\Code2025\\Whysper", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.551740", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 Resolving file path: backend/common/logger.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.556357", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔐 Resolved safe_path: C:\\Code2025\\Whysper\\backend\\common\\logger.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.557903", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ FILE ADDED SUCCESSFULLY! Total files: 8", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.558923", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Current selected files: ['C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\__init__.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\ai.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\base_ai.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\env_manager.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\file_filters.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\lazy_file_scanner.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\log_broadcaster.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\logger.py']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.561923", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "File added to selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.562919", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Successfully added file: backend/common/logger.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.564948", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📄 Adding file 9/10: backend/common/models.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.567083", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 ADDING FILE TO SESSION conv-1: backend/common/models.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.570966", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📂 Using CODE_PATH: C:\\Code2025\\Whysper", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.572936", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 Resolving file path: backend/common/models.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.576222", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔐 Resolved safe_path: C:\\Code2025\\Whysper\\backend\\common\\models.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.578217", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ FILE ADDED SUCCESSFULLY! Total files: 9", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.579218", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Current selected files: ['C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\__init__.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\ai.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\base_ai.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\env_manager.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\file_filters.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\lazy_file_scanner.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\log_broadcaster.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\logger.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\models.py']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.582214", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "File added to selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.585216", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Successfully added file: backend/common/models.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.587219", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📄 Adding file 10/10: backend/common/system_message_manager.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.589217", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔍 ADDING FILE TO SESSION conv-1: backend/common/system_message_manager.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.593359", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📂 Using CODE_PATH: C:\\Code2025\\Whysper", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.594376", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📄 Resolving file path: backend/common/system_message_manager.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.600377", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔐 Resolved safe_path: C:\\Code2025\\Whysper\\backend\\common\\system_message_manager.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.602375", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "✅ FILE ADDED SUCCESSFULLY! Total files: 10", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.603386", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Current selected files: ['C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\__init__.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\ai.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\base_ai.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\env_manager.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\file_filters.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\lazy_file_scanner.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\log_broadcaster.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\logger.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\models.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\system_message_manager.py']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.604726", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "File added to selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.605743", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Successfully added file: backend/common/system_message_manager.py", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.606747", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📊 SESSION SUMMARY - Total selected files: 10", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.608744", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📋 Final selected files list: ['C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\__init__.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\ai.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\base_ai.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\env_manager.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\file_filters.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\lazy_file_scanner.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\log_broadcaster.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\logger.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\models.py', 'C:\\\\Code2025\\\\Whysper\\\\backend\\\\common\\\\system_message_manager.py']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.611038", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Provider update skipped - same or empty provider: 'openrouter'", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.611038", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating model to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.613297", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Model updated", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.615486", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Model changed to 'qwen/qwen3-coder-30b-a3b-instruct' for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.617498", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.619023", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Using agent prompt: You are a helpful AI assistant specialized in code analysis and development....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.620023", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.621513", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 10 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.622527", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 10 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.624527", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.625530", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 10 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.626529", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is follow-up message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.628530", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 5", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.630527", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.632551", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.634553", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.636654", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: False (first_message=False)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.637672", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.638892", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.639906", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: False, needs_context: False", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.641906", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 10", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.643320", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: ['backend/common/__init__.py', 'backend/common/ai.py', 'backend/common/base_ai.py', 'backend/common/env_manager.py', 'backend/common/file_filters.py', 'backend/common/lazy_file_scanner.py', 'backend/common/log_broadcaster.py', 'backend/common/logger.py', 'backend/common/models.py', 'backend/common/system_message_manager.py']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.644347", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "❌ No codebase context needed, returning empty", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.647341", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.649680", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Injecting/updating system message with current context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.650678", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updated existing system message with current context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:28.651678", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:30.382355", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761094349-bfhw6d8TAzQvSKHhA7Vz\",\n  \"provider\": \"DeepInfra\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761094349,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"I'm still not seeing any code in our conversation. Let me be very clear about what I need from you:\\n\\n**I don't see any code in our conversation so far.**\\n\\nTo help you with \\\"what code is doing,\\\" I need you to provide the actual code you want me to explain. \\n\\nPlease:\\n1. Copy and paste the code you're asking about\\n2. Or share the code snippet you'd like me to analyze\\n\\nFor example, if you shared this code:\\n```python\\nx = 5\\ny = 10\\nresult = x + y\\nprint(result)\\n```\\n\\nI could explain that it:\\n- Sets x to 5\\n- Sets y to 10  \\n- Adds them together and stores the result\\n- Prints the result (which would b", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:30.383782", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 720 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:30.384802", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: I'm still not seeing any code in our conversation. Let me be very clear about what I need from you:\n\n**I don't see any code in our conversation so far.**\n\nTo help you with \"what code is doing,\" I need", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:30.385812", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 720 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:30.386798", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No D2 diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:30.387792", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 720 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:30.388803", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No Mermaid diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:30.389808", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After Mermaid validation/fix: 720 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:30.392808", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Using agent prompt for question: What Code...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:30.394214", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt length: 76 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:30.397795", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] Agent prompt preview: You are a helpful AI assistant specialized in code analysis and development....", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:30.398794", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 1.764s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:30.399797", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:30.401693", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:30.409856", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 1.76s using 970 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:30.410877", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:30.472678", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Loaded conversation history: C:\\Code2025\\Whysper\\history\\20251021-175241_2018f0a6-839a-486e-a6fe-b7900686ed21.json", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:30.482592", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251021-175241_2018f0a6-839a-486e-a6fe-b7900686ed21.json (12 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:30.487018", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (12 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:30.490017", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:30.534664", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:30.859970", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "get_conversation_files endpoint called for: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:52:30.864520", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Retrieved 10 context files for session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:54:44.997804", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:54:45.005815", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:54:45.118900", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:54:45.141641", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:54:45.341647", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:54:45.361029", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:36.496989", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:36.497956", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'What Code', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:36.499444", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: What Code", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:36.501459", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:36.502461", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:36.505157", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:36.509206", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Retrieved existing session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:36.511640", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:36.512640", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:36.513641", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:36.514645", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:36.516644", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:36.517643", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:36.521364", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:36.523868", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is follow-up message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:36.529344", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 6", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:36.530628", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:36.532918", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:36.534289", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:36.542702", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: False (first_message=False)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:36.543890", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:36.546151", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:36.547151", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: False, needs_context: False", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:36.550507", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:36.554557", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:36.556993", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "❌ No codebase context needed, returning empty", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:36.559256", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:36.561257", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Injecting/updating system message with current context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:36.570257", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updated existing system message with current context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:36.573885", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:40.939192", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761094539-oEwQOnyXqPGcauj5t8jX\",\n  \"provider\": \"SiliconFlow\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761094539,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"I'm not seeing any code in our conversation. I keep asking you to share the code you want me to explain, but you keep just asking \\\"What Code?\\\" \\n\\nTo help you, I need you to provide actual code. Here's what I'm looking for:\\n\\n**Please share the code you want me to explain.**\\n\\nFor example, you could paste:\\n- A function you wrote\\n- A program you're working on\\n- Some code that's confusing you\\n- Any code snippet you'd like me to break down\\n\\nI don't see any code in our conversation so far. What specific code would you like me to help you understand?\",\n        \"refusal\": null,\n        \"reasoning\": null\n   ", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:40.940197", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 547 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:40.941628", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: I'm not seeing any code in our conversation. I keep asking you to share the code you want me to explain, but you keep just asking \"What Code?\" \n\nTo help you, I need you to provide actual code. Here's ", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:40.942636", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 547 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:40.943639", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No D2 diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:40.944761", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 547 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:40.946165", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No Mermaid diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:40.947278", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After Mermaid validation/fix: 547 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:40.949298", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] No agent prompt provided for question: What Code...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:40.951382", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 4.416s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:40.952371", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:40.953369", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:40.956368", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 4.42s using 1113 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:40.957456", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:40.993795", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Loaded conversation history: C:\\Code2025\\Whysper\\history\\20251021-175241_2018f0a6-839a-486e-a6fe-b7900686ed21.json", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:41.001044", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251021-175241_2018f0a6-839a-486e-a6fe-b7900686ed21.json (14 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:41.003045", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (14 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:41.007658", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:41.046961", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:41.252509", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "get_conversation_files endpoint called for: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:55:41.256005", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Retrieved 0 context files for session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:57:57.650731", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:57:57.752358", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:57:58.125143", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:57:58.167750", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:57:58.427805", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T19:57:58.558760", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 29360, "thread_name": "AnyIO worker thread", "process": 42400, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:01:48.016136", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 1112, "thread_name": "MainThread", "process": 39068, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:01:49.515165", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 1112, "thread_name": "MainThread", "process": 39068, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:01:49.519441", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 1112, "thread_name": "MainThread", "process": 39068, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-21T20:01:49.771904", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 1112, "thread_name": "MainThread", "process": 39068, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-21T20:01:49.772904", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 1112, "thread_name": "MainThread", "process": 39068, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:01:49.774275", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 1112, "thread_name": "MainThread", "process": 39068, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:02:11.872112", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 1112, "thread_name": "MainThread", "process": 39068, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:02:13.035843", "level": "INFO", "logger": "whysper.app.main", "message": "Static files directory: C:\\Code2025\\Whysper\\backend\\static", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 1112, "thread_name": "MainThread", "process": 39068, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:02:35.390190", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "History service initialized with directory: C:\\Code2025\\Whysper\\history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37380, "thread_name": "MainThread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:02:36.164156", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "Initializing FileService", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37380, "thread_name": "MainThread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:02:36.166691", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37380, "thread_name": "MainThread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-21T20:02:36.223121", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37380, "thread_name": "MainThread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-21T20:02:36.230463", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37380, "thread_name": "MainThread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:02:36.243740", "level": "INFO", "logger": "whysper.app.services.file_service", "message": "FileService initialized with scanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37380, "thread_name": "MainThread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:03.795810", "level": "INFO", "logger": "whysper.mcp_server.mcp_history_service", "message": "MCP history service initialized with directory: C:\\Code2025\\Whysper\\history\\mcp", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37380, "thread_name": "MainThread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:04.521736", "level": "INFO", "logger": "whysper.app.main", "message": "Static files directory: C:\\Code2025\\Whysper\\backend\\static", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37380, "thread_name": "MainThread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:05.125247", "level": "INFO", "logger": "whysper.app.main", "message": "Starting Whysper Web2 Backend v2.0.0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37380, "thread_name": "MainThread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T20:03:05.127241", "level": "INFO", "logger": "whysper.app.main", "message": "Server running on 0.0.0.0:8003", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37380, "thread_name": "MainThread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T20:03:05.128580", "level": "INFO", "logger": "whysper.app.main", "message": "Debug mode: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37380, "thread_name": "MainThread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T20:03:05.131048", "level": "INFO", "logger": "whysper.app.main", "message": "CORS origins: ['http://localhost:3000', 'http://localhost:5173', 'http://localhost:5174', 'http://localhost:5175', 'http://localhost:5176', 'http://localhost:5177', 'http://localhost:5178', 'http://127.0.0.1:3000', 'http://127.0.0.1:5173', 'http://127.0.0.1:5174', 'http://127.0.0.1:5175', 'http://127.0.0.1:5176', 'http://127.0.0.1:5177']", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37380, "thread_name": "MainThread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T20:03:05.135574", "level": "INFO", "logger": "whysper.app.main", "message": "Real-time log broadcasting enabled - connect to GET /api/v1/logs/stream", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37380, "thread_name": "MainThread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T20:03:05.137589", "level": "INFO", "logger": "whysper.app.main", "message": "FastMCP server integration initialized", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37380, "thread_name": "MainThread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T20:03:05.139601", "level": "INFO", "logger": "whysper.app.main", "message": "MCP endpoints available at /mcp/*", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37380, "thread_name": "MainThread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T20:03:05.140588", "level": "INFO", "logger": "whysper.app.main", "message": "MCP tools: generate_diagram, render_diagram, generate_and_render", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37380, "thread_name": "MainThread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T20:03:05.141586", "level": "INFO", "logger": "whysper.app.main", "message": "MCP WebSocket endpoint: /mcp/ws", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37380, "thread_name": "MainThread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-2"}}
{"timestamp": "2025-10-21T20:03:06.564157", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37380, "thread_name": "MainThread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-4"}}
{"timestamp": "2025-10-21T20:03:08.713214", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 Log stream client disconnected (cancelled, session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37380, "thread_name": "MainThread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "starlette.responses.StreamingResponse.__call__.<locals>.wrap"}}
{"timestamp": "2025-10-21T20:03:13.840106", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35660, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:13.840106", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "get_settings endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:13.844970", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35660, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:13.847966", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Retrieved settings with 6 configuration items", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:14.162697", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📡 New log stream client connected (session: ALL)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 37380, "thread_name": "MainThread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": "Task-16"}}
{"timestamp": "2025-10-21T20:03:14.284796", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:14.300809", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_agents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35660, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:14.305850", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:14.353959", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 24 agent prompts", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 35660, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:14.498626", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:14.532143", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:14.804391", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "list_subagents endpoint called", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:14.809601", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.settings", "message": "Returning 89 subagent commands", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.706639", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🚀 CHAT ENDPOINT CALLED", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.707956", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📨 Raw request: {'message': 'what code', 'conversationId': 'conv-1', 'contextFiles': [], 'settings': {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.709141", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "💬 Message: what code", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.710159", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "🆔 Conversation ID: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.711589", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "📁 Context Files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.712605", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚙️ Settings: {'theme': 'compact', 'provider': '', 'model': '', 'systemPrompt': '', 'contextFiles': [], 'maxTokens': 4000, 'temperature': 0.7, 'access_key': 'W'}", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.720066", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Creating new conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.721065", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Creating conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.722271", "level": "INFO", "logger": "whysper.common.lazy_file_scanner", "message": "Initializing LazyCodebaseScanner", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "cache_size": 100, "max_file_size": 1048576}}
{"timestamp": "2025-10-21T20:03:46.764205", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "Ignore folders set", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null, "folders": []}}
{"timestamp": "2025-10-21T20:03:46.767536", "level": "DEBUG", "logger": "whysper.common.lazy_file_scanner", "message": "LazyCodebaseScanner initialized with stats tracking", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.768534", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initializing conversation session: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.769533", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Set default model: qwen/qwen3-coder-30b-a3b-instruct", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.773021", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Initialized session logger for: conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.774021", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Created new conversation session", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.775289", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Conversation session conv-1 initialized successfully", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.776533", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Setting API key for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.777850", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "API key updated for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.778996", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Session created", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.780010", "level": "WARNING", "logger": "whysper.app.api.v1.endpoints.chat", "message": "⚠️ NO CONTEXT FILES PROVIDED - proceeding without file context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.782361", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "Processing AI request for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.783690", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.785230", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating selected files for session conv-1: 0 files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.786472", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "After deduplication: 0 unique files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.787491", "level": "DEBUG", "logger": "whysper.conversation.conv-1", "message": "Updated file selection", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "init", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.788492", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Updated file selection for session conv-1: 0 selected files", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.789494", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question is first message", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.791492", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "First question has no file context in session conv-1 - proceeding without code context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.792797", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Question tracked with index 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.793895", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Processing question", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.796226", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Started processing question for session conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.798224", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": ".3f", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.800317", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Codebase context needed: True (first_message=True, has_files=False, file_count=0)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.801954", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Adding user message to conversation history", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.802970", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Gathering codebase content for AI processing", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.803969", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🔄 GETTING CODEBASE CONTENT - first_message: True, needs_context: True", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.805819", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📊 Current selected files count: 0", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.807831", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "📋 Selected files: []", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.808832", "level": "WARNING", "logger": "whysper.app.services.conversation_service", "message": "⚠️ First message but NO SELECTED FILES", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.809901", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Codebase content length: 0 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.811915", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Injecting/updating system message with current context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.812916", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Inserted new system message with current context", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:46.815915", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Sending question to AI processor", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:48.707249", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Full API response: {\n  \"id\": \"gen-1761095027-JvvHRXPtfKrmRRVMhIDE\",\n  \"provider\": \"Novita\",\n  \"model\": \"qwen/qwen3-coder-30b-a3b-instruct\",\n  \"object\": \"chat.completion\",\n  \"created\": 1761095027,\n  \"choices\": [\n    {\n      \"logprobs\": null,\n      \"finish_reason\": \"stop\",\n      \"native_finish_reason\": \"stop\",\n      \"index\": 0,\n      \"message\": {\n        \"role\": \"assistant\",\n        \"content\": \"I notice you've asked \\\"what code\\\" but haven't provided any code for me to analyze. You've shared a codebase structure that appears to be for a web application using React and TypeScript with Vite, but you haven't included the actual code content.\\n\\nCould you please share the specific code you'd like me to help analyze? For example:\\n\\n- The actual source code files you want me to review\\n- A specific function or component you're curious about\\n- Code that's causing you trouble or you'd like feedback on\\n\\nOnce you provide the code, I'll be happy to help analyze it, explain what it does, identify potential issues,", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:48.710842", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response length: 693 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:48.713112", "level": "DEBUG", "logger": "whysper.common.base_ai", "message": "Extracted AI response preview: I notice you've asked \"what code\" but haven't provided any code for me to analyze. You've shared a codebase structure that appears to be for a web application using React and TypeScript with Vite, but", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:48.714130", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Received AI response: 693 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:48.719622", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No D2 diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:48.720731", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After D2 validation/fix: 693 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:48.722951", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "No Mermaid diagrams found in response, skipping validation", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:48.724967", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "After Mermaid validation/fix: 693 characters", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:48.725969", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "🎨 [DIAGRAM DEBUG] No agent prompt provided for question: what code...", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:48.726971", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Processing completed in 1.929s", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:48.727966", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Updating conversation history and status", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:48.729341", "level": "DEBUG", "logger": "whysper.app.services.conversation_service", "message": "Converting markdown response to HTML", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:48.878175", "level": "INFO", "logger": "whysper.app.services.conversation_service", "message": "Question processing completed for session conv-1 in 1.93s using 183 tokens", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:48.879981", "level": "INFO", "logger": "whysper.conversation.conv-1", "message": "Question completed", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": "conversation", "operation": "ask_question", "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:48.881506", "level": "INFO", "logger": "whysper.app.services.history_service", "message": "Created new GUID bdbbe7d9-179a-463c-8292-3506c14e0fad for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:48.887990", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "No history file found for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:48.896606", "level": "DEBUG", "logger": "whysper.app.services.history_service", "message": "Saved conversation history: C:\\Code2025\\Whysper\\history\\20251021-200348_bdbbe7d9-179a-463c-8292-3506c14e0fad.json (2 messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:48.900164", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.chat", "message": "✅ Conversation history saved for conv-1 (2 total messages)", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:48.902894", "level": "INFO", "logger": "whysper.app.api.v1.endpoints.chat", "message": "AI response generated successfully for conversation conv-1", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
{"timestamp": "2025-10-21T20:03:48.972121", "level": "DEBUG", "logger": "whysper.app.api.v1.endpoints.code", "message": "extract_code_blocks endpoint started", "module": "logger", "function": "_log_with_context", "line": 208, "thread": 42580, "thread_name": "AnyIO worker thread", "process": 35576, "context": {"user_id": null, "session_id": null, "component": null, "operation": null, "request_id": null, "file_path": null, "line_number": null, "additional_data": null}, "extra": {"taskName": null}}
